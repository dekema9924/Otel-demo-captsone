/*! For license information please see module.js.LICENSE.txt */
/* [create-plugin] version: 6.1.7 */
/* [create-plugin] plugin: grafana-opensearch-datasource@2.32.1 */
define(["rxjs","module","@grafana/ui","lodash","react","@emotion/css","redux","@grafana/data","prismjs","@grafana/runtime"],((e,t,r,n,a,i,o,s,l,u)=>(()=>{var c={55:(e,t,r)=>{"use strict";const n=r(3801);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},144:(e,t,r)=>{"use strict";const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)>0},257:(e,t,r)=>{"use strict";const n=r(6392);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},399:(e,t,r)=>{"use strict";const n=r(9679);e.exports=(e,t,r)=>n(t,e,r)},405:(e,t,r)=>{"use strict";const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:i}=r(2107),o=r(2381),s=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={};let p=0;const m="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[m,a]],h=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=p++;o(e,a,t),d[e]=a,u[a]=t,c[a]=n,s[a]=new RegExp(t,r?"g":void 0),l[a]=new RegExp(n,r?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),h("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${m}+`),h("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),h("FULL",`^${u[d.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),h("LOOSE",`^${u[d.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),h("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),h("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",u[d.COERCE],!0),h("COERCERTLFULL",u[d.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},410:e=>{"use strict";const t=/^[0-9]+$/,r=(e,r)=>{if("number"==typeof e&&"number"==typeof r)return e===r?0:e<r?-1:1;const n=t.test(e),a=t.test(r);return n&&a&&(e=+e,r=+r),e===r?0:n&&!a?-1:a&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},463:(e,t,r)=>{"use strict";const n=r(6392);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},589:(e,t,r)=>{"use strict";const n=r(3801);e.exports=(e,t)=>new n(e,t).minor},599:(e,t,r)=>{"use strict";const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)<0},603:(e,t,r)=>{"use strict";const n=r(2801);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},651:(e,t,r)=>{"use strict";const n=r(8395);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},660:(e,t,r)=>{"use strict";const n=r(5860);e.exports=(e,t)=>{const r=n(e,null,!0),a=n(t,null,!0),i=r.compare(a);if(0===i)return null;const o=i>0,s=o?r:a,l=o?a:r,u=!!s.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(s))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"}},959:(e,t,r)=>{"use strict";const n=r(6879);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},1106:(e,t,r)=>{"use strict";const n=Symbol("SemVer ANY");class a{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof a){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?o[s.COMPARATORLOOSE]:o[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=i(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=a;const i=r(8029),{safeRe:o,t:s}=r(2728),l=r(7685),u=r(5906),c=r(9534),d=r(6293)},1112:(e,t,r)=>{"use strict";const n=r(8395);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},1158:e=>{"use strict";e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},1173:(e,t,r)=>{"use strict";const n=r(6293);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},1178:(e,t,r)=>{"use strict";const n=r(5566);e.exports=(e,t,r)=>n(e,t,r)<=0},1180:(e,t,r)=>{"use strict";const n=r(9534);e.exports=(e,t)=>new n(e,t).minor},1269:t=>{"use strict";t.exports=e},1308:e=>{"use strict";e.exports=t},1465:(e,t,r)=>{"use strict";const n=r(1722),a=r(5380);e.exports=(e,t,r)=>{const i=[];let o=null,s=null;const l=e.sort(((e,t)=>a(e,t,r)));for(const e of l){n(e,t,r)?(s=e,o||(o=e)):(s&&i.push([o,s]),s=null,o=null)}o&&i.push([o,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},1559:(e,t,r)=>{"use strict";const n=r(2728),a=r(6484),i=r(9534),o=r(410),s=r(9618),l=r(5991),u=r(8968),c=r(2969),d=r(7278),p=r(8992),m=r(1180),f=r(6339),h=r(3731),g=r(5566),v=r(6264),b=r(4693),y=r(6879),E=r(6657),O=r(959),S=r(7574),w=r(5161),I=r(6175),A=r(6877),P=r(3039),T=r(1178),R=r(7685),N=r(7192),$=r(1106),x=r(6293),L=r(4120),_=r(1173),C=r(4922),D=r(8752),j=r(3931),F=r(1772),k=r(4473),M=r(4129),V=r(6184),U=r(5362),q=r(7287),B=r(3910);e.exports={parse:s,valid:l,clean:u,inc:c,diff:d,major:p,minor:m,patch:f,prerelease:h,compare:g,rcompare:v,compareLoose:b,compareBuild:y,sort:E,rsort:O,gt:S,lt:w,eq:I,neq:A,gte:P,lte:T,cmp:R,coerce:N,Comparator:$,Range:x,satisfies:L,toComparators:_,maxSatisfying:C,minSatisfying:D,minVersion:j,validRange:F,outside:k,gtr:M,ltr:V,intersects:U,simplifyRange:q,subset:B,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},1564:(e,t,r)=>{"use strict";const n=r(9679);e.exports=(e,t,r)=>0===n(e,t,r)},1617:(e,t,r)=>{"use strict";const n=r(7944);e.exports=(e,t)=>new n(e,t).patch},1677:(e,t,r)=>{"use strict";const n=r(55);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},1722:(e,t,r)=>{"use strict";const n=r(8395);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},1772:(e,t,r)=>{"use strict";const n=r(6293);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},2007:e=>{"use strict";e.exports=r},2034:e=>{"use strict";const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},2077:(e,t,r)=>{"use strict";const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)>=0},2107:e=>{"use strict";const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},2192:(e,t,r)=>{"use strict";var n=r(5959),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,i={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:a,type:e,key:u,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},2313:(e,t,r)=>{"use strict";const n=r(3801),a=r(6392);e.exports=(e,t,r)=>{let i=null,o=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&1!==o.compare(e)||(i=e,o=new n(i,r)))})),i}},2362:(e,t,r)=>{"use strict";const n=r(3801),a=r(4369),{ANY:i}=a,o=r(6392),s=r(257),l=r(9573),u=r(2978),c=r(2459),d=r(9689);e.exports=(e,t,r,p)=>{let m,f,h,g,v;switch(e=new n(e,p),t=new o(t,p),r){case">":m=l,f=c,h=u,g=">",v=">=";break;case"<":m=u,f=d,h=l,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let o=null,s=null;if(n.forEach((e=>{e.semver===i&&(e=new a(">=0.0.0")),o=o||e,s=s||e,m(e.semver,o.semver,p)?o=e:h(e.semver,s.semver,p)&&(s=e)})),o.operator===g||o.operator===v)return!1;if((!s.operator||s.operator===g)&&f(e,s.semver))return!1;if(s.operator===v&&h(e,s.semver))return!1}return!0}},2381:e=>{"use strict";const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},2459:(e,t,r)=>{"use strict";const n=r(9679);e.exports=(e,t,r)=>n(e,t,r)<=0},2540:(e,t,r)=>{"use strict";e.exports=r(2192)},2553:(e,t,r)=>{"use strict";const n=r(3801);e.exports=(e,t)=>new n(e,t).major},2648:(e,t,r)=>{"use strict";const n=r(6392);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},2728:(e,t,r)=>{"use strict";const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:i}=r(6484),o=r(5906),s=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={};let p=0;const m="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[m,a]],h=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=p++;o(e,a,t),d[e]=a,u[a]=t,c[a]=n,s[a]=new RegExp(t,r?"g":void 0),l[a]=new RegExp(n,r?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),h("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${m}+`),h("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),h("FULL",`^${u[d.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),h("LOOSE",`^${u[d.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),h("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),h("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",u[d.COERCE],!0),h("COERCERTLFULL",u[d.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},2776:(e,t,r)=>{"use strict";const n=r(1564),a=r(4408),i=r(9573),o=r(9689),s=r(2978),l=r(2459);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return a(e,r,u);case">":return i(e,r,u);case">=":return o(e,r,u);case"<":return s(e,r,u);case"<=":return l(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},2801:(e,t,r)=>{"use strict";const n=r(7944);e.exports=(e,t,r)=>{const a=new n(e,r),i=new n(t,r);return a.compare(i)||a.compareBuild(i)}},2862:(e,t,r)=>{"use strict";const n=r(5380);e.exports=(e,t,r)=>n(t,e,r)},2966:(e,t,r)=>{"use strict";const n=r(7944);e.exports=(e,t)=>new n(e,t).major},2969:(e,t,r)=>{"use strict";const n=r(9534);e.exports=(e,t,r,a,i)=>{"string"==typeof r&&(i=a,a=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,a,i).version}catch(e){return null}}},2978:(e,t,r)=>{"use strict";const n=r(9679);e.exports=(e,t,r)=>n(e,t,r)<0},3039:(e,t,r)=>{"use strict";const n=r(5566);e.exports=(e,t,r)=>n(e,t,r)>=0},3241:e=>{"use strict";e.exports=n},3445:e=>{"use strict";e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},3489:(e,t,r)=>{"use strict";const n=r(7944),a=r(8395),i=r(144);e.exports=(e,t)=>{e=new a(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const a=e.set[t];let o=null;a.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":o&&!i(t,o)||(o=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!o||r&&!i(r,o)||(r=o)}return r&&e.test(r)?r:null}},3491:(e,t,r)=>{"use strict";const n=r(3801),a=r(6392);e.exports=(e,t,r)=>{let i=null,o=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&-1!==o.compare(e)||(i=e,o=new n(i,r)))})),i}},3731:(e,t,r)=>{"use strict";const n=r(9618);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},3801:(e,t,r)=>{"use strict";const n=r(2381),{MAX_LENGTH:a,MAX_SAFE_INTEGER:i}=r(2107),{safeRe:o,t:s}=r(405),l=r(2034),{compareIdentifiers:u}=r(8954);class c{constructor(e,t){if(t=l(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?o[s.LOOSE]:o[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],a=e.build[t];if(n("build compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?o[s.PRERELEASELOOSE]:o[s.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},3811:(e,t,r)=>{"use strict";const n=r(6909),a=r(7659),i=r(144),o=r(2077),s=r(599),l=r(7092);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return a(e,r,u);case">":return i(e,r,u);case">=":return o(e,r,u);case"<":return s(e,r,u);case"<=":return l(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},3822:(e,t,r)=>{"use strict";const n=r(6670);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},3910:(e,t,r)=>{"use strict";const n=r(6293),a=r(1106),{ANY:i}=a,o=r(4120),s=r(5566),l=[new a(">=0.0.0-0")],u=[new a(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=u}const n=new Set;let a,c,m,f,h,g,v;for(const t of e)">"===t.operator||">="===t.operator?a=d(a,t,r):"<"===t.operator||"<="===t.operator?c=p(c,t,r):n.add(t.semver);if(n.size>1)return null;if(a&&c){if(m=s(a.semver,c.semver,r),m>0)return null;if(0===m&&(">="!==a.operator||"<="!==c.operator))return null}for(const e of n){if(a&&!o(e,String(a),r))return null;if(c&&!o(e,String(c),r))return null;for(const n of t)if(!o(e,String(n),r))return!1;return!0}let b=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,y=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;b&&1===b.prerelease.length&&"<"===c.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,a)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(f=d(a,e,r),f===e&&f!==a)return!1}else if(">="===a.operator&&!o(a.semver,String(e),r))return!1;if(c)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(h=p(c,e,r),h===e&&h!==c)return!1}else if("<="===c.operator&&!o(c.semver,String(e),r))return!1;if(!e.operator&&(c||a)&&0!==m)return!1}return!(a&&g&&!c&&0!==m)&&(!(c&&v&&!a&&0!==m)&&(!y&&!b))},d=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let a=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(a=a||null!==t,t)continue e}if(a)return!1}return!0}},3931:(e,t,r)=>{"use strict";const n=r(9534),a=r(6293),i=r(7574);e.exports=(e,t)=>{e=new a(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const a=e.set[t];let o=null;a.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":o&&!i(t,o)||(o=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!o||r&&!i(r,o)||(r=o)}return r&&e.test(r)?r:null}},4031:e=>{"use strict";const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),a=t.test(r);return n&&a&&(e=+e,r=+r),e===r?0:n&&!a?-1:a&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},4120:(e,t,r)=>{"use strict";const n=r(6293);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},4129:(e,t,r)=>{"use strict";const n=r(4473);e.exports=(e,t,r)=>n(e,t,">",r)},4174:(e,t,r)=>{"use strict";const n=r(405),a=r(2107),i=r(3801),o=r(8954),s=r(55),l=r(6734),u=r(1677),c=r(6232),d=r(9649),p=r(2553),m=r(589),f=r(5718),h=r(6611),g=r(9679),v=r(399),b=r(5008),y=r(6670),E=r(3822),O=r(9694),S=r(9573),w=r(2978),I=r(1564),A=r(4408),P=r(9689),T=r(2459),R=r(2776),N=r(8987),$=r(4369),x=r(6392),L=r(257),_=r(2648),C=r(3491),D=r(2313),j=r(8068),F=r(463),k=r(2362),M=r(8758),V=r(8475),U=r(7371),q=r(9730),B=r(9459);e.exports={parse:s,valid:l,clean:u,inc:c,diff:d,major:p,minor:m,patch:f,prerelease:h,compare:g,rcompare:v,compareLoose:b,compareBuild:y,sort:E,rsort:O,gt:S,lt:w,eq:I,neq:A,gte:P,lte:T,cmp:R,coerce:N,Comparator:$,Range:x,satisfies:L,toComparators:_,maxSatisfying:C,minSatisfying:D,minVersion:j,validRange:F,outside:k,gtr:M,ltr:V,intersects:U,simplifyRange:q,subset:B,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},4266:(e,t,r)=>{"use strict";const n=r(5463);e.exports=(e,t,r)=>n(e,t,"<",r)},4369:(e,t,r)=>{"use strict";const n=Symbol("SemVer ANY");class a{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof a){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?o[s.COMPARATORLOOSE]:o[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=i(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=a;const i=r(2034),{safeRe:o,t:s}=r(405),l=r(2776),u=r(2381),c=r(3801),d=r(6392)},4408:(e,t,r)=>{"use strict";const n=r(9679);e.exports=(e,t,r)=>0!==n(e,t,r)},4421:(e,t,r)=>{"use strict";var n=r(7632),a=r(5803);t.parse=n.parse.bind(n),t.toString=r(6251),t.term={escape:a.escape,unescape:a.unescape},t.phrase={escape:a.escapePhrase,unescape:a.unescapePhrase}},4473:(e,t,r)=>{"use strict";const n=r(9534),a=r(1106),{ANY:i}=a,o=r(6293),s=r(4120),l=r(7574),u=r(5161),c=r(1178),d=r(3039);e.exports=(e,t,r,p)=>{let m,f,h,g,v;switch(e=new n(e,p),t=new o(t,p),r){case">":m=l,f=c,h=u,g=">",v=">=";break;case"<":m=u,f=d,h=l,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let o=null,s=null;if(n.forEach((e=>{e.semver===i&&(e=new a(">=0.0.0")),o=o||e,s=s||e,m(e.semver,o.semver,p)?o=e:h(e.semver,s.semver,p)&&(s=e)})),o.operator===g||o.operator===v)return!1;if((!s.operator||s.operator===g)&&f(e,s.semver))return!1;if(s.operator===v&&h(e,s.semver))return!1}return!0}},4693:(e,t,r)=>{"use strict";const n=r(5566);e.exports=(e,t)=>n(e,t,!0)},4922:(e,t,r)=>{"use strict";const n=r(9534),a=r(6293);e.exports=(e,t,r)=>{let i=null,o=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&-1!==o.compare(e)||(i=e,o=new n(i,r)))})),i}},4940:e=>{"use strict";e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},5008:(e,t,r)=>{"use strict";const n=r(9679);e.exports=(e,t)=>n(e,t,!0)},5161:(e,t,r)=>{"use strict";const n=r(5566);e.exports=(e,t,r)=>n(e,t,r)<0},5334:(e,t,r)=>{"use strict";const n=r(7944),a=r(5860),{safeRe:i,t:o}=r(6850);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?i[o.COERCERTLFULL]:i[o.COERCERTL];let a;for(;(a=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),n.lastIndex=a.index+a[1].length+a[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?i[o.COERCEFULL]:i[o.COERCE]);if(null===r)return null;const s=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return a(`${s}.${l}.${u}${c}${d}`,t)}},5362:(e,t,r)=>{"use strict";const n=r(6293);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},5380:(e,t,r)=>{"use strict";const n=r(7944);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},5463:(e,t,r)=>{"use strict";const n=r(7944),a=r(9524),{ANY:i}=a,o=r(8395),s=r(1722),l=r(144),u=r(599),c=r(7092),d=r(2077);e.exports=(e,t,r,p)=>{let m,f,h,g,v;switch(e=new n(e,p),t=new o(t,p),r){case">":m=l,f=c,h=u,g=">",v=">=";break;case"<":m=u,f=d,h=l,g="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let o=null,s=null;if(n.forEach((e=>{e.semver===i&&(e=new a(">=0.0.0")),o=o||e,s=s||e,m(e.semver,o.semver,p)?o=e:h(e.semver,s.semver,p)&&(s=e)})),o.operator===g||o.operator===v)return!1;if((!s.operator||s.operator===g)&&f(e,s.semver))return!1;if(s.operator===v&&h(e,s.semver))return!1}return!0}},5566:(e,t,r)=>{"use strict";const n=r(9534);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},5718:(e,t,r)=>{"use strict";const n=r(3801);e.exports=(e,t)=>new n(e,t).patch},5803:(e,t)=>{function r(e){return"\\"+e}function n(e,t){return t}t.escape=function(e){return e.replace(/[\+\-\!\(\)\{\}\[\]\^\"\?\:\\\&\|\'\/\s\*\~]/g,r)},t.unescape=function(e){return e.replace(/\\([\+\-\!\(\)\{\}\[\]\^\"\?\:\\\&\|\'\/\s\*\~])/g,n)},t.escapePhrase=function(e){return e.replace(/"/g,r)},t.unescapePhrase=function(e){return e.replace(/\\(")/g,n)}},5860:(e,t,r)=>{"use strict";const n=r(7944);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},5906:e=>{"use strict";const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},5955:(e,t,r)=>{"use strict";const n=r(7944);e.exports=(e,t,r,a,i)=>{"string"==typeof r&&(i=a,a=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,a,i).version}catch(e){return null}}},5959:e=>{"use strict";e.exports=a},5968:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AD:()=>I,AD_PARAMETERS:()=>Me,ALLNUM:()=>Ge,ALL_FUNCTIONS:()=>lr,ALL_KEYWORDS:()=>Kt,AND:()=>tt,APPEND:()=>We,APPENDCOL:()=>x,ARGUMENT_KEYWORDS:()=>Gt,ARITHMETIC_OPERATORS:()=>mr,AS:()=>ae,AUTO:()=>Oe,BETWEEN:()=>oe,BOOLEAN_LITERALS:()=>Wt,BY:()=>ie,CASE:()=>Xe,COMMAND_ASSIST_KEYWORDS:()=>Ht,COMPARISON_KEYWORDS:()=>Bt,COMPARISON_OPERATORS:()=>fr,CONDITION_FUNCTIONS:()=>tr,CONSECUTIVE:()=>Ue,CONVERT_TZ:()=>ot,COST:()=>be,COUNTFIELD:()=>ze,D:()=>ce,DATASOURCES:()=>pe,DATETIME:()=>st,DATETIME_KEYWORDS:()=>Ut,DATE_TIME_FUNCTIONS:()=>Qt,DAY:()=>lt,DAY_HOUR:()=>ut,DAY_MICROSECOND:()=>ct,DAY_MINUTE:()=>dt,DAY_OF_YEAR:()=>pt,DAY_SECOND:()=>mt,DEDUP:()=>m,DEDUP_PARAMETERS:()=>kt,DEDUP_SPLITVALUES:()=>qe,DELIM:()=>He,DESC:()=>de,DESCRIBE:()=>i,ELSE:()=>Je,EVAL:()=>h,EVAL_FUNCTIONS:()=>ar,EVENTSTATS:()=>p,EXISTS:()=>Ze,EXPAND:()=>T,EXPLAIN:()=>$,EXTENDED:()=>ye,FALSE:()=>at,FIELDS:()=>l,FIELD_OPERATORS:()=>pr,FILLNULL:()=>P,FILLNULL_PARAMETERS:()=>he,FLATTEN:()=>R,FREQUENCY_THRESHOLD_PERCENTAGE:()=>V,FROM:()=>se,GROK:()=>E,HEAD:()=>g,HOUR:()=>ft,HOUR_MICROSECOND:()=>ht,HOUR_MINUTE:()=>gt,HOUR_OF_DAY:()=>vt,HOUR_SECOND:()=>bt,IN:()=>Ye,INDEX:()=>ue,INTERVAL:()=>yt,JOIN:()=>u,JOIN_METHODS:()=>ne,JOIN_TYPE:()=>re,KEEP_EMPTY:()=>Ve,KMEANS:()=>S,KMEANS_PARAMETERS:()=>Te,LEFT:()=>Q,LEFT_HINT:()=>ee,LOGICAL_EXPRESSION_OPERATORS:()=>hr,LOGICAL_KEYWORDS:()=>qt,LOOKUP:()=>w,METHOD:()=>k,MICROSECOND:()=>Et,MILLISECOND:()=>Ot,MINUS:()=>cr,MINUTE:()=>St,MINUTE_MICROSECOND:()=>wt,MINUTE_OF_DAY:()=>It,MINUTE_OF_HOUR:()=>At,MINUTE_SECOND:()=>Pt,ML:()=>A,MODE:()=>M,MONTH:()=>Tt,MONTH_OF_YEAR:()=>Rt,NEW_FIELD:()=>j,NOT:()=>dr,NUM:()=>we,ON:()=>z,OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID:()=>n,OR:()=>et,OVERRIDE:()=>Ee,PARAMETERS_WITH_BOOLEAN_VALUES:()=>Mt,PARSE:()=>y,PARTITIONS:()=>Be,PATTERN:()=>F,PATTERNS:()=>O,PATTERNS_PARAMETERS:()=>G,PATTERNS_PARAMETER_LITERAL:()=>K,PATTERN_METHODS:()=>H,PATTERN_MODES:()=>W,PLUS:()=>ur,POSITION:()=>Zt,PPL_COMMANDS:()=>_,PPL_FUNCTIONS:()=>nr,PPL_OPERATORS:()=>gr,PUNCT:()=>D,QUARTER:()=>Nt,RARE:()=>b,REGEX:()=>C,REGEXP:()=>it,RELEVANCE_FUNCTIONS:()=>Yt,RELEVANCE_PARAMETERS:()=>Vt,RENAME:()=>c,REPLACE:()=>Ke,REVERSE:()=>L,RIGHT:()=>X,RIGHT_HINT:()=>te,SCALAR_FUNCTIONS:()=>ir,SEARCH:()=>a,SECOND:()=>$t,SECOND_MICROSECOND:()=>xt,SECOND_OF_MINUTE:()=>Lt,SHOW:()=>o,SHOWCOUNT:()=>Qe,SIMPLE:()=>ge,SMA:()=>Ie,SORT:()=>f,SORT_FIELD_FUNCTIONS:()=>rr,SOURCE:()=>le,SPAN:()=>Jt,STANDARD:()=>ve,STATS:()=>d,STATS_FUNCTIONS:()=>or,STATS_PARAMETERS:()=>Ft,STR:()=>Se,TAKE:()=>er,TEXT_FUNCTIONS:()=>Xt,TOP:()=>v,TRENDLINE:()=>N,TRENDLINE_TYPE:()=>Pe,TRIGONOMETRIC_FUNCTIONS:()=>zt,TRUE:()=>nt,USING:()=>me,VARIABLE_COUNT_THRESHOLD:()=>U,WEEK:()=>_t,WEEK_OF_YEAR:()=>Ct,WHERE:()=>s,WINDOW_STATS_FUNCTIONS:()=>sr,WITH:()=>fe,WMA:()=>Ae,XOR:()=>rt,YEAR:()=>Dt,YEAR_MONTH:()=>jt,conf:()=>br,language:()=>vr});const n="opensearch-ppl",a="search",i="describe",o="show",s="where",l="fields",u="join",c="rename",d="stats",p="eventstats",m="dedup",f="sort",h="eval",g="head",v="top",b="rare",y="parse",E="grok",O="patterns",S="kmeans",w="lookup",I="ad",A="ml",P="fillnull",T="expand",R="flatten",N="trendline",$="explain",x="appendcol",L="reverse",_=[a,i,o,s,l,u,c,d,p,m,f,h,g,v,b,y,E,O,S,w,I,A,P,N,T,R,x,L],C="regex",D="punct",j="new_field",F="pattern",k="method",M="mode",V="frequency_threshold_percentage",U="variable_count_threshold",q="buffer_limit",B="max_sample_count",G=[k,M,B,q,j,U,V,F],H=["simple_pattern","brain"],W=["label","aggregation"],K=[F,j,q,B,U,V],z="on",Q="left",X="right",Y="semi",J="anti",Z="outer",ee="left_hint",te="right_hint",re=["left outer","right outer","full outer",Q,Y,J,"cross"],ne=[Z,Y,J],ae="as",ie="by",oe="between",se="from",le="source",ue="index",ce="d",de="desc",pe="datasources",me="using",fe="with",he=[fe,me],ge="simple",ve="standard",be="cost",ye="extended",Ee="override",Oe="auto",Se="str",we="num",Ie="sma",Ae="wma",Pe=[Ie,Ae],Te=["centroids","iterations","distance_type"],Re="number_of_trees",Ne="shingle_size",$e="sample_size",xe="output_after",Le="time_decay",_e="anomaly_rate",Ce="category_field",De="time_field",je="time_zone",Fe="training_data_size",ke="anomaly_score_threshold",Me=[Re,Ne,$e,xe,Le,_e,Ce,De,je,Fe,ke],Ve="keepempty",Ue="consecutive",qe="dedup_splitvalues",Be="partitions",Ge="allnum",He="delim",We="append",Ke="replace",ze="countfield",Qe="showcount",Xe="case",Ye="in",Je="else",Ze="exists",et="or",tt="and",rt="xor",nt="true",at="false",it="regexp",ot="convert_tz",st="datetime",lt="day",ut="day_hour",ct="day_microsecond",dt="day_minute",pt="day_of_year",mt="day_second",ft="hour",ht="hour_microsecond",gt="hour_minute",vt="hour_of_day",bt="hour_second",yt="interval",Et="microsecond",Ot="millisecond",St="minute",wt="minute_microsecond",It="minute_of_day",At="minute_of_hour",Pt="minute_second",Tt="month",Rt="month_of_year",Nt="quarter",$t="second",xt="second_microsecond",Lt="second_of_minute",_t="week",Ct="week_of_year",Dt="year",jt="year_month",Ft=[Be,Ge,He,qe],kt=[Ve,Ue],Mt=[Ge,qe,Ve,Ue],Vt=["allow_leading_wildcard","analyze_wildcard","analyzer","auto_generate_synonyms_phrase_query","boost","cutoff_frequency","default_field","default_operator","enable_position_increments","escape","flags","fuzzy_max_expansions","fuzzy_prefix_length","fuzzy_transpositions","fuzzy_rewrite","fuzziness","lenient","low_freq_operator","max_determinized_states","max_expansions","minimum_should_match","operator","phrase_slop","prefix_length","quote_analyzer","quote_field_suffix","rewrite","slop","tie_breaker","type","zero_terms_query"],Ut=[ot,st,lt,ut,ct,dt,pt,mt,ft,ht,gt,vt,bt,yt,Et,Ot,St,wt,It,At,Pt,Tt,Rt,Nt,$t,xt,Lt,_t,Ct,Dt,jt],qt=[et,tt,rt,nt,at,it],Bt=[Xe,Ye],Gt=[Ve,Ue,qe,Be,Ge,He,Re,Ne,$e,xe,Le,_e,Ce,De,je,Fe,ke,...Te],Ht=[ie,oe,se,le,ue,de,pe],Wt=["true","false"],Kt=[ae,ie,Ye,oe,se,...Ft,...kt,...Wt,...Vt,...Ut,...qt,...Bt,...Gt,...Ht,...Mt,...re,...G,...H,...W,...Te,...Me,...he,ee,te,Z,We],zt=["acos","asin","atan","atan2","cos","cot","degrees","radians","sin","tan"],Qt=["adddate","addtime","curdate","current_date","current_time","current_timestamp","curtime","date","datediff","date_add","date_format","date_sub","dayname","dayofmonth","dayofweek","dayofyear","day_of_month","day_of_week","duration","extract","from_days","from_unixtime","get_format","last_day","localtime","localtimestamp","makedate","maketime","monthname","now","period_add","period_diff","sec_to_time","str_to_date","subdate","subtime","sysdate","time","timediff","timestamp","timestampadd","timestampdiff","time_format","time_to_sec","to_days","to_seconds","unix_timestamp","utc_date","utc_time","utc_timestamp","weekday","yearweek"],Xt=["substr","substring","ltrim","rtrim","trim","to","lower","upper","concat","concat_ws","length","strcmp","right","left","ascii","locate","replace","reverse","cast"],Yt=["match","match_phrase","match_phrase_prefix","match_bool_prefix","simple_query_string","multi_match","query_string"],Jt="span",Zt="position",er="take",tr=["like","isnull","isnotnull","cidrmatch","ispresent","isempty","isblank"],rr=["auto","str","ip","num"],nr=[...zt,...Qt,...Xt,"abs","cbrt","ceil","ceiling","conv","crc32","e","exp","floor","ln","log","log10","log2","mod","pi","pow","sign","position","power","rand","round","sqrt","truncate",...zt,...Yt],ar=[...nr,"array","array_length","forall","exists","filter","transform","reduce","json_valid","json","json_object","json_array","json_array_length","json_extract","json_keys","json_set","json_delete","json_append","json_extend","md5","sha1","sha2","ifnull","nullif","if","typeof","coalesce",Zt,"geoip","typeof"],ir=["row_number","rank","dense_rank","percent_rank","cume_dist","first","last","nth","ntile"],or=["avg","count","sum","min","max","stddev_samp","var_samp","var_pop","stddev_pop","percentile","percentile_approx","distinct_count","distinct_count_approx","earliest","latest"],sr=[...or,...ir],lr=[...nr,...or,...tr,...rr,...ir,...ar,Jt],ur="+",cr="-",dr="not",pr=[ur,cr],mr=[ur,cr,"*","/","%"],fr=[">",">=","<","!=","<=","="],hr=["and","or","xor",dr],gr=[...mr,...hr,...fr,"~","&","^"],vr={defaultToken:"",id:n,ignoreCase:!0,commands:_,operators:gr,keywords:Kt,builtinFunctions:lr,brackets:[{open:"(",close:")",token:"delimiter.parenthesis"}],tokenizer:{root:[{include:"@comments"},{include:"@regexes"},{include:"@whitespace"},{include:"@variables"},{include:"@strings"},{include:"@numbers"},[/[,.:]/,"delimiter"],[/\|/,"delimiter.pipe"],[/[()\[\]]/,"delimiter.parenthesis"],[/[\w@#$]+/,{cases:{"@commands":"keyword.command","@keywords":"keyword","@builtinFunctions":"predefined","@operators":"operator","@default":"identifier"}}],[/[+\-*/^%=!<>]/,"operator"],[/[,.:]/,"operator"]],variables:[[/\${/,{token:"variable",next:"@variable_bracket"}],[/\$[a-zA-Z0-9-_]+/,"variable"]],variable_bracket:[[/[a-zA-Z0-9-_:]+/,"variable"],[/}/,{token:"variable",next:"@pop"}]],whitespace:[[/\s+/,"white"]],comments:[[/^#.*/,"comment"],[/\s+#.*/,"comment"]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/'/,{token:"string",next:"@string"}],[/"/,{token:"string",next:"@string_double"}],[/`/,{token:"string.backtick",next:"@string_backtick"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],string_double:[[/[^\\"]+/,"string"],[/"/,"string","@pop"]],string_backtick:[[/[^\\`]+/,"string.backtick"],[/`/,"string.backtick","@pop"]],regexes:[[/\/.*?\/(?!\s*\d)/,"regexp"]]}},br={brackets:[["(",")"]],autoClosingPairs:[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]}},5986:(e,t,r)=>{"use strict";const n=r(7944);e.exports=(e,t)=>new n(e,t).minor},5991:(e,t,r)=>{"use strict";const n=r(9618);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},6033:(e,t,r)=>{"use strict";const n=r(2801);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},6089:e=>{"use strict";e.exports=i},6175:(e,t,r)=>{"use strict";const n=r(5566);e.exports=(e,t,r)=>0===n(e,t,r)},6184:(e,t,r)=>{"use strict";const n=r(4473);e.exports=(e,t,r)=>n(e,t,"<",r)},6232:(e,t,r)=>{"use strict";const n=r(3801);e.exports=(e,t,r,a,i)=>{"string"==typeof r&&(i=a,a=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,a,i).version}catch(e){return null}}},6251:e=>{"use strict";var t="<implicit>";e.exports=function e(r){if(!r)return"";var n="";return null!=r.start&&(n+=(r.parenthesized?"(":"")+r.start+" "),r.field&&r.field!==t&&(n+=r.field+":"),r.left&&(r.parenthesized&&!r.start&&(n+="("),n+=e(r.left),r.parenthesized&&!r.right&&(n+=")")),r.operator&&(r.left&&(n+=" "),r.operator!==t&&(n+=r.operator)),r.right&&(r.operator&&r.operator!==t&&(n+=" "),n+=e(r.right),r.parenthesized&&(n+=")")),(r.term||""===r.term&&r.quoted)&&(r.prefix&&(n+=r.prefix),r.quoted?(n+='"',n+=r.term,n+='"'):r.regex?(n+="/",n+=r.term,n+="/"):n+=r.term,null!=r.proximity&&(n+="~"+r.proximity),null!=r.boost&&(n+="^"+r.boost)),r.term_min&&("both"===r.inclusive||"left"===r.inclusive?n+="[":n+="{",n+=r.term_min,n+=" TO ",n+=r.term_max,"both"===r.inclusive||"right"===r.inclusive?n+="]":n+="}"),r.similarity&&(n+="~",.5!==r.similarity&&(n+=r.similarity)),n}},6264:(e,t,r)=>{"use strict";const n=r(5566);e.exports=(e,t,r)=>n(t,e,r)},6293:(e,t,r)=>{"use strict";const n=/\s+/g;class a{constructor(e,t){if(t=o(t),e instanceof a)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new a(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&b(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,a=n?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(a,$(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],p),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],m),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],f),l("caret trim",e);let o=e.split(" ").map((e=>E(e,this.options))).join(" ").split(/\s+/).map((e=>N(e,this.options)));n&&(o=o.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",o);const u=new Map,b=o.map((e=>new s(e,this.options)));for(const e of b){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const y=[...u.values()];return i.set(t,y),y}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=a;const i=new(r(4940)),o=r(8029),s=r(1106),l=r(5906),u=r(9534),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:m,caretTrimReplace:f}=r(2728),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=r(6484),v=e=>"<0.0.0-0"===e.value,b=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let a=n.pop();for(;r&&n.length;)r=n.every((e=>a.intersects(e,t))),a=n.pop();return r},E=(e,t)=>(e=e.replace(c[d.BUILD],""),l("comp",e,t),e=I(e,t),l("caret",e),e=S(e,t),l("tildes",e),e=P(e,t),l("xrange",e),e=R(e,t),l("stars",e),e),O=e=>!e||"x"===e.toLowerCase()||"*"===e,S=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{const r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,((t,r,n,a,i)=>{let o;return l("tilde",e,t,r,n,a,i),O(r)?o="":O(n)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:O(a)?o=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(l("replaceTilde pr",i),o=`>=${r}.${n}.${a}-${i} <${r}.${+n+1}.0-0`):o=`>=${r}.${n}.${a} <${r}.${+n+1}.0-0`,l("tilde return",o),o}))},I=(e,t)=>e.trim().split(/\s+/).map((e=>A(e,t))).join(" "),A=(e,t)=>{l("caret",e,t);const r=t.loose?c[d.CARETLOOSE]:c[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,a,i,o)=>{let s;return l("caret",e,t,r,a,i,o),O(r)?s="":O(a)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:O(i)?s="0"===r?`>=${r}.${a}.0${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${n} <${+r+1}.0.0-0`:o?(l("replaceCaret pr",o),s="0"===r?"0"===a?`>=${r}.${a}.${i}-${o} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}-${o} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i}-${o} <${+r+1}.0.0-0`):(l("no pr"),s="0"===r?"0"===a?`>=${r}.${a}.${i}${n} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i} <${+r+1}.0.0-0`),l("caret return",s),s}))},P=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>T(e,t))).join(" ")),T=(e,t)=>{e=e.trim();const r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,((r,n,a,i,o,s)=>{l("xRange",e,r,n,a,i,o,s);const u=O(a),c=u||O(i),d=c||O(o),p=d;return"="===n&&p&&(n=""),s=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(i=0),o=0,">"===n?(n=">=",c?(a=+a+1,i=0,o=0):(i=+i+1,o=0)):"<="===n&&(n="<",c?a=+a+1:i=+i+1),"<"===n&&(s="-0"),r=`${n+a}.${i}.${o}${s}`):c?r=`>=${a}.0.0${s} <${+a+1}.0.0-0`:d&&(r=`>=${a}.${i}.0${s} <${a}.${+i+1}.0-0`),l("xRange return",r),r}))},R=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),N=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),$=e=>(t,r,n,a,i,o,s,l,u,c,d,p)=>`${r=O(n)?"":O(a)?`>=${n}.0.0${e?"-0":""}`:O(i)?`>=${n}.${a}.0${e?"-0":""}`:o?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=O(u)?"":O(c)?`<${+u+1}.0.0-0`:O(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),x=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},6339:(e,t,r)=>{"use strict";const n=r(9534);e.exports=(e,t)=>new n(e,t).patch},6392:(e,t,r)=>{"use strict";const n=/\s+/g;class a{constructor(e,t){if(t=o(t),e instanceof a)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new a(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&b(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,a=n?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(a,$(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],p),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],m),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],f),l("caret trim",e);let o=e.split(" ").map((e=>E(e,this.options))).join(" ").split(/\s+/).map((e=>N(e,this.options)));n&&(o=o.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",o);const u=new Map,b=o.map((e=>new s(e,this.options)));for(const e of b){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const y=[...u.values()];return i.set(t,y),y}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=a;const i=new(r(3445)),o=r(2034),s=r(4369),l=r(2381),u=r(3801),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:m,caretTrimReplace:f}=r(405),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=r(2107),v=e=>"<0.0.0-0"===e.value,b=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let a=n.pop();for(;r&&n.length;)r=n.every((e=>a.intersects(e,t))),a=n.pop();return r},E=(e,t)=>(e=e.replace(c[d.BUILD],""),l("comp",e,t),e=I(e,t),l("caret",e),e=S(e,t),l("tildes",e),e=P(e,t),l("xrange",e),e=R(e,t),l("stars",e),e),O=e=>!e||"x"===e.toLowerCase()||"*"===e,S=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{const r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,((t,r,n,a,i)=>{let o;return l("tilde",e,t,r,n,a,i),O(r)?o="":O(n)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:O(a)?o=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(l("replaceTilde pr",i),o=`>=${r}.${n}.${a}-${i} <${r}.${+n+1}.0-0`):o=`>=${r}.${n}.${a} <${r}.${+n+1}.0-0`,l("tilde return",o),o}))},I=(e,t)=>e.trim().split(/\s+/).map((e=>A(e,t))).join(" "),A=(e,t)=>{l("caret",e,t);const r=t.loose?c[d.CARETLOOSE]:c[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,a,i,o)=>{let s;return l("caret",e,t,r,a,i,o),O(r)?s="":O(a)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:O(i)?s="0"===r?`>=${r}.${a}.0${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${n} <${+r+1}.0.0-0`:o?(l("replaceCaret pr",o),s="0"===r?"0"===a?`>=${r}.${a}.${i}-${o} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}-${o} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i}-${o} <${+r+1}.0.0-0`):(l("no pr"),s="0"===r?"0"===a?`>=${r}.${a}.${i}${n} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i} <${+r+1}.0.0-0`),l("caret return",s),s}))},P=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>T(e,t))).join(" ")),T=(e,t)=>{e=e.trim();const r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,((r,n,a,i,o,s)=>{l("xRange",e,r,n,a,i,o,s);const u=O(a),c=u||O(i),d=c||O(o),p=d;return"="===n&&p&&(n=""),s=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(i=0),o=0,">"===n?(n=">=",c?(a=+a+1,i=0,o=0):(i=+i+1,o=0)):"<="===n&&(n="<",c?a=+a+1:i=+i+1),"<"===n&&(s="-0"),r=`${n+a}.${i}.${o}${s}`):c?r=`>=${a}.0.0${s} <${+a+1}.0.0-0`:d&&(r=`>=${a}.${i}.0${s} <${a}.${+i+1}.0-0`),l("xRange return",r),r}))},R=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),N=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),$=e=>(t,r,n,a,i,o,s,l,u,c,d,p)=>`${r=O(n)?"":O(a)?`>=${n}.0.0${e?"-0":""}`:O(i)?`>=${n}.${a}.0${e?"-0":""}`:o?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=O(u)?"":O(c)?`<${+u+1}.0.0-0`:O(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),x=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},6484:e=>{"use strict";const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},6611:(e,t,r)=>{"use strict";const n=r(55);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},6657:(e,t,r)=>{"use strict";const n=r(6879);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},6670:(e,t,r)=>{"use strict";const n=r(3801);e.exports=(e,t,r)=>{const a=new n(e,r),i=new n(t,r);return a.compare(i)||a.compareBuild(i)}},6734:(e,t,r)=>{"use strict";const n=r(55);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},6850:(e,t,r)=>{"use strict";const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:i}=r(9630),o=r(9796),s=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={};let p=0;const m="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[m,a]],h=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=p++;o(e,a,t),d[e]=a,u[a]=t,c[a]=n,s[a]=new RegExp(t,r?"g":void 0),l[a]=new RegExp(n,r?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),h("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${m}+`),h("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),h("FULL",`^${u[d.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),h("LOOSE",`^${u[d.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),h("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),h("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",u[d.COERCE],!0),h("COERCERTLFULL",u[d.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},6877:(e,t,r)=>{"use strict";const n=r(5566);e.exports=(e,t,r)=>0!==n(e,t,r)},6879:(e,t,r)=>{"use strict";const n=r(9534);e.exports=(e,t,r)=>{const a=new n(e,r),i=new n(t,r);return a.compare(i)||a.compareBuild(i)}},6909:(e,t,r)=>{"use strict";const n=r(5380);e.exports=(e,t,r)=>0===n(e,t,r)},7023:(e,t,r)=>{"use strict";const n=r(5380);e.exports=(e,t)=>n(e,t,!0)},7092:(e,t,r)=>{"use strict";const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)<=0},7095:e=>{"use strict";const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},7192:(e,t,r)=>{"use strict";const n=r(9534),a=r(9618),{safeRe:i,t:o}=r(2728);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?i[o.COERCERTLFULL]:i[o.COERCERTL];let a;for(;(a=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),n.lastIndex=a.index+a[1].length+a[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?i[o.COERCEFULL]:i[o.COERCE]);if(null===r)return null;const s=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return a(`${s}.${l}.${u}${c}${d}`,t)}},7278:(e,t,r)=>{"use strict";const n=r(9618);e.exports=(e,t)=>{const r=n(e,null,!0),a=n(t,null,!0),i=r.compare(a);if(0===i)return null;const o=i>0,s=o?r:a,l=o?a:r,u=!!s.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(s))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"}},7287:(e,t,r)=>{"use strict";const n=r(4120),a=r(5566);e.exports=(e,t,r)=>{const i=[];let o=null,s=null;const l=e.sort(((e,t)=>a(e,t,r)));for(const e of l){n(e,t,r)?(s=e,o||(o=e)):(s&&i.push([o,s]),s=null,o=null)}o&&i.push([o,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},7371:(e,t,r)=>{"use strict";const n=r(6392);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},7494:(e,t,r)=>{"use strict";const n=r(8395);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},7574:(e,t,r)=>{"use strict";const n=r(5566);e.exports=(e,t,r)=>n(e,t,r)>0},7632:e=>{"use strict";function t(e,r,n,a){this.message=e,this.expected=r,this.found=n,this.location=a,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(t,Error),t.buildMessage=function(e,t){var r={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}return"Expected "+function(e){var t,n,a,i=new Array(e.length);for(t=0;t<e.length;t++)i[t]=(a=e[t],r[a.type](a));if(i.sort(),i.length>0){for(t=1,n=1;t<i.length;t++)i[t-1]!==i[t]&&(i[n]=i[t],n++);i.length=n}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:t,parse:function(e,r){r=void 0!==r?r:{};var n,a={},i={start:bt},o=bt,s=function(e){return e[0]},l=function(){return{}},u=function(e){return{operator:e}},c=function(e,t,r,n){var a={start:e,left:t};return null!=(n=0==n.length?null:null==n[0].right?n[0].left:n[0])&&(a.operator=""==r?"<implicit>":r[0],a.right=n),a},d=function(e,t){return t},p=function(e,t,r){var n={left:e};return null!=(r=0==r.length?null:null==r[0].right?r[0].left:r[0])&&(n.operator=""==t?"<implicit>":t[0],n.right=r),n},m=function(e){return e},f="(",h=dt("(",!1),g=")",v=dt(")",!1),b=function(e){return e[0].parenthesized=!0,e[0]},y=function(e,t){return t.field=null==e||""==e.label?"<implicit>":e.label,t.fieldLocation=null==e||""==e.label?null:e.location,t},E=function(e,t){return t.field=e.label,t.fieldLocation=e.location,t},O=function(e,t){var r={field:null==e||""==e.label?"<implicit>":e.label,fieldLocation:null==e||""==e.label?null:e.location};for(var n in t)r[n]=t[n];return r},S=/^[:]/,w=pt([":"],!1,!1),I=function(e){return{label:e.label,location:e.location}},A=function(e,t,r,n){var a={term:t,quoted:!0,regex:!1,termLocation:ct()};return""!=r&&(a.proximity=r),""!=n&&(a.boost=n),""!=e&&(a.prefix=e),a},P=function(e,t){return{term:t,quoted:!1,regex:!0,termLocation:ct()}},T=function(e,t,r,n){var a={term:t.label,quoted:!1,regex:!1,termLocation:ct()};return""!=r&&(a.similarity=r),""!=n&&(a.boost=n),""!=e&&(a.prefix=e),a},R="\\",N=dt("\\",!1),$=function(e){return"\\"+e},x=".",L=dt(".",!1),_=/^[^ \t\r\n\f{}()"\/\^~[\]]/,C=pt([" ","\t","\r","\n","\f","{","}","(",")",'"',"/","^","~","[","]"],!0,!1),D=function(e){return e.join("")},j=function(e){return{label:e.join(""),location:ct()}},F=/^[^: \t\r\n\f{}()"\/\^~[\]]/,k=pt([":"," ","\t","\r","\n","\f","{","}","(",")",'"',"/","^","~","[","]"],!0,!1),M='"',V=dt('"',!1),U=function(e){return e.join("")},q="/",B=dt("/",!1),G=function(e){return e.join("")},H={type:"any"},W=function(e){return e},K="+",z=dt("+",!1),Q="-",X=dt("-",!1),Y="!",J=dt("!",!1),Z="{",ee=dt("{",!1),te="}",re=dt("}",!1),ne="[",ae=dt("[",!1),ie="]",oe=dt("]",!1),se="^",le=dt("^",!1),ue="?",ce=dt("?",!1),de=":",pe=dt(":",!1),me="&",fe=dt("&",!1),he="|",ge=dt("|",!1),ve="'",be=dt("'",!1),ye="~",Ee=dt("~",!1),Oe="*",Se=dt("*",!1),we=" ",Ie=dt(" ",!1),Ae=function(e){return e},Pe=function(e){return e},Te=function(e){return""==e||null==e?.5:e},Re="0.",Ne=dt("0.",!1),$e=/^[0-9]/,xe=pt([["0","9"]],!1,!1),Le=function(e){return parseFloat("0."+e.join(""))},_e=function(e){return parseInt(e.join(""))},Ce="TO",De=dt("TO",!1),je=function(e,t){return{term_min:e,term_max:t,inclusive:"both"}},Fe=function(e,t){return{term_min:e,term_max:t,inclusive:"none"}},ke=function(e,t){return{term_min:e,term_max:t,inclusive:"left"}},Me=function(e,t){return{term_min:e,term_max:t,inclusive:"right"}},Ve=function(e){return e},Ue="OR NOT",qe=dt("OR NOT",!1),Be="AND NOT",Ge=dt("AND NOT",!1),He="OR",We=dt("OR",!1),Ke="AND",ze=dt("AND",!1),Qe="NOT",Xe=dt("NOT",!1),Ye="||",Je=dt("||",!1),Ze="&&",et=dt("&&",!1),tt=mt("whitespace"),rt=/^[ \t\r\n\f]/,nt=pt([" ","\t","\r","\n","\f"],!1,!1),at=0,it=0,ot=[{line:1,column:1}],st=0,lt=[],ut=0;if("startRule"in r){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=i[r.startRule]}function ct(){return ht(it,at)}function dt(e,t){return{type:"literal",text:e,ignoreCase:t}}function pt(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function mt(e){return{type:"other",description:e}}function ft(t){var r,n=ot[t];if(n)return n;for(r=t-1;!ot[r];)r--;for(n={line:(n=ot[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return ot[t]=n,n}function ht(e,t){var r=ft(e),n=ft(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function gt(e){at<st||(at>st&&(st=at,lt=[]),lt.push(e))}function vt(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function bt(){var e,t,r,n;for(e=at,t=[],r=jt();r!==a;)t.push(r),r=jt();if(t!==a){if(r=[],(n=yt())!==a)for(;n!==a;)r.push(n),n=yt();else r=a;r!==a?(it=e,e=t=s(r)):(at=e,e=a)}else at=e,e=a;if(e===a){for(e=at,t=[],r=jt();r!==a;)t.push(r),r=jt();t!==a&&(it=e,t=l()),(e=t)===a&&(e=at,(t=Ft())!==a&&(it=e,t=l()),e=t)}return e}function yt(){var e,t,r,n,i,o;if(e=at,(t=_t())!==a&&(r=Ft())!==a?(it=e,e=t=u(t)):(at=e,e=a),e===a){if(e=at,(t=_t())!==a)if((r=Et())!==a){for(n=[],i=_t();i!==a;)n.push(i),i=_t();if(n!==a){for(i=[],o=yt();o!==a;)i.push(o),o=yt();i!==a?(it=e,e=t=c(t,r,n,i)):(at=e,e=a)}else at=e,e=a}else at=e,e=a;else at=e,e=a;if(e===a&&(e=at,(t=_t())!==a&&(r=yt())!==a?(it=e,e=t=d(t,r)):(at=e,e=a),e===a))if(e=at,(t=Et())!==a){for(r=[],n=_t();n!==a;)r.push(n),n=_t();if(r!==a){for(n=[],i=yt();i!==a;)n.push(i),i=yt();n!==a?(it=e,e=t=p(t,r,n)):(at=e,e=a)}else at=e,e=a}else at=e,e=a}return e}function Et(){var t,r,n,i;if(t=at,r=function(){var t,r,n;t=at,r=St(),r===a&&(r=null);r!==a?(n=function(){var t,r,n,i,o,s,l,u;t=at,91===e.charCodeAt(at)?(r=ne,at++):(r=a,0===ut&&gt(ae));if(r!==a)if((n=It())!==a){for(i=[],o=jt();o!==a;)i.push(o),o=jt();if(i!==a)if(e.substr(at,2)===Ce?(o=Ce,at+=2):(o=a,0===ut&&gt(De)),o!==a){if(s=[],(l=jt())!==a)for(;l!==a;)s.push(l),l=jt();else s=a;s!==a&&(l=It())!==a?(93===e.charCodeAt(at)?(u=ie,at++):(u=a,0===ut&&gt(oe)),u!==a?(it=t,t=r=je(n,l)):(at=t,t=a)):(at=t,t=a)}else at=t,t=a;else at=t,t=a}else at=t,t=a;else at=t,t=a;if(t===a){if(t=at,123===e.charCodeAt(at)?(r=Z,at++):(r=a,0===ut&&gt(ee)),r!==a)if((n=It())!==a){for(i=[],o=jt();o!==a;)i.push(o),o=jt();if(i!==a)if(e.substr(at,2)===Ce?(o=Ce,at+=2):(o=a,0===ut&&gt(De)),o!==a){if(s=[],(l=jt())!==a)for(;l!==a;)s.push(l),l=jt();else s=a;s!==a&&(l=It())!==a?(125===e.charCodeAt(at)?(u=te,at++):(u=a,0===ut&&gt(re)),u!==a?(it=t,t=r=Fe(n,l)):(at=t,t=a)):(at=t,t=a)}else at=t,t=a;else at=t,t=a}else at=t,t=a;else at=t,t=a;if(t===a){if(t=at,91===e.charCodeAt(at)?(r=ne,at++):(r=a,0===ut&&gt(ae)),r!==a)if((n=It())!==a){for(i=[],o=jt();o!==a;)i.push(o),o=jt();if(i!==a)if(e.substr(at,2)===Ce?(o=Ce,at+=2):(o=a,0===ut&&gt(De)),o!==a){if(s=[],(l=jt())!==a)for(;l!==a;)s.push(l),l=jt();else s=a;s!==a&&(l=It())!==a?(125===e.charCodeAt(at)?(u=te,at++):(u=a,0===ut&&gt(re)),u!==a?(it=t,t=r=ke(n,l)):(at=t,t=a)):(at=t,t=a)}else at=t,t=a;else at=t,t=a}else at=t,t=a;else at=t,t=a;if(t===a)if(t=at,123===e.charCodeAt(at)?(r=Z,at++):(r=a,0===ut&&gt(ee)),r!==a)if((n=It())!==a){for(i=[],o=jt();o!==a;)i.push(o),o=jt();if(i!==a)if(e.substr(at,2)===Ce?(o=Ce,at+=2):(o=a,0===ut&&gt(De)),o!==a){if(s=[],(l=jt())!==a)for(;l!==a;)s.push(l),l=jt();else s=a;s!==a&&(l=It())!==a?(93===e.charCodeAt(at)?(u=ie,at++):(u=a,0===ut&&gt(oe)),u!==a?(it=t,t=r=Me(n,l)):(at=t,t=a)):(at=t,t=a)}else at=t,t=a;else at=t,t=a}else at=t,t=a;else at=t,t=a}}return t}(),n!==a?(it=t,t=r=y(r,n)):(at=t,t=a)):(at=t,t=a);t===a&&(t=at,(r=St())!==a&&(n=Ot())!==a?(it=t,t=r=E(r,n)):(at=t,t=a),t===a&&(t=at,(r=St())===a&&(r=null),r!==a?(n=function(){var t,r,n,i,o,s,l;t=at,r=Dt(),r===a&&(r=null);if(r!==a)if(n=function(){var t,r,n,i;t=at,34===e.charCodeAt(at)?(r=M,at++):(r=a,0===ut&&gt(V));if(r!==a){for(n=[],i=Tt();i!==a;)n.push(i),i=Tt();n!==a?(34===e.charCodeAt(at)?(i=M,at++):(i=a,0===ut&&gt(V)),i!==a?(it=t,t=r=U(n)):(at=t,t=a)):(at=t,t=a)}else at=t,t=a;return t}(),n!==a)if(i=function(){var t,r,n;t=at,126===e.charCodeAt(at)?(r=ye,at++):(r=a,0===ut&&gt(Ee));r!==a&&(n=Lt())!==a?(it=t,t=r=Ae(n)):(at=t,t=a);return t}(),i===a&&(i=null),i!==a)if((o=$t())===a&&(o=null),o!==a){for(s=[],l=jt();l!==a;)s.push(l),l=jt();s!==a?(it=t,t=r=A(r,n,i,o)):(at=t,t=a)}else at=t,t=a;else at=t,t=a;else at=t,t=a;else at=t,t=a;if(t===a){if(t=at,(r=Dt())===a&&(r=null),r!==a)if(n=function(){var t,r,n,i;t=at,47===e.charCodeAt(at)?(r=q,at++):(r=a,0===ut&&gt(B));if(r!==a){if(n=[],(i=Rt())!==a)for(;i!==a;)n.push(i),i=Rt();else n=a;n!==a?(47===e.charCodeAt(at)?(i=q,at++):(i=a,0===ut&&gt(B)),i!==a?(it=t,t=r=G(n)):(at=t,t=a)):(at=t,t=a)}else at=t,t=a;return t}(),n!==a){for(i=[],o=jt();o!==a;)i.push(o),o=jt();i!==a?(it=t,t=r=P(r,n)):(at=t,t=a)}else at=t,t=a;else at=t,t=a;if(t===a)if(t=at,(r=Dt())===a&&(r=null),r!==a)if((n=At())!==a)if(i=function(){var t,r,n;t=at,126===e.charCodeAt(at)?(r=ye,at++):(r=a,0===ut&&gt(Ee));r!==a?((n=xt())===a&&(n=null),n!==a?(it=t,t=r=Te(n)):(at=t,t=a)):(at=t,t=a);return t}(),i===a&&(i=null),i!==a)if((o=$t())===a&&(o=null),o!==a){for(s=[],l=jt();l!==a;)s.push(l),l=jt();s!==a?(it=t,t=r=T(r,n,i,o)):(at=t,t=a)}else at=t,t=a;else at=t,t=a;else at=t,t=a;else at=t,t=a}return t}(),n!==a?(it=t,t=r=O(r,n)):(at=t,t=a)):(at=t,t=a)));return t}(),r!==a){for(n=[],i=jt();i!==a;)n.push(i),i=jt();n!==a?(it=t,t=r=m(r)):(at=t,t=a)}else at=t,t=a;return t===a&&(t=Ot()),t}function Ot(){var t,r,n,i,o,s,l;if(t=at,40===e.charCodeAt(at)?(r=f,at++):(r=a,0===ut&&gt(h)),r!==a){for(n=[],i=jt();i!==a;)n.push(i),i=jt();if(n!==a){if(i=[],(o=yt())!==a)for(;o!==a;)i.push(o),o=yt();else i=a;if(i!==a)if(41===e.charCodeAt(at)?(o=g,at++):(o=a,0===ut&&gt(v)),o!==a){for(s=[],l=jt();l!==a;)s.push(l),l=jt();s!==a?(it=t,t=r=b(i)):(at=t,t=a)}else at=t,t=a;else at=t,t=a}else at=t,t=a}else at=t,t=a;return t}function St(){var t,r,n,i,o;if(t=at,(r=At())!==a)if(S.test(e.charAt(at))?(n=e.charAt(at),at++):(n=a,0===ut&&gt(w)),n!==a){for(i=[],o=jt();o!==a;)i.push(o),o=jt();i!==a?(it=t,t=r=I(r)):(at=t,t=a)}else at=t,t=a;else at=t,t=a;return t}function wt(){var t,r,n;return t=at,92===e.charCodeAt(at)?(r=R,at++):(r=a,0===ut&&gt(N)),r!==a&&(n=Nt())!==a?(it=t,t=r=$(n)):(at=t,t=a),t===a&&(46===e.charCodeAt(at)?(t=x,at++):(t=a,0===ut&&gt(L)),t===a&&(_.test(e.charAt(at))?(t=e.charAt(at),at++):(t=a,0===ut&&gt(C)))),t}function It(){var e,t,r;if(e=at,t=[],(r=wt())!==a)for(;r!==a;)t.push(r),r=wt();else t=a;return t!==a&&(it=e,t=D(t)),e=t}function At(){var e,t,r;if(e=at,t=[],(r=Pt())!==a)for(;r!==a;)t.push(r),r=Pt();else t=a;return t!==a&&(it=e,t=j(t)),e=t}function Pt(){var t,r,n;return t=at,92===e.charCodeAt(at)?(r=R,at++):(r=a,0===ut&&gt(N)),r!==a&&(n=Nt())!==a?(it=t,t=r=$(n)):(at=t,t=a),t===a&&(46===e.charCodeAt(at)?(t=x,at++):(t=a,0===ut&&gt(L)),t===a&&(F.test(e.charAt(at))?(t=e.charAt(at),at++):(t=a,0===ut&&gt(k)))),t}function Tt(){var t,r,n;return t=at,r=at,ut++,34===e.charCodeAt(at)?(n=M,at++):(n=a,0===ut&&gt(V)),n===a&&(92===e.charCodeAt(at)?(n=R,at++):(n=a,0===ut&&gt(N))),ut--,n===a?r=void 0:(at=r,r=a),r!==a?(e.length>at?(n=e.charAt(at),at++):(n=a,0===ut&&gt(H)),n!==a?(it=t,t=r=W(n)):(at=t,t=a)):(at=t,t=a),t===a&&(t=at,92===e.charCodeAt(at)?(r=R,at++):(r=a,0===ut&&gt(N)),r!==a&&(n=Nt())!==a?(it=t,t=r=$(n)):(at=t,t=a)),t}function Rt(){var t,r,n;return t=at,r=at,ut++,47===e.charCodeAt(at)?(n=q,at++):(n=a,0===ut&&gt(B)),n===a&&(92===e.charCodeAt(at)?(n=R,at++):(n=a,0===ut&&gt(N))),ut--,n===a?r=void 0:(at=r,r=a),r!==a?(e.length>at?(n=e.charAt(at),at++):(n=a,0===ut&&gt(H)),n!==a?(it=t,t=r=W(n)):(at=t,t=a)):(at=t,t=a),t===a&&(t=at,92===e.charCodeAt(at)?(r=R,at++):(r=a,0===ut&&gt(N)),r!==a&&(n=Nt())!==a?(it=t,t=r=$(n)):(at=t,t=a)),t}function Nt(){var t;return 43===e.charCodeAt(at)?(t=K,at++):(t=a,0===ut&&gt(z)),t===a&&(45===e.charCodeAt(at)?(t=Q,at++):(t=a,0===ut&&gt(X)),t===a&&(33===e.charCodeAt(at)?(t=Y,at++):(t=a,0===ut&&gt(J)),t===a&&(40===e.charCodeAt(at)?(t=f,at++):(t=a,0===ut&&gt(h)),t===a&&(41===e.charCodeAt(at)?(t=g,at++):(t=a,0===ut&&gt(v)),t===a&&(123===e.charCodeAt(at)?(t=Z,at++):(t=a,0===ut&&gt(ee)),t===a&&(125===e.charCodeAt(at)?(t=te,at++):(t=a,0===ut&&gt(re)),t===a&&(91===e.charCodeAt(at)?(t=ne,at++):(t=a,0===ut&&gt(ae)),t===a&&(93===e.charCodeAt(at)?(t=ie,at++):(t=a,0===ut&&gt(oe)),t===a&&(94===e.charCodeAt(at)?(t=se,at++):(t=a,0===ut&&gt(le)),t===a&&(34===e.charCodeAt(at)?(t=M,at++):(t=a,0===ut&&gt(V)),t===a&&(63===e.charCodeAt(at)?(t=ue,at++):(t=a,0===ut&&gt(ce)),t===a&&(58===e.charCodeAt(at)?(t=de,at++):(t=a,0===ut&&gt(pe)),t===a&&(92===e.charCodeAt(at)?(t=R,at++):(t=a,0===ut&&gt(N)),t===a&&(38===e.charCodeAt(at)?(t=me,at++):(t=a,0===ut&&gt(fe)),t===a&&(124===e.charCodeAt(at)?(t=he,at++):(t=a,0===ut&&gt(ge)),t===a&&(39===e.charCodeAt(at)?(t=ve,at++):(t=a,0===ut&&gt(be)),t===a&&(47===e.charCodeAt(at)?(t=q,at++):(t=a,0===ut&&gt(B)),t===a&&(126===e.charCodeAt(at)?(t=ye,at++):(t=a,0===ut&&gt(Ee)),t===a&&(42===e.charCodeAt(at)?(t=Oe,at++):(t=a,0===ut&&gt(Se)),t===a&&(32===e.charCodeAt(at)?(t=we,at++):(t=a,0===ut&&gt(Ie)))))))))))))))))))))),t}function $t(){var t,r,n;return t=at,94===e.charCodeAt(at)?(r=se,at++):(r=a,0===ut&&gt(le)),r!==a?(n=function(){var e;e=xt(),e===a&&(e=Lt());return e}(),n!==a?(it=t,t=r=Pe(n)):(at=t,t=a)):(at=t,t=a),t}function xt(){var t,r,n,i;if(t=at,e.substr(at,2)===Re?(r=Re,at+=2):(r=a,0===ut&&gt(Ne)),r!==a){if(n=[],$e.test(e.charAt(at))?(i=e.charAt(at),at++):(i=a,0===ut&&gt(xe)),i!==a)for(;i!==a;)n.push(i),$e.test(e.charAt(at))?(i=e.charAt(at),at++):(i=a,0===ut&&gt(xe));else n=a;n!==a?(it=t,t=r=Le(n)):(at=t,t=a)}else at=t,t=a;return t}function Lt(){var t,r,n;if(t=at,r=[],$e.test(e.charAt(at))?(n=e.charAt(at),at++):(n=a,0===ut&&gt(xe)),n!==a)for(;n!==a;)r.push(n),$e.test(e.charAt(at))?(n=e.charAt(at),at++):(n=a,0===ut&&gt(xe));else r=a;return r!==a&&(it=t,r=_e(r)),t=r}function _t(){var e,t,r,n,i;for(e=at,t=[],r=jt();r!==a;)t.push(r),r=jt();if(t!==a)if((r=Ct())!==a){if(n=[],(i=jt())!==a)for(;i!==a;)n.push(i),i=jt();else n=a;n!==a?(it=e,e=t=Ve(r)):(at=e,e=a)}else at=e,e=a;else at=e,e=a;if(e===a){for(e=at,t=[],r=jt();r!==a;)t.push(r),r=jt();t!==a&&(r=Ct())!==a&&(n=Ft())!==a?(it=e,e=t=Ve(r)):(at=e,e=a)}return e}function Ct(){var t;return e.substr(at,6)===Ue?(t=Ue,at+=6):(t=a,0===ut&&gt(qe)),t===a&&(e.substr(at,7)===Be?(t=Be,at+=7):(t=a,0===ut&&gt(Ge)),t===a&&(e.substr(at,2)===He?(t=He,at+=2):(t=a,0===ut&&gt(We)),t===a&&(e.substr(at,3)===Ke?(t=Ke,at+=3):(t=a,0===ut&&gt(ze)),t===a&&(e.substr(at,3)===Qe?(t=Qe,at+=3):(t=a,0===ut&&gt(Xe)),t===a&&(e.substr(at,2)===Ye?(t=Ye,at+=2):(t=a,0===ut&&gt(Je)),t===a&&(e.substr(at,2)===Ze?(t=Ze,at+=2):(t=a,0===ut&&gt(et)))))))),t}function Dt(){var t,r,n;for(t=at,r=[],n=jt();n!==a;)r.push(n),n=jt();return r!==a?(n=function(){var t;43===e.charCodeAt(at)?(t=K,at++):(t=a,0===ut&&gt(z));t===a&&(45===e.charCodeAt(at)?(t=Q,at++):(t=a,0===ut&&gt(X)),t===a&&(33===e.charCodeAt(at)?(t=Y,at++):(t=a,0===ut&&gt(J))));return t}(),n!==a?(it=t,t=r=Ve(n)):(at=t,t=a)):(at=t,t=a),t}function jt(){var t,r;if(ut++,t=[],rt.test(e.charAt(at))?(r=e.charAt(at),at++):(r=a,0===ut&&gt(nt)),r!==a)for(;r!==a;)t.push(r),rt.test(e.charAt(at))?(r=e.charAt(at),at++):(r=a,0===ut&&gt(nt));else t=a;return ut--,t===a&&(r=a,0===ut&&gt(tt)),t}function Ft(){var t,r;return t=at,ut++,e.length>at?(r=e.charAt(at),at++):(r=a,0===ut&&gt(H)),ut--,r===a?t=void 0:(at=t,t=a),t}if((n=o())!==a&&at===e.length)return n;throw n!==a&&at<e.length&&gt({type:"end"}),vt(lt,st<e.length?e.charAt(st):null,st<e.length?ht(st,st+1):ht(st,st))}}},7645:(e,t,r)=>{"use strict";const n=r(5860);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},7659:(e,t,r)=>{"use strict";const n=r(5380);e.exports=(e,t,r)=>0!==n(e,t,r)},7685:(e,t,r)=>{"use strict";const n=r(6175),a=r(6877),i=r(7574),o=r(3039),s=r(5161),l=r(1178);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return a(e,r,u);case">":return i(e,r,u);case">=":return o(e,r,u);case"<":return s(e,r,u);case"<=":return l(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},7694:e=>{"use strict";e.exports=o},7781:e=>{"use strict";e.exports=s},7840:(e,t,r)=>{"use strict";const n=r(7944),a=r(8395);e.exports=(e,t,r)=>{let i=null,o=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&-1!==o.compare(e)||(i=e,o=new n(i,r)))})),i}},7871:(e,t,r)=>{"use strict";const n=r(5463);e.exports=(e,t,r)=>n(e,t,">",r)},7930:(e,t,r)=>{"use strict";const n=r(7944),a=r(8395);e.exports=(e,t,r)=>{let i=null,o=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&1!==o.compare(e)||(i=e,o=new n(i,r)))})),i}},7944:(e,t,r)=>{"use strict";const n=r(9796),{MAX_LENGTH:a,MAX_SAFE_INTEGER:i}=r(9630),{safeRe:o,t:s}=r(6850),l=r(7095),{compareIdentifiers:u}=r(4031);class c{constructor(e,t){if(t=l(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?o[s.LOOSE]:o[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],a=e.build[t];if(n("build compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?o[s.PRERELEASELOOSE]:o[s.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},7994:(e,t,r)=>{"use strict";const n=r(5860);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},8029:e=>{"use strict";const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},8068:(e,t,r)=>{"use strict";const n=r(3801),a=r(6392),i=r(9573);e.exports=(e,t)=>{e=new a(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const a=e.set[t];let o=null;a.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":o&&!i(t,o)||(o=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!o||r&&!i(r,o)||(r=o)}return r&&e.test(r)?r:null}},8146:e=>{"use strict";e.exports=l},8395:(e,t,r)=>{"use strict";const n=/\s+/g;class a{constructor(e,t){if(t=o(t),e instanceof a)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new a(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&b(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,a=n?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(a,$(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],p),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],m),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],f),l("caret trim",e);let o=e.split(" ").map((e=>E(e,this.options))).join(" ").split(/\s+/).map((e=>N(e,this.options)));n&&(o=o.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",o);const u=new Map,b=o.map((e=>new s(e,this.options)));for(const e of b){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const y=[...u.values()];return i.set(t,y),y}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=a;const i=new(r(1158)),o=r(7095),s=r(9524),l=r(9796),u=r(7944),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:m,caretTrimReplace:f}=r(6850),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=r(9630),v=e=>"<0.0.0-0"===e.value,b=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let a=n.pop();for(;r&&n.length;)r=n.every((e=>a.intersects(e,t))),a=n.pop();return r},E=(e,t)=>(l("comp",e,t),e=I(e,t),l("caret",e),e=S(e,t),l("tildes",e),e=P(e,t),l("xrange",e),e=R(e,t),l("stars",e),e),O=e=>!e||"x"===e.toLowerCase()||"*"===e,S=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{const r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,((t,r,n,a,i)=>{let o;return l("tilde",e,t,r,n,a,i),O(r)?o="":O(n)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:O(a)?o=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(l("replaceTilde pr",i),o=`>=${r}.${n}.${a}-${i} <${r}.${+n+1}.0-0`):o=`>=${r}.${n}.${a} <${r}.${+n+1}.0-0`,l("tilde return",o),o}))},I=(e,t)=>e.trim().split(/\s+/).map((e=>A(e,t))).join(" "),A=(e,t)=>{l("caret",e,t);const r=t.loose?c[d.CARETLOOSE]:c[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,a,i,o)=>{let s;return l("caret",e,t,r,a,i,o),O(r)?s="":O(a)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:O(i)?s="0"===r?`>=${r}.${a}.0${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${n} <${+r+1}.0.0-0`:o?(l("replaceCaret pr",o),s="0"===r?"0"===a?`>=${r}.${a}.${i}-${o} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}-${o} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i}-${o} <${+r+1}.0.0-0`):(l("no pr"),s="0"===r?"0"===a?`>=${r}.${a}.${i}${n} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i} <${+r+1}.0.0-0`),l("caret return",s),s}))},P=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>T(e,t))).join(" ")),T=(e,t)=>{e=e.trim();const r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,((r,n,a,i,o,s)=>{l("xRange",e,r,n,a,i,o,s);const u=O(a),c=u||O(i),d=c||O(o),p=d;return"="===n&&p&&(n=""),s=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(i=0),o=0,">"===n?(n=">=",c?(a=+a+1,i=0,o=0):(i=+i+1,o=0)):"<="===n&&(n="<",c?a=+a+1:i=+i+1),"<"===n&&(s="-0"),r=`${n+a}.${i}.${o}${s}`):c?r=`>=${a}.0.0${s} <${+a+1}.0.0-0`:d&&(r=`>=${a}.${i}.0${s} <${a}.${+i+1}.0-0`),l("xRange return",r),r}))},R=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),N=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),$=e=>(t,r,n,a,i,o,s,l,u,c,d,p)=>`${r=O(n)?"":O(a)?`>=${n}.0.0${e?"-0":""}`:O(i)?`>=${n}.${a}.0${e?"-0":""}`:o?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=O(u)?"":O(c)?`<${+u+1}.0.0-0`:O(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),x=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},8449:(e,t,r)=>{"use strict";const n=r(6850),a=r(9630),i=r(7944),o=r(4031),s=r(5860),l=r(7645),u=r(7994),c=r(5955),d=r(660),p=r(2966),m=r(5986),f=r(1617),h=r(9613),g=r(5380),v=r(2862),b=r(7023),y=r(2801),E=r(603),O=r(6033),S=r(144),w=r(599),I=r(6909),A=r(7659),P=r(2077),T=r(7092),R=r(3811),N=r(5334),$=r(9524),x=r(8395),L=r(1722),_=r(651),C=r(7840),D=r(7930),j=r(3489),F=r(7494),k=r(5463),M=r(7871),V=r(4266),U=r(1112),q=r(1465),B=r(9252);e.exports={parse:s,valid:l,clean:u,inc:c,diff:d,major:p,minor:m,patch:f,prerelease:h,compare:g,rcompare:v,compareLoose:b,compareBuild:y,sort:E,rsort:O,gt:S,lt:w,eq:I,neq:A,gte:P,lte:T,cmp:R,coerce:N,Comparator:$,Range:x,satisfies:L,toComparators:_,maxSatisfying:C,minSatisfying:D,minVersion:j,validRange:F,outside:k,gtr:M,ltr:V,intersects:U,simplifyRange:q,subset:B,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},8475:(e,t,r)=>{"use strict";const n=r(2362);e.exports=(e,t,r)=>n(e,t,"<",r)},8531:e=>{"use strict";e.exports=u},8752:(e,t,r)=>{"use strict";const n=r(9534),a=r(6293);e.exports=(e,t,r)=>{let i=null,o=null,s=null;try{s=new a(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&1!==o.compare(e)||(i=e,o=new n(i,r)))})),i}},8758:(e,t,r)=>{"use strict";const n=r(2362);e.exports=(e,t,r)=>n(e,t,">",r)},8954:e=>{"use strict";const t=/^[0-9]+$/,r=(e,r)=>{if("number"==typeof e&&"number"==typeof r)return e===r?0:e<r?-1:1;const n=t.test(e),a=t.test(r);return n&&a&&(e=+e,r=+r),e===r?0:n&&!a?-1:a&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},8968:(e,t,r)=>{"use strict";const n=r(9618);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},8987:(e,t,r)=>{"use strict";const n=r(3801),a=r(55),{safeRe:i,t:o}=r(405);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?i[o.COERCERTLFULL]:i[o.COERCERTL];let a;for(;(a=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),n.lastIndex=a.index+a[1].length+a[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?i[o.COERCEFULL]:i[o.COERCE]);if(null===r)return null;const s=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return a(`${s}.${l}.${u}${c}${d}`,t)}},8992:(e,t,r)=>{"use strict";const n=r(9534);e.exports=(e,t)=>new n(e,t).major},9252:(e,t,r)=>{"use strict";const n=r(8395),a=r(9524),{ANY:i}=a,o=r(1722),s=r(5380),l=[new a(">=0.0.0-0")],u=[new a(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=u}const n=new Set;let a,c,m,f,h,g,v;for(const t of e)">"===t.operator||">="===t.operator?a=d(a,t,r):"<"===t.operator||"<="===t.operator?c=p(c,t,r):n.add(t.semver);if(n.size>1)return null;if(a&&c){if(m=s(a.semver,c.semver,r),m>0)return null;if(0===m&&(">="!==a.operator||"<="!==c.operator))return null}for(const e of n){if(a&&!o(e,String(a),r))return null;if(c&&!o(e,String(c),r))return null;for(const n of t)if(!o(e,String(n),r))return!1;return!0}let b=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,y=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;b&&1===b.prerelease.length&&"<"===c.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,a)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(f=d(a,e,r),f===e&&f!==a)return!1}else if(">="===a.operator&&!o(a.semver,String(e),r))return!1;if(c)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(h=p(c,e,r),h===e&&h!==c)return!1}else if("<="===c.operator&&!o(c.semver,String(e),r))return!1;if(!e.operator&&(c||a)&&0!==m)return!1}return!(a&&g&&!c&&0!==m)&&(!(c&&v&&!a&&0!==m)&&(!y&&!b))},d=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let a=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(a=a||null!==t,t)continue e}if(a)return!1}return!0}},9459:(e,t,r)=>{"use strict";const n=r(6392),a=r(4369),{ANY:i}=a,o=r(257),s=r(9679),l=[new a(">=0.0.0-0")],u=[new a(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=u}const n=new Set;let a,c,m,f,h,g,v;for(const t of e)">"===t.operator||">="===t.operator?a=d(a,t,r):"<"===t.operator||"<="===t.operator?c=p(c,t,r):n.add(t.semver);if(n.size>1)return null;if(a&&c){if(m=s(a.semver,c.semver,r),m>0)return null;if(0===m&&(">="!==a.operator||"<="!==c.operator))return null}for(const e of n){if(a&&!o(e,String(a),r))return null;if(c&&!o(e,String(c),r))return null;for(const n of t)if(!o(e,String(n),r))return!1;return!0}let b=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,y=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;b&&1===b.prerelease.length&&"<"===c.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,a)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(f=d(a,e,r),f===e&&f!==a)return!1}else if(">="===a.operator&&!o(a.semver,String(e),r))return!1;if(c)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(h=p(c,e,r),h===e&&h!==c)return!1}else if("<="===c.operator&&!o(c.semver,String(e),r))return!1;if(!e.operator&&(c||a)&&0!==m)return!1}return!(a&&g&&!c&&0!==m)&&(!(c&&v&&!a&&0!==m)&&(!y&&!b))},d=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let a=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(a=a||null!==t,t)continue e}if(a)return!1}return!0}},9524:(e,t,r)=>{"use strict";const n=Symbol("SemVer ANY");class a{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof a){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?o[s.COMPARATORLOOSE]:o[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=i(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=a;const i=r(7095),{safeRe:o,t:s}=r(6850),l=r(3811),u=r(9796),c=r(7944),d=r(8395)},9534:(e,t,r)=>{"use strict";const n=r(5906),{MAX_LENGTH:a,MAX_SAFE_INTEGER:i}=r(6484),{safeRe:o,t:s}=r(2728),l=r(8029),{compareIdentifiers:u}=r(410);class c{constructor(e,t){if(t=l(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?o[s.LOOSE]:o[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const r=this.build[t],a=e.build[t];if(n("build compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return u(r,a)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?o[s.PRERELEASELOOSE]:o[s.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},9573:(e,t,r)=>{"use strict";const n=r(9679);e.exports=(e,t,r)=>n(e,t,r)>0},9613:(e,t,r)=>{"use strict";const n=r(5860);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},9618:(e,t,r)=>{"use strict";const n=r(9534);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},9630:e=>{"use strict";const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},9649:(e,t,r)=>{"use strict";const n=r(55);e.exports=(e,t)=>{const r=n(e,null,!0),a=n(t,null,!0),i=r.compare(a);if(0===i)return null;const o=i>0,s=o?r:a,l=o?a:r,u=!!s.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(s))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"}},9679:(e,t,r)=>{"use strict";const n=r(3801);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},9689:(e,t,r)=>{"use strict";const n=r(9679);e.exports=(e,t,r)=>n(e,t,r)>=0},9694:(e,t,r)=>{"use strict";const n=r(6670);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},9730:(e,t,r)=>{"use strict";const n=r(257),a=r(9679);e.exports=(e,t,r)=>{const i=[];let o=null,s=null;const l=e.sort(((e,t)=>a(e,t,r)));for(const e of l){n(e,t,r)?(s=e,o||(o=e)):(s&&i.push([o,s]),s=null,o=null)}o&&i.push([o,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},9796:e=>{"use strict";const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t}},d={};function p(e){var t=d[e];if(void 0!==t)return t.exports;var r=d[e]={exports:{}};return c[e](r,r.exports,p),r.exports}p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var r in t)p.o(t,r)&&!p.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.p="public/plugins/grafana-opensearch-datasource/";var m={};return(()=>{"use strict";p.r(m),p.d(m,{plugin:()=>xs});var e=p(1308),t=p.n(e);p.p=t()&&t().uri?t().uri.slice(0,t().uri.lastIndexOf("/")+1):"public/plugins/grafana-opensearch-datasource/";var r=p(7781),n=p(3241),a=p.n(n);function i(e){return"function"==typeof e}function o(e){return function(t){if(function(e){return i(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},s(e,t)};function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}Object.create;function u(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function d(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var f,h,g=(f=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}},(h=f((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),h.prototype.constructor=h,h);function v(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var b=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,n,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=u(o),l=s.next();!l.done;l=s.next()){l.value.remove(this)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var p=this.initialTeardown;if(i(p))try{p()}catch(e){a=e instanceof g?e.errors:[e]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var f=u(m),h=f.next();!h.done;h=f.next()){var v=h.value;try{y(v)}catch(e){a=null!=a?a:[],e instanceof g?a=d(d([],c(a)),c(e.errors)):a.push(e)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}}if(a)throw new g(a)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)y(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&v(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&v(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();b.EMPTY;function y(e){i(e)?e():e.unsubscribe()}var E=null,O=null,S=!1,w=!1,I={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=I.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,d([e,t],c(r))):setTimeout.apply(void 0,d([e,t],c(r)))},clearTimeout:function(e){var t=I.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function A(){}var P=T("C",void 0,void 0);function T(e,t,r){return{kind:e,value:t,error:r}}var R=null;var N=function(e){function t(t){var r,n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,((r=t)instanceof b||r&&"closed"in r&&i(r.remove)&&i(r.add)&&i(r.unsubscribe))&&t.add(n)):n.destination=j,n}return l(t,e),t.create=function(e,t,r){return new _(e,t,r)},t.prototype.next=function(e){this.isStopped?D(function(e){return T("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?D(T("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?D(P,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(b),$=Function.prototype.bind;function x(e,t){return $.call(e,t)}var L=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){C(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){C(e)}else C(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){C(e)}},e}(),_=function(e){function t(t,r,n){var a,o,s=e.call(this)||this;i(t)||!t?a={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:s&&w?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},a={next:t.next&&x(t.next,o),error:t.error&&x(t.error,o),complete:t.complete&&x(t.complete,o)}):a=t;return s.destination=new L(a),s}return l(t,e),t}(N);function C(e){var t;S?(t=e,S&&R&&(R.errorThrown=!0,R.error=t)):function(e){I.setTimeout((function(){if(!E)throw e;E(e)}))}(e)}function D(e,t){var r=O;r&&I.setTimeout((function(){return r(e,t)}))}var j={closed:!0,next:A,error:function(e){throw e},complete:A};function F(e,t,r,n,a){return new k(e,t,r,n,a)}var k=function(e){function t(t,r,n,a,i,o){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=o,s._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return l(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(N);function M(e){return e}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const U={Hourly:{startOf:"hour",amount:"hours"},Daily:{startOf:"day",amount:"days"},Weekly:{startOf:"isoWeek",amount:"weeks"},Monthly:{startOf:"month",amount:"months"},Yearly:{startOf:"year",amount:"years"}};class q{getIndexForToday(){return this.interval?(0,r.toUtc)().locale(this.dateLocale).format(this.pattern):this.pattern}getIndexList(e,t){if(!this.interval)return this.pattern;const n=U[this.interval],a=(0,r.dateTime)(e||(0,r.dateTime)(t).add(-7,n.amount)).utc().startOf(n.startOf),i=(0,r.dateTime)(t||(0,r.dateTime)(e).add(7,n.amount)).utc().startOf(n.startOf).valueOf(),o=[];for(;a.valueOf()<=i;)o.push(a.locale(this.dateLocale).format(this.pattern)),a.add(1,n.amount);return o}getPPLIndexPattern(){if(!this.interval)return this.pattern;let e=this.pattern.match(/\[(.*?)\]/)[1];return this.pattern.startsWith("[")?e+="*":this.pattern.endsWith("]")&&(e="*"+e),e}constructor(e,t){V(this,"pattern",void 0),V(this,"interval",void 0),V(this,"dateLocale",void 0),this.pattern=e,this.interval=t,this.dateLocale="en"}}var B=p(8449),G=function(e){return e.Lucene="lucene",e.PPL="PPL",e}({}),H=function(e){return e.Elasticsearch="elasticsearch",e.OpenSearch="opensearch",e}({}),W=function(e){return e.Traces="Traces",e.Metric="Metric",e.Logs="Logs",e.RawData="RawData",e.RawDocument="RawDocument",e}({});const K={count:{label:"Count",impliedLuceneQueryType:W.Metric,requiresField:!1,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!1,hasMeta:!1,supportsInlineScript:!1,defaults:{}},avg:{label:"Average",impliedLuceneQueryType:W.Metric,requiresField:!0,supportsInlineScript:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{}},sum:{label:"Sum",impliedLuceneQueryType:W.Metric,requiresField:!0,supportsInlineScript:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{}},max:{label:"Max",impliedLuceneQueryType:W.Metric,requiresField:!0,supportsInlineScript:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{}},min:{label:"Min",impliedLuceneQueryType:W.Metric,requiresField:!0,supportsInlineScript:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{}},extended_stats:{label:"Extended Stats",impliedLuceneQueryType:W.Metric,requiresField:!0,supportsMissing:!0,supportsInlineScript:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!0,defaults:{meta:{std_deviation_bounds_lower:!0,std_deviation_bounds_upper:!0}}},percentiles:{label:"Percentiles",impliedLuceneQueryType:W.Metric,requiresField:!0,supportsMissing:!0,supportsInlineScript:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{settings:{percents:["25","50","75","95","99"]}}},cardinality:{label:"Unique Count",impliedLuceneQueryType:W.Metric,requiresField:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{}},moving_avg:{label:"Moving Average",impliedLuceneQueryType:W.Metric,requiresField:!0,isPipelineAgg:!0,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{settings:{model:"simple",window:5}}},moving_fn:{label:"Moving Function",impliedLuceneQueryType:W.Metric,requiresField:!0,isPipelineAgg:!0,supportsMultipleBucketPaths:!1,supportsInlineScript:!1,supportsMissing:!1,hasMeta:!1,hasSettings:!0,defaults:{},versionRange:{[H.Elasticsearch]:">=7.0.0"}},derivative:{label:"Derivative",impliedLuceneQueryType:W.Metric,requiresField:!0,isPipelineAgg:!0,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{}},cumulative_sum:{label:"Cumulative Sum",impliedLuceneQueryType:W.Metric,requiresField:!0,isPipelineAgg:!0,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{}},bucket_script:{label:"Bucket Script",impliedLuceneQueryType:W.Metric,requiresField:!1,isPipelineAgg:!0,supportsMissing:!1,supportsMultipleBucketPaths:!0,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{pipelineVariables:[{name:"var1",pipelineAgg:""}]}},raw_document:{label:"Raw Document (legacy)",impliedLuceneQueryType:W.RawDocument,requiresField:!1,isSingleMetric:!0,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{settings:{size:"500",order:"desc",useTimeRange:!0}}},raw_data:{label:"Raw Data",impliedLuceneQueryType:W.RawData,requiresField:!1,isSingleMetric:!0,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{settings:{size:"500",order:"desc",useTimeRange:!0}}},logs:{label:"Logs",impliedLuceneQueryType:W.Logs,isSingleMetric:!0,hasSettings:!0,requiresField:!1,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,supportsInlineScript:!1,hasMeta:!1,defaults:{}}},z=(e,t)=>{const r=t.filter((t=>{var r;return J(t)?null===(r=t.pipelineVariables)||void 0===r?void 0:r.some((t=>t.pipelineAgg===e.id)):X(t)&&e.id===t.field}));return[...r,...r.flatMap((e=>z(e,t)))]},Q=[{label:"Descending",value:"desc"},{label:"Ascending",value:"asc"}],X=e=>K[e.type].requiresField,Y=e=>K[e.type].isPipelineAgg,J=e=>K[e.type].supportsMultipleBucketPaths,Z=e=>K[e.type].hasSettings,ee=[{label:"Avg",value:"avg"},{label:"Min",value:"min"},{label:"Max",value:"max"},{label:"Sum",value:"sum"},{label:"Count",value:"count"},{label:"Std Dev",value:"std_deviation"},{label:"Std Dev Upper",value:"std_deviation_bounds_upper"},{label:"Std Dev Lower",value:"std_deviation_bounds_lower"}],te=[{label:"Simple",value:"simple"},{label:"Linear",value:"linear"},{label:"Exponentially Weighted",value:"ewma"},{label:"Holt Linear",value:"holt"},{label:"Holt Winters",value:"holt_winters"}];function re(e="1"){return{type:"count",id:e}}function ne(e="1"){return{type:"date_histogram",id:e,settings:{interval:"auto"}}}const ae=(e,t)=>e.find((e=>e.id===t));var ie=p(8531);function oe(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){se(e,t,r[t])}))}return e}function ue(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const ce=e=>X(e)?`${K[e.type].label} ${e.field}`:K[e.type].label,de=e=>Object.entries(e).reduce(((e,[t,r])=>{if(null==r)return le({},e);if(Array.isArray(r)&&0===r.length)return le({},e);if("string"==typeof r&&0===(null==r?void 0:r.length))return le({},e);if(!Array.isArray(r)&&"object"==typeof r){const n=de(r);return 0===Object.keys(n).length?le({},e):ue(le({},e),{[t]:n})}return ue(le({},e),{[t]:r})}),{});function pe(e){return function(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){oe(i,n,a,o,s,"next",e)}function s(e){oe(i,n,a,o,s,"throw",e)}o(void 0)}))}}((function*(){const t=(new TextEncoder).encode(e),r=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")}))()}function me(e,t,r,n,a){return ue(le({},e),{data:e.data.map((e=>function(e,t,r,n,a){const i=t.length>0,o="Trace List"===e.name&&e.fields.some((e=>{var t;return null===(t=e.config.links)||void 0===t?void 0:t.some((e=>"Trace: ${__value.raw}"===e.title&&!e.internal&&!e.url))}));if(!i&&!o)return e;const s=le({},e);if(i){const e=s.fields.map((e=>{const r=t.filter((t=>new RegExp(t.field).test(e.name)));return 0===r.length?e:ue(le({},e),{config:ue(le({},e.config),{links:[...e.config.links||[],...r.map(fe)]})})}));s.fields=e}if(o){const e=s.fields.map((e=>{var t;if("Trace Id"!==e.name)return e;const i=null===(t=e.config.links)||void 0===t?void 0:t.map((e=>"Trace: ${__value.raw}"!==e.title||e.internal||e.url?e:{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:r,datasourceName:n,query:{datasource:{uid:r,type:a},query:"traceId: ${__value.raw}",luceneQueryType:W.Traces,queryType:G.Lucene,metrics:[re()],bucketAggs:[ne()]}}}));return ue(le({},e),{config:ue(le({},e.config),{links:i})})}));s.fields=e}return s}(e,t,r,n,a)))})}function fe(e){const t=(0,ie.getDataSourceSrv)();if(e.datasourceUid){const a=t.getInstanceSettings(e.datasourceUid);var r,n;return{title:null!==(r=e.title)&&void 0!==r?r:"",url:"",internal:{query:{query:e.url},datasourceUid:e.datasourceUid,datasourceName:null!==(n=null==a?void 0:a.name)&&void 0!==n?n:"Data source not found"}}}var a;return{title:null!==(a=e.title)&&void 0!==a?a:"",url:e.url}}const he=e=>{const t=e.match(/^(\d+)/);return null==t?void 0:t[1]};function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ge(e,t,r[t])}))}return e}function be(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class ye{getRangeFilter(){const e={};return e[this.timeField]={gte:"$timeFrom",lte:"$timeTo",format:"epoch_millis"},e}buildTermsAgg(e,t,r){var n;if(t.terms={field:e.field},!e.settings)return t;const a=(null===(n=e.settings)||void 0===n?void 0:n.size)?parseInt(e.settings.size,10):500;if(t.terms.size=0===a?500:a,void 0!==e.settings.orderBy){t.terms.order={},"_term"===e.settings.orderBy&&(this.flavor===H.Elasticsearch&&(0,B.gte)(this.version,"6.0.0")||this.flavor===H.OpenSearch)?t.terms.order._key=e.settings.order:t.terms.order[e.settings.orderBy]=e.settings.order;const n=he(e.settings.orderBy);if(n)for(let a of r.metrics||[])if(a.id===n){"count"===a.type?t.terms.order={_count:e.settings.order}:X(a)&&(t.aggs={},t.aggs[a.id]={[a.type]:{field:a.field}});break}}return void 0!==e.settings.min_doc_count&&(t.terms.min_doc_count=parseInt(e.settings.min_doc_count,10),isNaN(t.terms.min_doc_count)&&(t.terms.min_doc_count=e.settings.min_doc_count)),e.settings.missing&&(t.terms.missing=e.settings.missing),t}getDateHistogramAgg(e){const t={},r=e.settings||{};return t.interval=r.interval,t.field=this.timeField,t.min_doc_count=r.min_doc_count||0,t.extended_bounds={min:"$timeFrom",max:"$timeTo"},t.format="epoch_millis",""!==r.offset&&(t.offset=r.offset),"auto"===t.interval&&(t.interval="$__interval"),t}getHistogramAgg(e){const t={},r=e.settings||{};return t.interval=r.interval,t.field=e.field,t.min_doc_count=r.min_doc_count||0,t}getFiltersAgg(e){var t;const r={};for(let{query:n,label:a}of(null===(t=e.settings)||void 0===t?void 0:t.filters)||[])r[a||n]={query_string:{query:n,analyze_wildcard:!0}};return r}documentQuery(e,t,r,n=!0){return e.size=t,n&&(e.sort={},e.sort[this.timeField]={order:r,unmapped_type:"boolean"}),this.flavor===H.Elasticsearch&&(0,B.lt)(this.version,"5.0.0")&&(e.fields=["*","_source"]),e.script_fields={},e}addAdhocFilters(e,t){if(!t)return;let r,n,a,i;for(r=0;r<t.length;r++)switch(n=t[r],a={},a[n.key]=n.value,i={},i[n.key]={query:n.value},n.operator){case"=":e.query.bool.must||(e.query.bool.must=[]),e.query.bool.must.push({match_phrase:i});break;case"!=":e.query.bool.must_not||(e.query.bool.must_not=[]),e.query.bool.must_not.push({match_phrase:i});break;case"<":a[n.key]={lt:n.value},e.query.bool.filter.push({range:a});break;case">":a[n.key]={gt:n.value},e.query.bool.filter.push({range:a});break;case"=~":e.query.bool.filter.push({regexp:a});break;case"!~":e.query.bool.filter.push({bool:{must_not:{regexp:a}}})}}build(e,t,r){var n,a,i,o;let s,l,u,c,d;e.metrics=e.metrics||[re()],e.bucketAggs=e.bucketAggs||[ne()],e.timeField=this.timeField,e.queryType=G.Lucene;const p={size:0,query:{bool:{filter:[{range:this.getRangeFilter()},{query_string:{analyze_wildcard:!0,query:r}}]}}};if(this.addAdhocFilters(p,t),0===e.bucketAggs.length&&(d=e.metrics[0],!d||"raw_document"!==d.type&&"raw_data"!==d.type))throw{message:"Invalid query"};if("raw_document"===(null===(a=e.metrics)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.type)||"raw_data"===(null===(o=e.metrics)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.type)){var m,f,h;d=e.metrics[0];const t=(null===(m=d.settings)||void 0===m?void 0:m.size)?parseInt(d.settings.size,10):500,r=(null===(f=d.settings)||void 0===f?void 0:f.order)?d.settings.order:"desc",n=null===(h=d.settings)||void 0===h?void 0:h.useTimeRange;return n||p.query.bool.filter.shift(),this.documentQuery(p,t||500,r,n)}for(c=p,s=0;s<e.bucketAggs.length;s++){const t=e.bucketAggs[s],r={};switch(t.type){case"date_histogram":r.date_histogram=this.getDateHistogramAgg(t);break;case"histogram":r.histogram=this.getHistogramAgg(t);break;case"filters":r.filters={filters:this.getFiltersAgg(t)};break;case"terms":this.buildTermsAgg(t,r,e);break;case"geohash_grid":var g;r.geohash_grid={field:t.field,precision:null===(g=t.settings)||void 0===g?void 0:g.precision}}c.aggs=c.aggs||{},c.aggs[t.id]=r,c=r}for(c.aggs={},s=0;s<e.metrics.length;s++){if(d=e.metrics[s],"count"===d.type)continue;const t={};let r=null;if(Y(d))if(J(d)){if(!d.pipelineVariables)continue;for(r={buckets_path:{}},l=0;l<d.pipelineVariables.length;l++)if(u=d.pipelineVariables[l],u.name&&u.pipelineAgg&&/^\d*$/.test(u.pipelineAgg)){const t=ae(e.metrics,u.pipelineAgg);t&&("count"===t.type?r.buckets_path[u.name]="_count":r.buckets_path[u.name]=u.pipelineAgg)}}else{if(!d.field||!/^\d*$/.test(d.field))continue;{const t=ae(e.metrics,d.field);t&&(r="count"===t.type?{buckets_path:"_count"}:{buckets_path:d.field})}}else X(d)&&(r={field:d.field});r=ve({},r,Z(d)&&d.settings),t[d.type]=r,c.aggs[d.id]=t}return p}getTermsQuery(e){const t={size:0,query:{bool:{filter:[{range:this.getRangeFilter()}]}}};e.query&&t.query.bool.filter.push({query_string:{analyze_wildcard:!0,query:e.query}});let r=500;e.size&&(r=e.size),t.aggs={1:{terms:{field:e.field,script:e.script,size:r,order:{}}}};const{orderBy:n="key",order:a=("doc_count"===n?"desc":"asc")}=e;if(["asc","desc"].indexOf(a)<0)throw{message:`Invalid query sort order ${a}`};switch(n){case"key":case"term":const e=this.flavor===H.Elasticsearch&&(0,B.lt)(this.version,"6.0.0")?"_term":"_key";t.aggs[1].terms.order[e]=a;break;case"doc_count":t.aggs[1].terms.order._count=a;break;default:throw{message:`Invalid query sort type ${n}`}}return t}getLogsQuery(e,t,r){let n={size:0,query:{bool:{filter:[{range:this.getRangeFilter()}]}}};return this.addAdhocFilters(n,t),e.query&&n.query.bool.filter.push({query_string:{analyze_wildcard:!0,query:r}}),n=this.documentQuery(n,500,"desc"),be(ve({},n),{aggs:this.build(e,null,r).aggs})}addPPLAdhocFilters(e,t){let n,a,i;for(n=0;n<t.length;n++){if(r.dateMath.isValid(t[n].value)){a=`timestamp('${(0,r.dateTime)(t[n].value).utc().format("YYYY-MM-DD HH:mm:ss.SSSSSS")}')`}else a="string"==typeof t[n].value?`'${t[n].value}'`:t[n].value;i=`\`${t[n].key}\` ${t[n].operator} ${a}`,e+=n>0?" and "+i:" | where "+i}return e}buildPPLQuery(e,t,r){e.format=e.format||"table",e.queryType=G.PPL,e.isLogsQuery="logs"===e.format,t&&(r=this.addPPLAdhocFilters(r,t));const n=" where $timestamp >= timestamp('$timeFrom') and $timestamp <= timestamp('$timeTo')";if(r){const e=r.indexOf("|");r=-1===e?[r.trimEnd(),n].join(" |"):[r.slice(0,e).trimEnd(),n,r.slice(e+1)].join(" |")}return{query:r}}constructor(e){ge(this,"timeField",void 0),ge(this,"version",void 0),ge(this,"flavor",void 0),this.timeField=e.timeField,this.version=e.version,this.flavor=e.flavor}}const Ee={terms:{label:"Terms",requiresField:!0,defaultSettings:{min_doc_count:"1",size:"10",order:"desc",orderBy:"_term"}},filters:{label:"Filters",requiresField:!1,defaultSettings:{filters:[{label:"",query:"*"}]}},geohash_grid:{label:"Geo Hash Grid",requiresField:!0,defaultSettings:{precision:"3"}},date_histogram:{label:"Date Histogram",requiresField:!0,defaultSettings:{interval:"auto",min_doc_count:"0",trimEdges:"0"}},histogram:{label:"Histogram",requiresField:!0,defaultSettings:{interval:"1000",min_doc_count:"0"}}},Oe=[{label:"Top",value:"desc"},{label:"Bottom",value:"asc"}],Se=[{label:"No limit",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"5",value:"5"},{label:"10",value:"10"},{label:"15",value:"15"},{label:"20",value:"20"}],we=[{label:"Term value",value:"_term"},{label:"Doc Count",value:"_count"}],Ie=[{label:"auto",value:"auto"},{label:"10s",value:"10s"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"20m",value:"20m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}];const Ae=(e=[])=>{const t=e.flatMap((e=>"extended_stats"===e.type?function(e){return e.meta?Object.keys(e.meta).filter((t=>{var r;return null===(r=e.meta)||void 0===r?void 0:r[t]})).map((t=>{let r=t;return"std_deviation_bounds_lower"===t&&(r="std_lower"),"std_deviation_bounds_upper"===t&&(r="std_upper"),{label:`${ce(e)} (${r})`,value:`${e.id}[${r}]`}})):[]}(e):"percentiles"===e.type?function(e){var t;return(null===(t=e.settings)||void 0===t?void 0:t.percents)?e.settings.percents.map((t=>{const r=/^\d+\.\d+/.test(`${t}`)?t:`${t}.0`;return{label:`${ce(e)} (${t})`,value:`${e.id}[${r}]`}})):[]}(e):{label:ce(e),value:e.id}));return[...we,...t]},Pe=e=>Ee[e.type].requiresField;var Te=p(5959),Re=p.n(Te),Ne=p(6089),$e=p(2007);function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){xe(e,t,r[t])}))}return e}function _e(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ce={marginRight:Ne.css`
    margin-right: 4px;
  `,queryWrapper:Ne.css`
    display: flex;
    flex-grow: 1;
  `};function De(e){var t;const r=e.annotation,n=e.onAnnotationChange;return Re().createElement(Re().Fragment,null,Re().createElement("div",{className:"gf-form-group"},Re().createElement("div",{className:Ce.queryWrapper},Re().createElement($e.QueryField,{query:null===(t=r.target)||void 0===t?void 0:t.query,onBlur:()=>{},onChange:e=>{var t;const a=_e(Le({},null!==(t=r.target)&&void 0!==t?t:{refId:"annotation_query"}),{query:e});n(_e(Le({},r),{target:a}))},placeholder:"Lucene Query",portalOrigin:"opensearch"}))),Re().createElement("div",{className:"gf-form-group"},Re().createElement("h6",null,"Field mappings"),Re().createElement("div",{className:"gf-form-inline"},Re().createElement("div",{className:`gf-form ${Ce.marginRight}`},Re().createElement("span",{className:"gf-form-label"},"Time"),Re().createElement($e.Input,{type:"text",placeholder:"@timestamp",value:r.timeField,onChange:e=>{n(_e(Le({},r),{timeField:e.currentTarget.value}))}})),Re().createElement("div",{className:`gf-form ${Ce.marginRight}`},Re().createElement("span",{className:"gf-form-label"},"Time End"),Re().createElement($e.Input,{type:"text",value:r.timeEndField,onChange:e=>{n(_e(Le({},r),{timeEndField:e.currentTarget.value}))}}))," ",Re().createElement("div",{className:`gf-form ${Ce.marginRight}`},Re().createElement("span",{className:"gf-form-label"},"Text"),Re().createElement($e.Input,{type:"text",value:r.textField,onChange:e=>{n(_e(Le({},r),{textField:e.currentTarget.value}))}})),Re().createElement("div",{className:`gf-form ${Ce.marginRight}`},Re().createElement("span",{className:"gf-form-label"},"Tags"),Re().createElement($e.Input,{type:"text",placeholder:"tags",value:r.tagsField,onChange:e=>{n(_e(Le({},r),{tagsField:e.currentTarget.value}))}})))))}function je(e,t,r){for(const n of t)try{(0,ie.reportInteraction)("grafana_opensearch_query_executed",{app:r,with_lucene_query:n.queryType===G.Lucene,with_ppl_query:n.queryType===G.PPL,query_type:Fe(n),has_data:e.data.some((e=>{var t;return(null===(t=e.datapoints)||void 0===t?void 0:t.length)>0})),has_error:void 0!==e.error,simultaneously_sent_query_count:t.length,alias:n.alias})}catch(e){console.error("error while reporting opensearch query",e)}}function Fe(e){if(!e.metrics||!e.metrics.length)return;if(e.isLogsQuery)return"logs";if(e.luceneQueryType===W.Traces)return e.serviceMap?"traces with service map":"traces";if(e.queryType===G.PPL)return"table"===e.format?"raw_data":"metric";return["raw_data","raw_document"].includes(e.metrics[0].type)?e.metrics[0].type:"metric"}function ke(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Me(e,t,r[t])}))}return e}function Ue(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const{Select:qe,Input:Be,FormField:Ge,Switch:He}=$e.LegacyForms,We=[{label:"No pattern",value:"none"},{label:"Hourly",value:"Hourly",example:"[logstash-]YYYY.MM.DD.HH"},{label:"Daily",value:"Daily",example:"[logstash-]YYYY.MM.DD"},{label:"Weekly",value:"Weekly",example:"[logstash-]GGGG.WW"},{label:"Monthly",value:"Monthly",example:"[logstash-]YYYY.MM"},{label:"Yearly",value:"Yearly",example:"[logstash-]YYYY"}],Ke=e=>{const{value:t,onChange:r,saveOptions:n,datasource:a}=e,[i,o]=(0,Te.useState)("");let s=t.jsonData.versionLabel;var l;!s&&t.jsonData.flavor&&t.jsonData.version&&(s=`${(null===(l=nt.find((e=>e.value===t.jsonData.flavor)))||void 0===l?void 0:l.label)||t.jsonData.flavor} ${t.jsonData.version}`);var u,c;return Re().createElement(Re().Fragment,null,Re().createElement("h3",{className:"page-heading"},"OpenSearch details"),!t.jsonData.serverless&&Re().createElement($e.Alert,{title:"When the connected OpenSearch instance is upgraded, the configured version should be updated.",severity:"info"},Re().createElement($e.VerticalGroup,null,Re().createElement("div",null,"The plugin uses the configured version below to construct the queries it sends to the connected OpenSearch instance. If the configured version does not match the instance version, there could be query errors."))),i&&Re().createElement($e.Alert,{title:i,severity:"error"}),Re().createElement("div",{className:"gf-form-group"},Re().createElement("div",{className:"gf-form-inline"},Re().createElement("div",{className:"gf-form"},Re().createElement(Ge,{labelWidth:10,inputWidth:15,label:"Index name",value:t.jsonData.database||"",onChange:ze("database",t,r),placeholder:"es-index-name",required:!0})),Re().createElement("div",{className:"gf-form"},Re().createElement(Ge,{labelWidth:10,label:"Pattern",inputEl:Re().createElement(qe,{"aria-label":"Pattern",options:We,onChange:Xe(t,r),value:We.find((e=>e.value===(void 0===t.jsonData.interval?"none":t.jsonData.interval)))})}))),Re().createElement("div",{className:"gf-form max-width-25"},Re().createElement(Ge,{labelWidth:10,inputWidth:15,label:"Time field name",value:t.jsonData.timeField||"",onChange:ze("timeField",t,r),required:!0})),Re().createElement("div",{className:"gf-form-inline"},Re().createElement(He,{label:"Serverless",labelClass:"width-10",tooltip:"If this is a DataSource to query a serverless OpenSearch service.",checked:null!==(u=t.jsonData.serverless)&&void 0!==u&&u,onChange:e=>{r((e=>(o(""),Ue(Ve({},t),{jsonData:Ue(Ve({},t.jsonData),{serverless:e.currentTarget.checked,flavor:H.OpenSearch,version:"1.0.0",maxConcurrentShardRequests:5,pplEnabled:!0})})))(e))}})),!t.jsonData.serverless&&Re().createElement("div",{className:"gf-form"},Re().createElement(Ge,{labelWidth:10,inputWidth:15,label:"Version",value:s,placeholder:"version required",disabled:!0,required:!0}),Re().createElement($e.Button,{onClick:()=>function(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){ke(i,n,a,o,s,"next",e)}function s(e){ke(i,n,a,o,s,"throw",e)}o(void 0)}))}}((function*(){o(""),yield n();try{if(a){const e=yield a.getOpenSearchVersion();yield n(Ue(Ve({},t),{jsonData:Ue(Ve({},t.jsonData),{version:e.version,flavor:e.flavor,versionLabel:e.label,maxConcurrentShardRequests:Ye(e.flavor,e.version,t.jsonData.maxConcurrentShardRequests)})}))}}catch(e){let t=String(e);e instanceof Error&&(t=e.message),o(t)}}))(),variant:"secondary"},"Get Version and Save")),function(e){const{flavor:t,version:r,serverless:n}=e;if(n)return!1;if(!t||!r)return!1;if(t===H.OpenSearch)return!0;return(0,B.gte)(r,"5.6.0")}(t.jsonData)&&Re().createElement("div",{className:"gf-form max-width-30"},Re().createElement(Ge,{"aria-label":"Max concurrent Shard Requests input",labelWidth:15,label:"Max concurrent Shard Requests",value:t.jsonData.maxConcurrentShardRequests||"",onChange:ze("maxConcurrentShardRequests",t,r)})),Re().createElement("div",{className:"gf-form-inline"},Re().createElement("div",{className:"gf-form"},Re().createElement(Ge,{labelWidth:10,label:"Min time interval",inputEl:Re().createElement(Be,{className:"width-6",value:t.jsonData.timeInterval||"",onChange:ze("timeInterval",t,r),placeholder:"10s",validationEvents:{[$e.EventsWithValidation.onBlur]:[(0,$e.regexValidation)(/^\d+(ms|[Mwdhmsy])$/,"Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s")]}}),tooltip:Re().createElement(Re().Fragment,null,"A lower limit for the auto group by time interval. Recommended to be set to write frequency, for example ",Re().createElement("code",null,"1m")," if your data is written every minute.")}))),Re().createElement("div",{className:"gf-form"},Re().createElement(He,{label:"PPL enabled",labelClass:"width-10",tooltip:"Allow Piped Processing Language as an alternative query syntax in the OpenSearch query editor.",checked:null===(c=t.jsonData.pplEnabled)||void 0===c||c,onChange:Qe("pplEnabled",t,r)}))))},ze=(e,t,r)=>n=>{r(Ue(Ve({},t),{jsonData:Ue(Ve({},t.jsonData),{[e]:n.currentTarget.value})}))},Qe=(e,t,r)=>n=>{r(Ue(Ve({},t),{jsonData:Ue(Ve({},t.jsonData),{[e]:n.currentTarget.checked})}))},Xe=(e,t)=>r=>{const{database:n}=e,a="none"===r.value?void 0:r.value;if(!n||0===n.length||n.startsWith("[logstash-]")){let r="";if(void 0!==a){const e=We.find((e=>e.value===a));var i;if(e)r=null!==(i=e.example)&&void 0!==i?i:""}t(Ue(Ve({},e),{database:r,jsonData:Ue(Ve({},e.jsonData),{interval:a})}))}else t(Ue(Ve({},e),{jsonData:Ue(Ve({},e.jsonData),{interval:a})}))};function Ye(e,t,r){return 5===r&&(0,B.lt)(t,"7.0.0")&&e===H.Elasticsearch?256:256===r&&((0,B.gte)(t,"7.0.0")&&e===H.Elasticsearch||e===H.OpenSearch)?5:r||Je(e,t)}function Je(e,t){return e&&t?(0,B.lt)(t,"7.0.0")&&e===H.Elasticsearch?256:5:0}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ze(e,t,r[t])}))}return e}function tt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const rt=e=>{let t=(0,B.valid)(e.jsonData.version)||"",r=e.jsonData.flavor;var n;return e.jsonData.serverless&&(r=H.OpenSearch,t="1.0.0"),tt(et({},e),{jsonData:tt(et({},e.jsonData),{timeField:e.jsonData.timeField||"@timestamp",version:t,flavor:r,maxConcurrentShardRequests:e.jsonData.maxConcurrentShardRequests||Je(r,t),logMessageField:e.jsonData.logMessageField||"",logLevelField:e.jsonData.logLevelField||"",pplEnabled:null===(n=e.jsonData.pplEnabled)||void 0===n||n})})},nt=(H.OpenSearch,H.Elasticsearch,H.Elasticsearch,H.Elasticsearch,H.Elasticsearch,H.Elasticsearch,[{label:"OpenSearch",value:H.OpenSearch},{label:"ElasticSearch",value:H.Elasticsearch}]);var at=p(4421);function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){it(e,t,r[t])}))}return e}function st(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function lt(e,t,r,n=""){if(ut(e,t,r,n))return e;return ct(e,`${n}${t=ht(t)}:"${r=gt(r)}"`)}function ut(e,t,r,n=""){return null!==pt(e,t,r,n)}function ct(e,t,r="AND"){return t?""===e.trim()?t:`${e} ${r} ${t}`:e}function dt(e,t,r,n=""){const a=pt(e,t,r,n),i=Ot(e);return a&&i?at.toString(ft(i,a)):e}function pt(e,t,r,n=""){const a=`${n}${at.term.escape(t)}`;r=at.phrase.escape(r);let i=Ot(e);return i?mt(i,a,r):null}function mt(e,t,r){return 0===Object.keys(e).length?null:yt(e.left)?mt(e.left,t,r):Et(e.left)&&e.left.field===t&&e.left.term===r?e.left:vt(e)?null:Et(e.right)&&e.right.field===t&&e.right.term===r?e.right:bt(e.right)?mt(e.right,t,r):null}function ft(e,t){return 0===Object.keys(e).length?e:yt(e.left)?(e.left=ft(e.left,t),e):Et(e.left)&&(0,n.isEqual)(e.left,t)?(Object.assign(e,{left:void 0,operator:void 0,right:void 0},"right"in e?e.right:{}),e):vt(e)?e:Et(e.right)&&(0,n.isEqual)(e.right,t)?(Object.assign(e,{right:void 0,operator:void 0}),e):bt(e.right)?(e.right=ft(e.right,t),e):e}function ht(e){return at.term.escape(e)}function gt(e){return e=e.replace(/\\/g,"\\\\"),at.phrase.escape(e)}function vt(e){return!(!e||"object"!=typeof e)&&("left"in e&&!("right"in e))}function bt(e){return!(!e||"object"!=typeof e)&&("left"in e&&"right"in e)}function yt(e){return vt(e)||bt(e)}function Et(e){return!(!e||"object"!=typeof e||!("term"in e))}function Ot(e){try{return at.parse(function(e){return e.replace(/(\w+)\s(:)/gi,"$1$2")}(e))}catch(e){return null}}function St(e){let t="";if("=~"===e.operator||"!~"===e.operator)return"";if(r.dateMath.isValid(e.value)){t=`timestamp('${(0,r.dateTime)(e.value).utc().format("YYYY-MM-DD HH:mm:ss.SSSSSS")}')`}else t="string"==typeof e.value&&function(e){return isNaN(Number(e))}(e.value)?`'${e.value}'`:e.value;return`\`${e.key}\` ${e.operator} ${t}`}function wt(e,t,r){if(!t.key||!t.value)return e;const n=St(t);if(""!==n){if(""===e)return n;e+=r&&r>0?" and "+n:" | where "+n}return e}function It(e,t){const r=St(t);return e.replace(` | where ${r}`,"")}function At(e,t){const r=St(t);return e.includes(r)}function Pt(e,t){let r=e;switch(t.type){case"FILTER_FOR":r=ut(r,t.options.key,t.options.value)?dt(r,t.options.key,t.options.value):lt(r,t.options.key,t.options.value);break;case"FILTER_OUT":ut(r,t.options.key,t.options.value)&&(r=dt(r,t.options.key,t.options.value)),r=lt(r,t.options.key,t.options.value,"-")}return r}function Tt(e,t){let r=e;switch(t.type){case"FILTER_FOR":{const e={key:t.options.key,value:t.options.value,operator:"="};r=At(r,e)?It(r,e):wt(r,e);break}case"FILTER_OUT":{const e={key:t.options.key,value:t.options.value,operator:"!="},n=st(ot({},e),{operator:"="});At(r,n)&&(r=It(r,n)),r=wt(r,e);break}}return r}function Rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Nt{isKeyword(){return this.type===this.tokenTypes.Keyword}isWhiteSpace(){return this.type===this.tokenTypes.Whitespace}isParenthesis(){return this.type===this.tokenTypes.Parenthesis}isIdentifier(){return this.type===this.tokenTypes.Identifier}isString(){return this.type===this.tokenTypes.String}isDoubleQuotedString(){return this.type===this.tokenTypes.Type}isVariable(){return this.type===this.tokenTypes.Variable}isFunction(){return this.type===this.tokenTypes.Function}isNumber(){return this.type===this.tokenTypes.Number}is(e,t){const r=this.type===e;return void 0!==t?r&&this.value===t:r}endsWith(e){return this.value===e||this.value[this.value.length-1]===e}getPreviousNonWhiteSpaceToken(){let e=this.previous;for(;null!=e;){if(!e.isWhiteSpace())return e;e=e.previous}return null}getPreviousOfType(e,t){let r=this.previous;for(;null!=r;){const n=r.type===e;if(void 0!==t?n&&r.value===t:n)return r;r=r.previous}return null}getPreviousUntil(e,t,r){let n=[],a=this.previous;for(;null!=a;){if(t.some((e=>e===(null==a?void 0:a.type)))){a=a.previous;continue}const i=a.type===e;if(void 0!==r?i&&a.value===r:i)return n;a.isWhiteSpace()||n.push(a),a=a.previous}return n}getNextUntil(e,t,r){let n=[],a=this.next;for(;null!=a;){if(t.some((e=>e===(null==a?void 0:a.type)))){a=a.next;continue}const i=a.type===e;if(void 0!==r?i&&a.value===r:i)return n;a.isWhiteSpace()||n.push(a),a=a.next}return n}getPreviousKeyword(){let e=this.previous;for(;null!=e;){if(e.isKeyword())return e;e=e.previous}return null}getNextNonWhiteSpaceToken(){let e=this.next;for(;null!=e;){if(!e.isWhiteSpace())return e;e=e.next}return null}getNextOfType(e,t){let r=this.next;for(;null!=r;){const n=r.type===e;if(void 0!==t?n&&r.value===t:n)return r;r=r.next}return null}constructor(e,t,r,n,a,i){Rt(this,"type",void 0),Rt(this,"value",void 0),Rt(this,"range",void 0),Rt(this,"previous",void 0),Rt(this,"next",void 0),Rt(this,"tokenTypes",void 0),this.type=e,this.value=t,this.range=r,this.previous=n,this.next=a,this.tokenTypes=i}}var $t=function(e){return e[e.Unknown=0]="Unknown",e[e.NewCommand=1]="NewCommand",e[e.FunctionArg=2]="FunctionArg",e[e.BeforeLogicalExpression=3]="BeforeLogicalExpression",e[e.AfterArithmeticOperator=4]="AfterArithmeticOperator",e[e.AfterINKeyword=5]="AfterINKeyword",e[e.SortField=6]="SortField",e[e.AfterHeadCommand=7]="AfterHeadCommand",e[e.AfterFieldsCommand=8]="AfterFieldsCommand",e[e.FieldList=9]="FieldList",e[e.AfterDedupFieldNames=10]="AfterDedupFieldNames",e[e.AfterStatsCommand=11]="AfterStatsCommand",e[e.StatsFunctionArgument=12]="StatsFunctionArgument",e[e.AfterStatsBy=13]="AfterStatsBy",e[e.AfterBooleanArgument=14]="AfterBooleanArgument",e[e.EvalClause=15]="EvalClause",e[e.Expression=16]="Expression",e[e.SortFieldExpression=17]="SortFieldExpression",e[e.AfterSearchCommand=18]="AfterSearchCommand",e[e.AfterRareCommand=19]="AfterRareCommand",e[e.AfterTopCommand=20]="AfterTopCommand",e[e.AfterEventStatsCommand=21]="AfterEventStatsCommand",e[e.AfterJoinCommand=22]="AfterJoinCommand",e[e.AfterJoinType=23]="AfterJoinType",e[e.AfterJoinMethods=24]="AfterJoinMethods",e[e.JoinCriteria=25]="JoinCriteria",e[e.BeforeAsClause=26]="BeforeAsClause",e[e.AfterPatternsCommand=27]="AfterPatternsCommand",e[e.AfterPatternMethod=28]="AfterPatternMethod",e[e.AfterPatternMode=29]="AfterPatternMode",e[e.PatternsArguments=30]="PatternsArguments",e[e.AfterLookupTableSource=31]="AfterLookupTableSource",e[e.AfterLookupMappingList=32]="AfterLookupMappingList",e[e.AfterFillNullCommand=33]="AfterFillNullCommand",e[e.AfterFillNullWith=34]="AfterFillNullWith",e[e.BeforeValueExpression=35]="BeforeValueExpression",e[e.BeforeFieldExpression=36]="BeforeFieldExpression",e[e.AfterTrendlineCommand=37]="AfterTrendlineCommand",e[e.TrendlineClause=38]="TrendlineClause",e[e.AfterAppendColCommand=39]="AfterAppendColCommand",e[e.AfterKmeansCommand=40]="AfterKmeansCommand",e[e.AfterAdCommand=41]="AfterAdCommand",e}({}),xt=function(e){return e[e.BooleanFunction=0]="BooleanFunction",e[e.LogicalExpression=1]="LogicalExpression",e[e.ValueExpression=2]="ValueExpression",e[e.FieldOperators=3]="FieldOperators",e[e.Field=4]="Field",e[e.BooleanLiteral=5]="BooleanLiteral",e[e.DedupParameter=6]="DedupParameter",e[e.StatsParameter=7]="StatsParameter",e[e.BooleanArgument=8]="BooleanArgument",e[e.StatsFunctions=9]="StatsFunctions",e[e.SpanClause=10]="SpanClause",e[e.SortFunctions=11]="SortFunctions",e[e.FromClause=12]="FromClause",e[e.Command=13]="Command",e[e.FromKeyword=14]="FromKeyword",e[e.LogicalOperators=15]="LogicalOperators",e[e.InKeyword=16]="InKeyword",e[e.TopRareParameters=17]="TopRareParameters",e[e.TakeFunction=18]="TakeFunction",e[e.WindowFunctions=19]="WindowFunctions",e[e.JoinHintList=20]="JoinHintList",e[e.JoinCriteria=21]="JoinCriteria",e[e.JoinMethods=22]="JoinMethods",e[e.SideAlias=23]="SideAlias",e[e.JoinCommand=24]="JoinCommand",e[e.PatternsParameter=25]="PatternsParameter",e[e.ByKeyword=26]="ByKeyword",e[e.PatternsArguments=27]="PatternsArguments",e[e.PatternMethods=28]="PatternMethods",e[e.PatternModes=29]="PatternModes",e[e.LookupArgument=30]="LookupArgument",e[e.KmeansParameter=31]="KmeansParameter",e[e.AdParameter=32]="AdParameter",e[e.FillNullParameter=33]="FillNullParameter",e[e.TrendlineType=34]="TrendlineType",e[e.SortCommand=35]="SortCommand",e[e.Override=36]="Override",e[e.AsKeyword=37]="AsKeyword",e}({}),Lt=function(e){return e.High="a",e.MediumHigh="d",e.Medium="g",e.MediumLow="k",e.Low="q",e}({}),_t=p(5968);const Ct={Parenthesis:`delimiter.parenthesis.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Whitespace:`white.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Keyword:`keyword.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Command:`keyword.command.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Delimiter:`delimiter.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Pipe:`delimiter.pipe.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Operator:`operator.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Identifier:`identifier.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Type:`type.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Function:`predefined.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Number:`number.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,String:`string.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Variable:`variable.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Comment:`comment.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Regexp:`regexp.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`,Backtick:`string.backtick.${_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID}`};function Dt(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ft{getStatementPosition(e){return $t.Unknown}getSuggestionKinds(e){return[]}getSuggestions(e,t,r,n,a){return Promise.reject([])}getCompletionProvider(e,t){const r=t.id===_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID;return{triggerCharacters:[" ","$",",","(","'"].concat(r?["`"]:[]),provideCompletionItems:(r,n)=>function(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Dt(i,n,a,o,s,"next",e)}function s(e){Dt(i,n,a,o,s,"throw",e)}o(void 0)}))}}((function*(){const a=function(e,t,r,n,a){let i=null,o=null;var s;const l=e.editor.tokenize(null!==(s=r.getValue())&&void 0!==s?s:"",t.id);for(let s=0;s<l.length;s++){const u=l[s];if(!u.length&&o){const e={offset:0,type:a.Whitespace,language:t.id,_tokenBrand:void 0};u.push(e)}for(let t=0;t<u.length;t++){const l=u[t];let c=u.length>t+1?u[t+1].offset+1:r.getLineLength(s+1)+1;const d={startLineNumber:s+1,startColumn:0===l.offset?0:l.offset+1,endLineNumber:s+1,endColumn:c},p=r.getValueInRange(d),m=new Nt(l.type,p,d,o,null,a);e.Range.containsPosition(d,n)&&(i=m),o&&(o.next=m),o=m}}return i}(e,t,r,n,this.tokenTypes),i=this.getStatementPosition(a),o=this.getSuggestionKinds(i);return{suggestions:yield this.getSuggestions(e,a,o,i,n)}})).call(this)}}constructor(e=(0,ie.getTemplateSrv)()){jt(this,"templateSrv",void 0),jt(this,"tokenTypes",void 0),this.templateSrv=e,this.tokenTypes=Ct}}const kt={id:"editor.action.triggerSuggest",title:""},Mt=e=>{var t;const r=null==e?void 0:e.getPreviousNonWhiteSpaceToken(),n=null==e?void 0:e.getNextNonWhiteSpaceToken(),a=null==r||null===(t=r.value)||void 0===t?void 0:t.toLowerCase();if(null===e||(null==e?void 0:e.isWhiteSpace())&&null===r&&null===n||(null==r?void 0:r.is(Ct.Pipe))&&(null==e?void 0:e.isWhiteSpace())||(null==r?void 0:r.is(Ct.Delimiter,"|")))return $t.NewCommand;switch(a){case _t.SEARCH:return $t.AfterSearchCommand;case _t.WHERE:return $t.BeforeLogicalExpression;case _t.DEDUP:return $t.FieldList;case _t.FIELDS:return $t.AfterFieldsCommand;case _t.EVENTSTATS:return $t.AfterEventStatsCommand;case _t.STATS:return $t.AfterStatsCommand;case _t.SORT:return $t.SortField;case _t.PARSE:return $t.Expression}if((null==e?void 0:e.isWhiteSpace())||(null==e?void 0:e.is(Ct.Backtick))||(null==e?void 0:e.is(Ct.Delimiter,","))||(null==e?void 0:e.is(Ct.Parenthesis))){var i,o,s;const t=null==e||null===(i=e.getPreviousOfType(Ct.Function))||void 0===i?void 0:i.value.toLowerCase(),n=null==e||null===(o=e.getPreviousOfType(Ct.Keyword))||void 0===o?void 0:o.value.toLowerCase(),c=qt(e);if(a){if(c!==_t.FIELDS&&c!==_t.SORT&&_t.ARITHMETIC_OPERATORS.includes(a))return $t.AfterArithmeticOperator;if(_t.PARAMETERS_WITH_BOOLEAN_VALUES.includes(a))return $t.AfterBooleanArgument}const d=a&&(_t.COMPARISON_OPERATORS.includes(a)||_t.LOGICAL_EXPRESSION_OPERATORS.includes(a))||(null==r?void 0:r.is(Ct.Regexp))||a===_t.NOT||t&&_t.CONDITION_FUNCTIONS.includes(t)&&")"===a;if(Gt(c)&&(Ut(e)||(null==e?void 0:e.is(Ct.Backtick))))return $t.FieldList;if(Bt(c)&&d)return $t.BeforeLogicalExpression;if(n){if(_t.JOIN_METHODS.includes(n)&&a!==_t.JOIN&&!(null==r?void 0:r.is(Ct.Identifier)))return $t.AfterJoinMethods;switch(n){case _t.INDEX:case _t.SOURCE:return $t.BeforeLogicalExpression;case _t.IN:if(c!==_t.FILLNULL)return $t.AfterINKeyword;break;case _t.BETWEEN:return $t.FunctionArg;case _t.LEFT:case _t.RIGHT:if(!c)return $t.AfterJoinType}}if(t&&((null==e?void 0:e.is(Ct.Parenthesis))||")"===(null==e||null===(s=e.getNextNonWhiteSpaceToken())||void 0===s?void 0:s.value))){if(c!==_t.PATTERNS&&[..._t.EVAL_FUNCTIONS,..._t.CONDITION_FUNCTIONS].includes(t))return $t.FunctionArg;if(_t.STATS_FUNCTIONS.includes(t))return $t.StatsFunctionArgument;if(_t.SORT_FIELD_FUNCTIONS.includes(t))return $t.SortFieldExpression}switch(c){case _t.SORT:if(r){if(r.is(Ct.Delimiter,","))return $t.SortField;if(_t.FIELD_OPERATORS.includes(r.value))return $t.SortFieldExpression}break;case _t.DEDUP:{const t=e.getPreviousUntil(Ct.Number,[Ct.Delimiter,Ct.Whitespace]);return(null==t?void 0:t.length)&&!Vt(t)?$t.AfterDedupFieldNames:$t.FieldList}case _t.FIELDS:return $t.FieldList;case _t.STATS:case _t.EVENTSTATS:return n===_t.BY&&e.isWhiteSpace()?$t.AfterStatsBy:t===_t.SPAN&&(null==e?void 0:e.is(Ct.Parenthesis))?$t.FieldList:$t.AfterStatsCommand;case _t.RARE:return $t.AfterRareCommand;case _t.TOP:return $t.AfterTopCommand;case _t.HEAD:return $t.AfterHeadCommand;case _t.EVAL:if("="===(null==r?void 0:r.value))return $t.BeforeLogicalExpression;if((null==e?void 0:e.isWhiteSpace())&&(a===_t.EVAL||(null==r?void 0:r.is(Ct.Delimiter,","))))return $t.EvalClause;if(d)return $t.BeforeLogicalExpression;break;case _t.JOIN:return a===_t.ON?$t.JoinCriteria:$t.AfterJoinCommand;case _t.RENAME:if(null==r?void 0:r.is(Ct.Identifier))return $t.BeforeAsClause;if(a!==_t.AS)return $t.FieldList;break;case _t.GROK:if(null==r?void 0:r.is(Ct.Command,_t.GROK))return $t.FieldList;break;case _t.PATTERNS:{if(null==r?void 0:r.is(Ct.Command,_t.PATTERNS))return $t.AfterPatternsCommand;const e=null==r?void 0:r.getPreviousNonWhiteSpaceToken();return(null==r?void 0:r.is(Ct.Operator,"="))&&(null==e?void 0:e.is(Ct.Identifier))?$t.Expression:(null==r?void 0:r.is(Ct.Keyword,_t.BY))?$t.AfterStatsBy:(null==e?void 0:e.is(Ct.Keyword,_t.METHOD))?$t.AfterPatternMethod:(null==e?void 0:e.is(Ct.Keyword,_t.MODE))?$t.AfterPatternMode:(null==r?void 0:r.is(Ct.Operator,"="))&&e&&_t.PATTERNS_PARAMETER_LITERAL.includes(null==e?void 0:e.value)?$t.Unknown:$t.PatternsArguments}case _t.LOOKUP:var l;const i=null==r||null===(l=r.getPreviousNonWhiteSpaceToken())||void 0===l?void 0:l.value.toLowerCase();return(null==r?void 0:r.is(Ct.Command,_t.LOOKUP))?$t.Unknown:i===_t.LOOKUP?$t.AfterLookupTableSource:(null==r?void 0:r.is(Ct.Delimiter,","))||a&&[_t.APPEND,_t.REPLACE,_t.AS].includes(a)?$t.FieldList:$t.AfterLookupMappingList;case _t.KMEANS:if(!(null==r?void 0:r.is(Ct.Operator,"=")))return $t.AfterKmeansCommand;break;case _t.AD:if(!(null==r?void 0:r.is(Ct.Operator,"=")))return $t.AfterAdCommand;break;case _t.FILLNULL:if(null==r?void 0:r.is(Ct.Command,_t.FILLNULL))return $t.AfterFillNullCommand;if((null==r?void 0:r.is(Ct.Keyword,_t.IN))||(null==e?void 0:e.is(Ct.Keyword,_t.IN)))return $t.FieldList;if(n===_t.WITH)return $t.AfterFillNullWith;if(n===_t.USING)return(null==e?void 0:e.is(Ct.Operator,"="))||(null==r?void 0:r.is(Ct.Operator,"="))?$t.BeforeValueExpression:$t.BeforeFieldExpression;break;case _t.TRENDLINE:var u;if(!(null==r?void 0:r.is(Ct.Keyword,_t.AS)))return(null==r?void 0:r.is(Ct.Command,_t.TRENDLINE))?$t.AfterTrendlineCommand:(null==r?void 0:r.is(Ct.Command,_t.SORT))?$t.SortField:(null==r?void 0:r.is(Ct.Delimiter,","))&&(null==r||null===(u=r.getPreviousNonWhiteSpaceToken())||void 0===u?void 0:u.is(Ct.Number))?$t.BeforeFieldExpression:$t.TrendlineClause;break;case _t.APPENDCOL:return(null==r?void 0:r.is(Ct.Parenthesis,"[]"))||(null==e?void 0:e.is(Ct.Parenthesis,"["))?$t.NewCommand:$t.AfterAppendColCommand;case _t.EXPAND:case _t.FLATTEN:return $t.BeforeFieldExpression;case _t.REVERSE:return $t.Unknown}}return $t.Unknown},Vt=e=>null==e?void 0:e.some((e=>e.type===Ct.Pipe)),Ut=e=>{var t,r;const n=null==e?void 0:e.getPreviousUntil(Ct.Identifier,[Ct.Whitespace]),a=null==e?void 0:e.getPreviousUntil(Ct.Backtick,[Ct.Whitespace]),i=(null==n?void 0:n.length)&&n.every((e=>e.is(Ct.Delimiter,",")))||(null==a?void 0:a.length)&&a.every((e=>e.is(Ct.Delimiter,","))),o=(null==e?void 0:e.isWhiteSpace())&&(null==e||null===(t=e.getPreviousNonWhiteSpaceToken())||void 0===t?void 0:t.is(Ct.Delimiter,",")),s=")"===(null==e||null===(r=e.getNextNonWhiteSpaceToken())||void 0===r?void 0:r.value);return o&&i&&!s},qt=e=>{const t=null==e?void 0:e.getPreviousOfType(Ct.Command);if((null==t?void 0:t.value.toLowerCase())===_t.SORT){var r;if((null==t||null===(r=t.getPreviousOfType(Ct.Command))||void 0===r?void 0:r.value.toLowerCase())===_t.TRENDLINE)return _t.TRENDLINE.toLowerCase()}var n;return null!==(n=null==t?void 0:t.value.toLowerCase())&&void 0!==n?n:null},Bt=e=>e!==_t.KMEANS&&e!==_t.AD&&e!==_t.PATTERNS&&e!==_t.FILLNULL&&e!==_t.EVAL&&e!==_t.JOIN&&e!==_t.APPENDCOL,Gt=e=>e!==_t.PATTERNS&&e!==_t.FLATTEN&&e!==_t.SORT&&e!==_t.STATS&&e!==_t.EVAL;function Ht(e){switch(e){case $t.NewCommand:return[xt.Command];case $t.AfterHeadCommand:return[xt.FromKeyword];case $t.AfterEventStatsCommand:return[xt.WindowFunctions];case $t.AfterStatsCommand:return[xt.StatsParameter,xt.StatsFunctions,xt.TakeFunction];case $t.SortField:return[xt.FieldOperators,xt.Field,xt.SortFunctions];case $t.EvalClause:case $t.StatsFunctionArgument:return[xt.Field];case $t.AfterFieldsCommand:return[xt.FieldOperators,xt.Field];case $t.AfterRareCommand:case $t.AfterTopCommand:return[xt.Field,xt.TopRareParameters];case $t.FieldList:return[xt.Field];case $t.AfterBooleanArgument:return[xt.BooleanLiteral];case $t.AfterDedupFieldNames:return[xt.DedupParameter];case $t.AfterStatsBy:return[xt.Field,xt.SpanClause];case $t.SortFieldExpression:return[xt.Field,xt.SortFunctions];case $t.FunctionArg:case $t.AfterArithmeticOperator:case $t.AfterINKeyword:return[xt.ValueExpression];case $t.Expression:case $t.BeforeLogicalExpression:case $t.JoinCriteria:return[xt.LogicalExpression,xt.ValueExpression];case $t.AfterJoinMethods:return[xt.JoinCommand];case $t.AfterJoinType:return[xt.JoinMethods];case $t.AfterSearchCommand:return[xt.LogicalExpression,xt.FromClause,xt.ValueExpression];case $t.AfterJoinCommand:return[xt.SideAlias,xt.JoinHintList];case $t.BeforeAsClause:return[xt.AsKeyword];case $t.AfterPatternsCommand:return[xt.ByKeyword,xt.PatternsParameter,xt.Field];case $t.PatternsArguments:return[xt.ByKeyword,xt.PatternsParameter];case $t.AfterPatternMethod:return[xt.PatternMethods];case $t.AfterPatternMode:return[xt.PatternModes];case $t.AfterLookupTableSource:return[xt.Field];case $t.AfterLookupMappingList:return[xt.LookupArgument];case $t.AfterKmeansCommand:return[xt.KmeansParameter];case $t.AfterAdCommand:return[xt.AdParameter];case $t.AfterFillNullCommand:return[xt.FillNullParameter];case $t.AfterFillNullWith:return[xt.ValueExpression,xt.InKeyword];case $t.BeforeValueExpression:return[xt.ValueExpression];case $t.BeforeFieldExpression:return[xt.Field];case $t.AfterTrendlineCommand:return[xt.TrendlineType,xt.SortCommand];case $t.TrendlineClause:return[xt.TrendlineType];case $t.AfterAppendColCommand:return[xt.Override]}return[]}function Wt(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Kt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Wt(i,n,a,o,s,"next",e)}function s(e){Wt(i,n,a,o,s,"throw",e)}o(void 0)}))}}function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Qt extends Ft{getSuggestions(e,t,r,n,a){return Kt((function*(){const n=[],i=(null==t?void 0:t.isWhiteSpace())||(null==t?void 0:t.isParenthesis())||(null==t?void 0:t.is(Ct.Backtick))||!(null==t?void 0:t.range)?e.Range.fromPositions(a):null==t?void 0:t.range;function o(t,r={}){const n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){zt(e,t,r[t])}))}return e}({label:t,insertText:t,kind:e.languages.CompletionItemKind.Field,range:i,sortText:Lt.Medium},r);return n}function s(e,t={}){n.push(o(e,t))}for(const n of r)switch(n){case xt.Command:_t.PPL_COMMANDS.forEach((t=>{s(t,{insertText:`${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Method,command:kt})}));break;case xt.FromClause:[_t.SOURCE,_t.INDEX].forEach((t=>{s(t,{insertText:`${t} = $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt})}));break;case xt.LogicalExpression:_t.CONDITION_FUNCTIONS.forEach((t=>{s(t,{insertText:`${t}($0)`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Function,command:kt})})),s(_t.NOT,{insertText:`${_t.NOT} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Operator,command:kt});break;case xt.ValueExpression:_t.EVAL_FUNCTIONS.forEach((t=>{s(t,{insertText:`${t}($0)`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Function,command:kt})})),yield this.addFieldSuggestions(s,e,i,t);break;case xt.FieldOperators:_t.FIELD_OPERATORS.forEach((t=>{s(t,{insertText:`${t}$0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Operator,command:kt})}));break;case xt.BooleanLiteral:_t.BOOLEAN_LITERALS.forEach((t=>s(`= ${t}`,{insertText:`= ${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Value,command:kt})));break;case xt.DedupParameter:_t.DEDUP_PARAMETERS.forEach((t=>s(t,{insertText:`${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Property,command:kt})));break;case xt.StatsParameter:_t.STATS_PARAMETERS.forEach((t=>{s(t,{insertText:`${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Property,command:kt})}));break;case xt.StatsFunctions:_t.STATS_FUNCTIONS.forEach((t=>{s(t,{insertText:`${t}($0)`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Function,command:kt})}));break;case xt.WindowFunctions:_t.WINDOW_STATS_FUNCTIONS.forEach((t=>{s(t,{insertText:`${t}($0)`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Function,command:kt})}));break;case xt.TakeFunction:s(_t.TAKE,{insertText:`${_t.TAKE}($0)`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Function,command:kt});break;case xt.LogicalOperators:_t.LOGICAL_EXPRESSION_OPERATORS.forEach((t=>{s(t,{insertText:`${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Operator,command:kt})}));break;case xt.InKeyword:s(_t.IN,{insertText:`${_t.IN} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt});break;case xt.SpanClause:s(_t.SPAN,{insertText:`${_t.SPAN}($0)`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Function,command:kt});break;case xt.Field:yield this.addFieldSuggestions(s,e,i,t);break;case xt.FromKeyword:s(_t.FROM,{insertText:`${_t.FROM} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt});break;case xt.SortFunctions:_t.SORT_FIELD_FUNCTIONS.forEach((t=>{s(t,{insertText:`${t}($0)`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Function,command:kt})}));break;case xt.TopRareParameters:[_t.COUNTFIELD,_t.SHOWCOUNT].forEach((t=>{s(t,{insertText:`${t} =  $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Property,command:kt})}));break;case xt.JoinCriteria:s(_t.ON,{insertText:`${_t.ON} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt});break;case xt.JoinCommand:s(_t.JOIN,{insertText:`${_t.JOIN} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Method,command:kt});break;case xt.JoinMethods:_t.JOIN_METHODS.forEach((t=>{s(t,{insertText:`${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt})}));break;case xt.SideAlias:[_t.LEFT,_t.RIGHT].forEach((t=>{s(t,{insertText:`${t} = $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt})}));case xt.JoinHintList:[_t.LEFT_HINT,_t.RIGHT_HINT].forEach((t=>{s(t,{insertText:`${t}.$0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt})}));break;case xt.AsKeyword:s(_t.AS,{insertText:`${_t.AS} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt});break;case xt.PatternsParameter:_t.PATTERNS_PARAMETERS.forEach((t=>{t===_t.PATTERN?s(t,{insertText:`(${t} = $0)`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Property,command:kt}):s(t,{insertText:`${t} = $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Property,command:kt})}));break;case xt.ByKeyword:s(_t.BY,{insertText:`${_t.BY} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt});break;case xt.PatternMethods:_t.PATTERN_METHODS.forEach((t=>{s(t,{insertText:`${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Property,command:kt})}));break;case xt.PatternModes:_t.PATTERN_MODES.forEach((t=>{s(t,{insertText:`${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Property,command:kt})}));break;case xt.LookupArgument:[_t.APPEND,_t.REPLACE].forEach((t=>{s(t,{insertText:`${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt})}));break;case xt.KmeansParameter:_t.KMEANS_PARAMETERS.forEach((t=>{s(t,{insertText:`${t} = $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt})}));break;case xt.AdParameter:_t.AD_PARAMETERS.forEach((t=>{s(t,{insertText:`${t} = $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt})}));break;case xt.FillNullParameter:_t.FILLNULL_PARAMETERS.forEach((t=>{s(t,{insertText:`${t} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt})}));break;case xt.TrendlineType:_t.TRENDLINE_TYPE.forEach((t=>{s(t,{insertText:`${t} ($0)`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Property,command:kt})}));break;case xt.SortCommand:s(_t.SORT,{insertText:`${_t.SORT} $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Keyword,command:kt});break;case xt.Override:s(_t.OVERRIDE,{insertText:`${_t.OVERRIDE} = $0`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,kind:e.languages.CompletionItemKind.Property,command:kt})}return this.templateSrv.getVariables().map((t=>{const r=`$${t.name}`;s(r,{range:i,label:r,insertText:r,kind:e.languages.CompletionItemKind.Variable,sortText:Lt.Low})})),n})).call(this)}addFieldSuggestions(e,t,r,n){return Kt((function*(){try{(yield this.getFields()).forEach((n=>{n.text&&e(n.text,{range:r,label:n.text,insertText:n.text,kind:t.languages.CompletionItemKind.Field,sortText:Lt.High})}))}catch(e){return}})).call(this)}constructor(e){super(),zt(this,"getFields",void 0),this.getFields=e,this.getStatementPosition=Mt,this.getSuggestionKinds=Ht,this.tokenTypes=Ct}}function Xt(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Yt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Xt(i,n,a,o,s,"next",e)}function s(e){Xt(i,n,a,o,s,"throw",e)}o(void 0)}))}}function Jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Jt(e,t,r[t])}))}return e}function er(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const tr=["_index","_type","_id","_source","_size","_field_names","_ignored","_routing","_meta"];class rr extends ie.DataSourceWithBackend{getLogsVolumeDataProvider(e){const t=a().cloneDeep(e),n=t.targets.map((e=>this.getSupplementaryQuery({type:r.SupplementaryQueryType.LogsVolume},e))).filter((e=>!!e));if(n.length)return er(Zt({},t),{targets:n})}getSupplementaryRequest(e,t){if(e===r.SupplementaryQueryType.LogsVolume)return this.getLogsVolumeDataProvider(t)}getSupportedSupplementaryQueryTypes(){return[r.SupplementaryQueryType.LogsVolume]}getSupplementaryQuery(e,t){if(t.hide)return;let n=!1;if(e.type===r.SupplementaryQueryType.LogsVolume){var a;if(n=!(1!==(null===(a=t.metrics)||void 0===a?void 0:a.length)||"logs"!==t.metrics[0].type),!n)return;const e=[];var i;const o=null!==(i=this.timeField)&&void 0!==i?i:"@timestamp";return this.logLevelField&&e.push({id:"2",type:"terms",settings:{min_doc_count:"0",size:"0",order:"desc",orderBy:"_count",missing:r.LogLevel.unknown},field:this.logLevelField}),e.push({id:"3",type:"date_histogram",settings:{interval:"auto",min_doc_count:"0",trimEdges:"0"},field:o}),{refId:`log-volume-${t.refId}`,query:t.query,metrics:[{type:"count",id:"1"}],timeField:o,bucketAggs:e}}}get(e,t=(0,r.getDefaultTimeRange)()){const n=this.indexPattern.getIndexList(t.from,t.to);let i;if(a().isArray(n)&&n.length)i=this.requestAllIndices(n,e);else{const t=this.indexPattern.getIndexForToday()+e;i=this.getResourceRequest(t)}return i.then((e=>e))}requestAllIndices(e,t){return Yt((function*(){const r=e.length;for(let n=0;n<Math.min(r,7);n++){const a=e[r-n-1]+t;try{return yield this.getResourceRequest(a)}catch(e){if(404!==e.status||6===n)throw e}}})).call(this)}getResourceRequest(e,t,r){return this.getResource(e,t,r)}postResourceRequest(e,t,r){return Yt((function*(){const n=null!=r?r:{};var a;return n.headers=null!==(a=n.headers)&&void 0!==a?a:{},n.headers["content-type"]="application/x-ndjson",this.sigV4Auth&&t&&(n.headers["x-amz-content-sha256"]=yield pe(t)),this.postResource(e,t,n)})).call(this)}annotationQuery(e){const t=this.prepareAnnotationRequest(e);return this.postResourceRequest("_msearch",t).then((t=>{var r;const n=null!==(r=t.responses[0].hits.hits)&&void 0!==r?r:[];return this.processHitsToAnnotationEvents(e.annotation,n)}),(e=>{throw new Error("Error querying annotations: "+e)}))}prepareAnnotationRequest(e){const t=e.annotation,r=t.timeField||"@timestamp",n=t.timeEndField||null,a=t.query||t.target.query,i=[],o={};if(o[r]={from:e.range.from.valueOf(),to:e.range.to.valueOf(),format:"epoch_millis"},i.push({range:o}),n){const t={};t[n]={from:e.range.from.valueOf(),to:e.range.to.valueOf(),format:"epoch_millis"},i.push({range:t})}const s={query:{bool:{filter:[{bool:{should:i,minimum_should_match:1}},{query_string:{query:(0,ie.getTemplateSrv)().replace(a,{},"lucene")}}]}},size:1e4};this.flavor===H.Elasticsearch&&(0,B.lt)(this.version,"5.0.0")&&(s.fields=[r,"_source"]);const l={search_type:"query_then_fetch",ignore_unavailable:!0};return t.index?l.index=t.index:l.index=this.indexPattern.getIndexList(e.range.from,e.range.to),JSON.stringify(l)+"\n"+JSON.stringify(s)+"\n"}processHitsToAnnotationEvents(e,t){const n=e.timeField||"@timestamp",i=e.timeEndField||null,o=e.tagsField||"tags",s=e.textField||null,l=[],u=(e,t)=>{if(!t)return;const r=t.split(".");let n=e;for(let e=0;e<r.length;e++)if(n=n[r[e]],!n)return"";return n};for(let c=0;c<t.length;c++){const d=t[c]._source;let p=u(d,n);if(void 0!==t[c].fields){const e=t[c].fields;(a().isString(e[n])||a().isNumber(e[n]))&&(p=e[n])}const m={annotation:e,time:(0,r.toUtc)(p).valueOf(),text:u(d,s)};if(i){const e=u(d,i);e&&(m.timeEnd=(0,r.toUtc)(e).valueOf())}if(e.titleField){const t=u(d,e.titleField);t&&(m.text=t+"\n"+m.text)}let f=u(d,o);"string"==typeof f&&(f=f.split(",")),m.tags=f,l.push(m)}return l}toggleQueryFilter(e,t){return e.queryType===G.Lucene?er(Zt({},e),{query:Pt(e.query||"",t)}):er(Zt({},e),{query:Tt(e.query||"",t)})}queryHasFilter(e,t){if(e.queryType===G.PPL){const r={key:t.key,value:t.value,operator:"FILTER_FOR"===t.type?"=":"!="};return At(e.query||"",r)}return ut(e.query||"",t.key,t.value)}interpolateLuceneQuery(e,t){return this.templateSrv.replace(e,t,"lucene")}interpolatePPLQuery(e,t){return this.templateSrv.replace(e,t,"csv")}interpolateVariablesInQueries(e,t,r){return e.map((e=>this.applyTemplateVariables(e,t,r)))}applyTemplateVariables(e,t,r){let n;n=e.queryType===G.PPL?this.interpolatePPLQuery(e.query||"",t):this.interpolateLuceneQuery(e.query||"*",t);for(let r of e.bucketAggs||[]){var a;if("filters"===r.type)for(let e of(null===(a=r.settings)||void 0===a?void 0:a.filters)||[])e.query=this.interpolateLuceneQuery(e.query,t)||"*"}const i=(null==r?void 0:r.length)?this.addAdHocFilters(er(Zt({},e),{query:n}),r):n;return JSON.parse(this.templateSrv.replace(JSON.stringify(er(Zt({},e),{query:i})),t))}addAdHocFilters(e,t){if(e.queryType===G.PPL){let r=e.query||"";return t.forEach(((e,t)=>{r=wt(r,e,t)})),r}var r;let n=null!==(r=e.query)&&void 0!==r?r:"";return t.forEach((e=>{n=function(e,t){if(!t.key||!t.value)return e;if(t=st(ot({},t),{value:t.value.toString()}),["=","!="].includes(t.operator))return lt(e,t.key,t.value,"="===t.operator?"":"-");const r=ht(t.key),n=gt(t.value);let a="";switch(t.operator){case"=~":a=`${r}:/${n}/`;break;case"!~":a=`-${r}:/${n}/`;break;case">":a=`${r}:>${n}`;break;case"<":a=`${r}:<${n}`}return ct(e,a)}(n,e)})),n||"*"}testDatasource(){return this.flavor&&(0,B.valid)(this.version)?this.getFields("date").then((e=>a().find(e,{text:this.timeField})?{status:"success",message:"Index OK. Time field name OK."}:{status:"success",message:"Index OK. Note: No date field named "+this.timeField+" found"}),(e=>e.message?Promise.reject({status:"error",message:e.message,error:new ie.HealthCheckError(e.message,{})}):e.data.message?Promise.reject({status:"error",message:e.data.message,error:new ie.HealthCheckError(e.data.message,{})}):Promise.reject({status:"error",message:e.status,error:new ie.HealthCheckError(e.status,{})}))):Promise.reject({status:"error",message:"No version set",error:new ie.HealthCheckError("No version set",{})})}getQueryHeader(e,t,r){const n={search_type:e,ignore_unavailable:!0,index:this.indexPattern.getIndexList(t,r)};return this.flavor===H.Elasticsearch&&(0,B.satisfies)(this.version,">=5.6.0 <7.0.0")&&(n.max_concurrent_shard_requests=this.maxConcurrentShardRequests),JSON.stringify(n)}getQueryDisplayText(e){const t=e.metrics,r=e.bucketAggs;let n="";return e.query&&(n+="Query: "+e.query+", "),n+="Metrics: ",n+=null==t?void 0:t.reduce(((e,t)=>{let r=K[t.type].label+"(";var n,a;(X(t)&&(r+=t.field),J(t))&&(r+=null===(a=t.settings)||void 0===a||null===(n=a.script)||void 0===n?void 0:n.replace(new RegExp("params.","g"),""));return r+="), ",`${e} ${r}`}),""),n+=null==r?void 0:r.reduce(((e,t,r)=>{let n="";return 0===r&&(n+=" Group by: "),n+=Ee[t.type].label+"(",Pe(t)&&(n+=t.field),`${e} ${n}), `}),""),e.alias&&(n+="Alias: "+e.alias),n}query(e){return super.query(e).pipe((n={next:t=>{je(t,e.targets,e.app)},error:t=>{je({error:t,data:[]},e.targets,e.app)}},(l=i(n)||a||s?{next:n,error:a,complete:s}:n)?o((function(e,t){var r;null===(r=l.subscribe)||void 0===r||r.call(l);var n=!0;e.subscribe(F(t,(function(e){var r;null===(r=l.next)||void 0===r||r.call(l,e),t.next(e)}),(function(){var e;n=!1,null===(e=l.complete)||void 0===e||e.call(l),t.complete()}),(function(e){var r;n=!1,null===(r=l.error)||void 0===r||r.call(l,e),t.error(e)}),(function(){var e,t;n&&(null===(e=l.unsubscribe)||void 0===e||e.call(l)),null===(t=l.finalize)||void 0===t||t.call(l)})))})):M),(t=e=>me(e,this.dataLinks,this.uid,this.name,this.type),o((function(e,n){var a=0;e.subscribe(F(n,(function(e){n.next(t.call(r,e,a++))})))}))));var t,r,n,a,s,l}getOpenSearchVersion(){return Yt((function*(){return this.getResourceRequest("").then((e=>{var t;const r={flavor:"opensearch"===e.version.distribution?H.OpenSearch:H.Elasticsearch,version:e.version.number};if(r.label=`${(null===(t=nt.find((e=>e.value===r.flavor)))||void 0===t?void 0:t.label)||r.flavor} ${r.version}`,r.flavor===H.Elasticsearch&&(0,B.gte)(r.version,"7.11.0"))throw new Error("ElasticSearch version "+r.version+" is not supported by the OpenSearch plugin. Use the ElasticSearch plugin.");return r.flavor===H.Elasticsearch&&"7.10.2"===r.version&&"The OpenSearch Project: https://opensearch.org/"===e.tagline&&(r.flavor=H.OpenSearch,r.version="1.0.0",r.label="OpenSearch (compatibility mode)"),r}),(()=>{throw new Error("Failed to connect to server")}))})).call(this)}isMetadataField(e){return tr.includes(e)}getTerms(e,t=(0,r.getDefaultTimeRange)(),n=!1){const i=this.flavor===H.Elasticsearch&&(0,B.lt)(this.version,"5.0.0")?"count":"query_then_fetch",o=this.getQueryHeader(i,t.from,t.to);let s=JSON.stringify(this.queryBuilder.getTermsQuery(e));s=s.replace(/\$timeFrom/g,t.from.valueOf().toString()),s=s.replace(/\$timeTo/g,t.to.valueOf().toString()),s=o+"\n"+s+"\n";const l=this.getMultiSearchUrl();return this.postResourceRequest(l,s).then((e=>{if(!e.responses[0].aggregations)return[];const t=e.responses[0].aggregations[1].buckets;return a().map(t,(e=>{const t=String(e.key);return{text:e.key_as_string||t,value:n?t:e.key}}))}))}getMultiSearchUrl(){return this.maxConcurrentShardRequests&&(this.flavor===H.Elasticsearch&&(0,B.gte)(this.version,"7.0.0")||this.flavor===H.OpenSearch)?`_msearch?max_concurrent_shard_requests=${this.maxConcurrentShardRequests}`:"_msearch"}getPPLUrl(){return"_opendistro/_ppl"}metricFindQuery(e,t){const r=null==t?void 0:t.range,n=JSON.parse(e);if(e){if("fields"===n.find)return n.type=(0,ie.getTemplateSrv)().replace(n.type,{},"lucene"),this.getFields(n.type,r);if("terms"===n.find)return n.field&&(n.field=(0,ie.getTemplateSrv)().replace(n.field,{},"lucene")),n.script&&(n.script=(0,ie.getTemplateSrv)().replace(n.script)),n.query=(0,ie.getTemplateSrv)().replace(n.query||"*",{},"lucene"),this.getTerms(n,r)}return Promise.resolve([])}getTagKeys(){return this.getFields()}getTagValues(e){return this.getTerms({field:e.key,query:"*"},e.timeRange,!0)}targetContainsTemplate(e){if((0,ie.getTemplateSrv)().variableExists(e.query)||(0,ie.getTemplateSrv)().variableExists(e.alias))return!0;for(const t of e.bucketAggs)if((0,ie.getTemplateSrv)().variableExists(t.field)||this.objectContainsTemplate(t.settings))return!0;for(const t of e.metrics)if((0,ie.getTemplateSrv)().variableExists(t.field)||this.objectContainsTemplate(t.settings)||this.objectContainsTemplate(t.meta))return!0;return!1}isPrimitive(e){return null==e||!!["string","number","boolean"].some((e=>"boolean"===e))}objectContainsTemplate(e){if(!e)return!1;for(const t of Object.keys(e))if(this.isPrimitive(e[t])){if((0,ie.getTemplateSrv)().variableExists(e[t]))return!0}else if(Array.isArray(e[t])){for(const r of e[t])if(this.objectContainsTemplate(r))return!0}else if(this.objectContainsTemplate(e[t]))return!0;return!1}getSupportedQueryTypes(){return[G.Lucene,...this.pplEnabled?[G.PPL]:[]]}constructor(e,t=(0,ie.getTemplateSrv)()){var r;super(e),Jt(r=this,"templateSrv",void 0),Jt(r,"basicAuth",void 0),Jt(r,"withCredentials",void 0),Jt(r,"url",void 0),Jt(r,"name",void 0),Jt(r,"uid",void 0),Jt(r,"type",void 0),Jt(r,"index",void 0),Jt(r,"timeField",void 0),Jt(r,"flavor",void 0),Jt(r,"version",void 0),Jt(r,"interval",void 0),Jt(r,"maxConcurrentShardRequests",void 0),Jt(r,"queryBuilder",void 0),Jt(r,"indexPattern",void 0),Jt(r,"logMessageField",void 0),Jt(r,"logLevelField",void 0),Jt(r,"dataLinks",void 0),Jt(r,"pplEnabled",void 0),Jt(r,"sigV4Auth",void 0),Jt(r,"pplCompletionItemProvider",void 0),Jt(r,"getFields",void 0),r.templateSrv=t,r.getFields=function(e,t=(...e)=>JSON.stringify(e),r=10){const n=new Map;return(...a)=>{const i=t(...a),o=n.get(i);return o?Promise.resolve(o):e(...a).then((e=>{if(n.set(i,e),n.size>r){const e=n.keys().next().value;e&&n.delete(e)}return e}))}}(((e,t)=>Yt((function*(){return r.get("/_field_caps",t).then((t=>{const r={float:"number",double:"number",integer:"number",long:"number",date:"date",date_nanos:"date",string:"string",text:"string",scaled_float:"number",nested:"nested",histogram:"number"},n=t=>{for(const n in t)if("object"!==n&&!t[n].metadata_field){if(!e||0===e.length)return!0;if(e.includes(n)||e.includes(r[n]))return!0}return!1},i={},o=t.fields;for(const e in o){const t=o[e];n(t)&&(i[e]={text:e,type:t.type})}return a().map(i,(e=>e))})).catch((e=>{var t,r,n;throw new Error(`Unable to fetch fields from the datasource: ${(null===(n=e.data)||void 0===n||null===(r=n.error)||void 0===r||null===(t=r.root_cause[0])||void 0===t?void 0:t.reason)||"unknown error"}`)}))}))())),r.basicAuth=e.basicAuth,r.withCredentials=e.withCredentials,r.url=e.url,r.name=e.name,r.uid=e.uid,r.type=e.type;const n=e.jsonData||{};var i,o,s;r.index=null!==(i=n.database)&&void 0!==i?i:"",r.timeField=n.timeField,r.flavor=n.flavor||H.OpenSearch,r.version=n.version,r.indexPattern=new q(r.index,n.interval),r.interval=n.timeInterval,r.maxConcurrentShardRequests=n.maxConcurrentShardRequests,r.queryBuilder=new ye({timeField:r.timeField,flavor:r.flavor,version:r.version}),r.logMessageField=n.logMessageField||"",r.logLevelField=n.logLevelField||"",r.dataLinks=n.dataLinks||[],r.annotations={QueryEditor:De},""===r.logMessageField&&(r.logMessageField=void 0),""===r.logLevelField&&(r.logLevelField=void 0),r.pplEnabled=null===(o=n.pplEnabled)||void 0===o||o,r.sigV4Auth=null!==(s=n.sigV4Auth)&&void 0!==s&&s,r.pplCompletionItemProvider=new Qt(r.getFields.bind(r))}}function nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ar(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const{FormField:ir}=$e.LegacyForms,or=e=>{const{value:t,onChange:r}=e,n=e=>n=>{r(ar(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){nr(e,t,r[t])}))}return e}({},t),{[e]:n.currentTarget.value}))};return Re().createElement(Re().Fragment,null,Re().createElement("h3",{className:"page-heading"},"Logs"),Re().createElement("div",{className:"gf-form-group"},Re().createElement("div",{className:"gf-form max-width-30"},Re().createElement(ir,{"data-testid":"log-message-input",labelWidth:11,label:"Message field name",value:t.logMessageField,onChange:n("logMessageField"),placeholder:"_source"})),Re().createElement("div",{className:"gf-form max-width-30"},Re().createElement(ir,{"data-testid":"field-name-input",labelWidth:11,label:"Level field name",value:t.logLevelField,onChange:n("logLevelField")}))))};var sr=p(1559);function lr(e,t="latest"){return ur(e,t.replace(/\-.*/,""))}function ur(e,t){const r={};for(const[n,a]of Object.entries(e))cr(a)?r[n]=ur(a,t):(pr(a,n),r[n]=dr(a,t));return r}function cr(e){if("object"==typeof e){const[t]=Object.keys(e);return!(0,sr.valid)(t)}return!1}function dr(e,t){let r,n=Object.keys(e).sort(sr.compare);if("latest"===t)return e[n[n.length-1]];for(const e of n)(0,sr.gte)(t,e)&&(r=e);return r||(r=n[n.length-1]),e[r]}function pr(e,t){if(!Object.keys(e).every((e=>(0,sr.valid)(e))))throw new Error(`Invalid semver version: '${t}'`)}const mr="8.5.0",fr={RadioButton:{container:{"10.2.3":"data-testid radio-button"}},Breadcrumbs:{breadcrumb:{"9.4.0":e=>`data-testid ${e} breadcrumb`}},CanvasGridAddActions:{addPanel:{"12.1.0":"data-testid CanvasGridAddActions add-panel"},groupPanels:{"12.1.0":"data-testid CanvasGridAddActions group-panels"},ungroup:{"12.1.0":"data-testid CanvasGridAddActions ungroup"},addRow:{"12.1.0":"data-testid CanvasGridAddActions add-row"},pasteRow:{"12.1.0":"data-testid CanvasGridAddActions paste-row"},addTab:{"12.1.0":"data-testid CanvasGridAddActions add-tab"},pasteTab:{"12.1.0":"data-testid CanvasGridAddActions paste-tab"}},DashboardEditPaneSplitter:{primaryBody:{"12.1.0":"data-testid DashboardEditPaneSplitter primary body"}},EditPaneHeader:{deleteButton:{"12.1.0":"data-testid EditPaneHeader delete panel"},copyDropdown:{"12.1.0":"data-testid EditPaneHeader copy dropdown"},copy:{"12.1.0":"data-testid EditPaneHeader copy"},duplicate:{"12.1.0":"data-testid EditPaneHeader duplicate"},backButton:{"12.1.0":"data-testid EditPaneHeader back"}},TimePicker:{openButton:{[mr]:"data-testid TimePicker Open Button"},overlayContent:{"10.2.3":"data-testid TimePicker Overlay Content"},fromField:{"10.2.3":"data-testid Time Range from field",[mr]:"Time Range from field"},toField:{"10.2.3":"data-testid Time Range to field",[mr]:"Time Range to field"},applyTimeRange:{[mr]:"data-testid TimePicker submit button"},copyTimeRange:{"10.4.0":"data-testid TimePicker copy button"},pasteTimeRange:{"10.4.0":"data-testid TimePicker paste button"},calendar:{label:{"10.2.3":"data-testid Time Range calendar",[mr]:"Time Range calendar"},openButton:{"10.2.3":"data-testid Open time range calendar",[mr]:"Open time range calendar"},closeButton:{"10.2.3":"data-testid Close time range Calendar",[mr]:"Close time range Calendar"}},absoluteTimeRangeTitle:{[mr]:"data-testid-absolute-time-range-narrow"}},DataSourcePermissions:{form:{"9.5.0":()=>'form[name="addPermission"]'},roleType:{"9.5.0":"Role to add new permission to"},rolePicker:{"9.5.0":"Built-in role picker"},permissionLevel:{"12.0.0":"Permission level","9.5.0":"Permission Level"}},DateTimePicker:{input:{"10.2.3":"data-testid date-time-input"}},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:{[mr]:"Test Data Query scenario select container"},scenarioSelect:{[mr]:"Test Data Query scenario select"},max:{[mr]:"TestData max"},min:{[mr]:"TestData min"},noise:{[mr]:"TestData noise"},seriesCount:{[mr]:"TestData series count"},spread:{[mr]:"TestData spread"},startValue:{[mr]:"TestData start value"},drop:{[mr]:"TestData drop values"}}},DataSourceHttpSettings:{urlInput:{"10.4.0":"data-testid Datasource HTTP settings url",[mr]:"Datasource HTTP settings url"}},Jaeger:{traceIDInput:{[mr]:"Trace ID"}},Prometheus:{configPage:{connectionSettings:{[mr]:"Data source connection URL"},manageAlerts:{"10.4.0":"prometheus-alerts-manager"},allowAsRecordingRulesTarget:{"12.1.0":"prometheus-recording-rules-target"},scrapeInterval:{"10.4.0":"data-testid scrape interval"},queryTimeout:{"10.4.0":"data-testid query timeout"},defaultEditor:{"10.4.0":"data-testid default editor"},disableMetricLookup:{"10.4.0":"disable-metric-lookup"},prometheusType:{"10.4.0":"data-testid prometheus type"},prometheusVersion:{"10.4.0":"data-testid prometheus version"},cacheLevel:{"10.4.0":"data-testid cache level"},incrementalQuerying:{"10.4.0":"prometheus-incremental-querying"},queryOverlapWindow:{"10.4.0":"data-testid query overlap window"},disableRecordingRules:{"10.4.0":"disable-recording-rules"},customQueryParameters:{"10.4.0":"data-testid custom query parameters"},httpMethod:{"10.4.0":"data-testid http method"},exemplarsAddButton:{"10.3.0":"data-testid Add exemplar config button",[mr]:"Add exemplar config button"},internalLinkSwitch:{"10.3.0":"data-testid Internal link switch",[mr]:"Internal link switch"},codeModeMetricNamesSuggestionLimit:{"11.1.0":"data-testid code mode metric names suggestion limit"},seriesLimit:{"12.0.2":"data-testid maximum series limit"}},queryEditor:{explain:{"10.4.0":"data-testid prometheus explain switch wrapper"},editorToggle:{"10.4.0":"data-testid QueryEditorModeToggle"},options:{"10.4.0":"data-testid prometheus options"},legend:{"10.4.0":"data-testid prometheus legend wrapper"},format:{"10.4.0":"data-testid prometheus format"},step:{"10.4.0":"data-testid prometheus-step"},type:{"10.4.0":"data-testid prometheus type"},exemplars:{"10.4.0":"data-testid prometheus-exemplars"},builder:{metricSelect:{"10.4.0":"data-testid metric select"},hints:{"10.4.0":"data-testid prometheus hints"},metricsExplorer:{"10.4.0":"data-testid metrics explorer"},queryAdvisor:{"10.4.0":"data-testid query advisor"}},code:{queryField:{"10.4.0":"data-testid prometheus query field"},metricsCountInfo:{"11.1.0":"data-testid metrics count disclaimer"},metricsBrowser:{openButton:{"10.4.0":"data-testid open metrics browser"},selectMetric:{"10.4.0":"data-testid select a metric"},seriesLimit:{"10.3.1":"data-testid series limit"},metricList:{"10.4.0":"data-testid metric list"},labelNamesFilter:{"10.4.0":"data-testid label names filter"},labelValuesFilter:{"10.4.0":"data-testid label values filter"},useQuery:{"10.4.0":"data-testid use query"},useAsRateQuery:{"10.4.0":"data-testid use as rate query"},validateSelector:{"10.4.0":"data-testid validate selector"},clear:{"10.4.0":"data-testid clear"}}}},exemplarMarker:{"10.3.0":"data-testid Exemplar marker",[mr]:"Exemplar marker"},variableQueryEditor:{queryType:{"10.4.0":"data-testid query type"},labelnames:{metricRegex:{"10.4.0":"data-testid label names metric regex"}},labelValues:{labelSelect:{"10.4.0":"data-testid label values label select"}},metricNames:{metricRegex:{"10.4.0":"data-testid metric names metric regex"}},varQueryResult:{"10.4.0":"data-testid variable query result"},seriesQuery:{"10.4.0":"data-testid prometheus series query"},classicQuery:{"10.4.0":"data-testid prometheus classic query"}},annotations:{minStep:{"10.4.0":"data-testid prometheus-annotation-min-step"},title:{"10.4.0":"data-testid prometheus annotation title"},tags:{"10.4.0":"data-testid prometheus annotation tags"},text:{"10.4.0":"data-testid prometheus annotation text"},seriesValueAsTimestamp:{"10.4.0":"data-testid prometheus annotation series value as timestamp"}}}},Menu:{MenuComponent:{[mr]:e=>`${e} menu`},MenuGroup:{[mr]:e=>`${e} menu group`},MenuItem:{[mr]:e=>`${e} menu item`},SubMenu:{container:{"10.3.0":"data-testid SubMenu container",[mr]:"SubMenu container"},icon:{"10.3.0":"data-testid SubMenu icon",[mr]:"SubMenu icon"}}},Panels:{Panel:{title:{[mr]:e=>`data-testid Panel header ${e}`},content:{"11.1.0":"data-testid panel content"},headerContainer:{"9.5.0":"data-testid header-container"},headerItems:{"10.2.0":e=>`data-testid Panel header item ${e}`},menuItems:{"9.5.0":e=>`data-testid Panel menu item ${e}`},menu:{"9.5.0":e=>`data-testid Panel menu ${e}`},containerByTitle:{[mr]:e=>`${e} panel`},headerCornerInfo:{[mr]:e=>`Panel header ${e}`},status:{"10.2.0":e=>`data-testid Panel status ${e}`,[mr]:e=>"Panel status"},loadingBar:{"10.0.0":()=>"Panel loading bar"},HoverWidget:{container:{"10.1.0":"data-testid hover-header-container",[mr]:"hover-header-container"},dragIcon:{"10.0.0":"data-testid drag-icon"}},PanelDataErrorMessage:{"10.4.0":"data-testid Panel data error message"}},Visualization:{Graph:{container:{"9.5.0":"Graph container"},VisualizationTab:{legendSection:{[mr]:"Legend section"}},Legend:{legendItemAlias:{[mr]:e=>`gpl alias ${e}`},showLegendSwitch:{[mr]:"gpl show legend"}},xAxis:{labels:{[mr]:()=>"div.flot-x-axis > div.flot-tick-label"}}},BarGauge:{valueV2:{[mr]:"data-testid Bar gauge value"}},PieChart:{svgSlice:{"10.3.0":"data testid Pie Chart Slice"}},Text:{container:{[mr]:()=>".markdown-html"}},Table:{header:{[mr]:"table header"},footer:{[mr]:"table-footer"},body:{"10.2.0":"data-testid table body"}},TableNG:{Filters:{HeaderButton:{"12.1.0":"data-testid tableng header filter"},Container:{"12.1.0":"data-testid tablenf filter container"},SelectAll:{"12.1.0":"data-testid tableng filter select-all"}},Tooltip:{Wrapper:{"12.2.0":"data-testid tableng tooltip wrapper"},Caret:{"12.2.0":"data-testid tableng tooltip caret"}},Footer:{ReducerLabel:{"12.2.0":"data-testid tableng footer reducer-label"},Value:{"12.2.0":"data-testid tableng footer value"}}}}},VizLegend:{seriesName:{"10.3.0":e=>`data-testid VizLegend series ${e}`}},Drawer:{General:{title:{[mr]:e=>`Drawer title ${e}`},expand:{[mr]:"Drawer expand"},contract:{[mr]:"Drawer contract"},close:{"10.3.0":"data-testid Drawer close",[mr]:"Drawer close"},rcContentWrapper:{"9.4.0":()=>".rc-drawer-content-wrapper"},subtitle:{"10.4.0":"data-testid drawer subtitle"}},DashboardSaveDrawer:{saveButton:{"11.1.0":"data-testid Save dashboard drawer button"},saveAsButton:{"11.1.0":"data-testid Save as dashboard drawer button"},saveAsTitleInput:{"11.1.0":"Save dashboard title field"}}},PanelEditor:{General:{content:{"11.1.0":"data-testid Panel editor content","8.0.0":"Panel editor content"}},OptionsPane:{content:{"11.1.0":"data-testid Panel editor option pane content",[mr]:"Panel editor option pane content"},select:{[mr]:"Panel editor option pane select"},fieldLabel:{[mr]:e=>`${e} field property editor`},fieldInput:{"11.0.0":e=>`data-testid Panel editor option pane field input ${e}`}},DataPane:{content:{"11.1.0":"data-testid Panel editor data pane content",[mr]:"Panel editor data pane content"}},applyButton:{"9.2.0":"data-testid Apply changes and go back to dashboard","9.1.0":"Apply changes and go back to dashboard","8.0.0":"panel editor apply"},toggleVizPicker:{"10.0.0":"data-testid toggle-viz-picker","8.0.0":"toggle-viz-picker"},toggleVizOptions:{"10.1.0":"data-testid toggle-viz-options",[mr]:"toggle-viz-options"},toggleTableView:{"11.1.0":"data-testid toggle-table-view",[mr]:"toggle-table-view"},showZoomField:{"10.2.0":"Map controls Show zoom control field property editor"},showAttributionField:{"10.2.0":"Map controls Show attribution field property editor"},showScaleField:{"10.2.0":"Map controls Show scale field property editor"},showMeasureField:{"10.2.0":"Map controls Show measure tools field property editor"},showDebugField:{"10.2.0":"Map controls Show debug field property editor"},measureButton:{"12.1.0":"data-testid panel-editor-measure-button","9.2.0":"show measure tools"},Outline:{section:{"12.0.0":"data-testid Outline section"},node:{"12.0.0":e=>`data-testid outline node ${e}`},item:{"12.0.0":e=>`data-testid outline item ${e}`}},ElementEditPane:{variableType:{"12.0.0":e=>`data-testid variable type ${e}`},addVariableButton:{"12.0.0":"data-testid add variable button"},variableNameInput:{"12.0.0":"data-testid variable name input"},variableLabelInput:{"12.0.0":"data-testid variable label input"},AutoGridLayout:{minColumnWidth:{"12.1.0":"data-testid min column width selector"},customMinColumnWidth:{"12.1.0":"data-testid custom min column width input"},clearCustomMinColumnWidth:{"12.1.0":"data-testid clear custom min column width input"},maxColumns:{"12.1.0":"data-testid max columns selector"},rowHeight:{"12.1.0":"data-testid row height selector"},customRowHeight:{"12.1.0":"data-testid custom row height input"},clearCustomRowHeight:{"12.1.0":"data-testid clear custom row height input"},fillScreen:{"12.1.0":"data-testid fill screen switch"}}}},PanelInspector:{Data:{content:{[mr]:"Panel inspector Data content"}},Stats:{content:{[mr]:"Panel inspector Stats content"}},Json:{content:{"11.1.0":"data-testid Panel inspector Json content",[mr]:"Panel inspector Json content"}},Query:{content:{[mr]:"Panel inspector Query content"},refreshButton:{[mr]:"Panel inspector Query refresh button"},jsonObjectKeys:{[mr]:()=>".json-formatter-key"}}},Tab:{title:{"11.2.0":e=>`data-testid Tab ${e}`},active:{[mr]:()=>'[class*="-activeTabStyle"]'}},RefreshPicker:{runButtonV2:{[mr]:"data-testid RefreshPicker run button"},intervalButtonV2:{[mr]:"data-testid RefreshPicker interval button"}},QueryTab:{content:{[mr]:"Query editor tab content"},queryInspectorButton:{[mr]:"Query inspector button"},queryHistoryButton:{"10.2.0":"data-testid query-history-button",[mr]:"query-history-button"},addQuery:{"10.2.0":"data-testid query-tab-add-query",[mr]:"Query editor add query button"},addQueryFromLibrary:{"11.5.0":"data-testid query-tab-add-query-from-library"},queryGroupTopSection:{"11.2.0":"data-testid query group top section"},addExpression:{"11.2.0":"data-testid query-tab-add-expression"}},QueryHistory:{queryText:{"9.0.0":"Query text"}},QueryEditorRows:{rows:{[mr]:"Query editor row"}},QueryEditorRow:{actionButton:{"10.4.0":e=>`data-testid ${e}`},title:{[mr]:e=>`Query editor row title ${e}`},container:{[mr]:e=>`Query editor row ${e}`}},AlertTab:{content:{"10.2.3":"data-testid Alert editor tab content",[mr]:"Alert editor tab content"}},AlertRules:{groupToggle:{"11.0.0":"data-testid group-collapse-toggle"},toggle:{"11.0.0":"data-testid collapse-toggle"},expandedContent:{"11.0.0":"data-testid expanded-content"},previewButton:{"11.1.0":"data-testid alert-rule preview-button"},ruleNameField:{"11.1.0":"data-testid alert-rule name-field"},newFolderButton:{"11.1.0":"data-testid alert-rule new-folder-button"},newFolderNameField:{"11.1.0":"data-testid alert-rule name-folder-name-field"},newFolderNameCreateButton:{"11.1.0":"data-testid alert-rule name-folder-name-create-button"},newEvaluationGroupButton:{"11.1.0":"data-testid alert-rule new-evaluation-group-button"},newEvaluationGroupName:{"11.1.0":"data-testid alert-rule new-evaluation-group-name"},newEvaluationGroupInterval:{"11.1.0":"data-testid alert-rule new-evaluation-group-interval"},newEvaluationGroupCreate:{"11.1.0":"data-testid alert-rule new-evaluation-group-create-button"},step:{"11.5.0":e=>`data-testid alert-rule step-${e}`},stepAdvancedModeSwitch:{"11.5.0":e=>`data-testid advanced-mode-switch step-${e}`}},Alert:{alertV2:{[mr]:e=>`data-testid Alert ${e}`}},TransformTab:{content:{"10.1.0":"data-testid Transform editor tab content",[mr]:"Transform editor tab content"},newTransform:{"10.1.0":e=>`data-testid New transform ${e}`},transformationEditor:{"10.1.0":e=>`data-testid Transformation editor ${e}`},transformationEditorDebugger:{"10.1.0":e=>`data-testid Transformation editor debugger ${e}`}},Transforms:{card:{"10.1.0":e=>`data-testid New transform ${e}`},disableTransformationButton:{"10.4.0":"data-testid Disable transformation button"},Reduce:{modeLabel:{"10.2.3":"data-testid Transform mode label",[mr]:"Transform mode label"},calculationsLabel:{"10.2.3":"data-testid Transform calculations label",[mr]:"Transform calculations label"}},SpatialOperations:{actionLabel:{"9.1.2":"root Action field property editor"},locationLabel:{"10.2.0":"root Location Mode field property editor"},location:{autoOption:{"9.1.2":"Auto location option"},coords:{option:{"9.1.2":"Coords location option"},latitudeFieldLabel:{"9.1.2":"root Latitude field field property editor"},longitudeFieldLabel:{"9.1.2":"root Longitude field field property editor"}},geohash:{option:{"9.1.2":"Geohash location option"},geohashFieldLabel:{"9.1.2":"root Geohash field field property editor"}},lookup:{option:{"9.1.2":"Lookup location option"},lookupFieldLabel:{"9.1.2":"root Lookup field field property editor"},gazetteerFieldLabel:{"9.1.2":"root Gazetteer field property editor"}}}},searchInput:{"10.2.3":"data-testid search transformations",[mr]:"search transformations"},noTransformationsMessage:{"10.2.3":"data-testid no transformations message"},addTransformationButton:{"10.1.0":"data-testid add transformation button",[mr]:"add transformation button"},removeAllTransformationsButton:{"10.4.0":"data-testid remove all transformations button"}},NavBar:{Configuration:{button:{"9.5.0":"Configuration"}},Toggle:{button:{"10.2.3":"data-testid Toggle menu",[mr]:"Toggle menu"}},Reporting:{button:{"9.5.0":"Reporting"}}},NavMenu:{Menu:{"10.2.3":"data-testid navigation mega-menu"},item:{"9.5.0":"data-testid Nav menu item"}},NavToolbar:{container:{"9.4.0":"data-testid Nav toolbar"},commandPaletteTrigger:{"11.5.0":"data-testid Command palette trigger"},shareDashboard:{"11.1.0":"data-testid Share dashboard"},markAsFavorite:{"11.1.0":"data-testid Mark as favorite"},editDashboard:{editButton:{"11.1.0":"data-testid Edit dashboard button"},saveButton:{"11.1.0":"data-testid Save dashboard button"},exitButton:{"11.1.0":"data-testid Exit edit mode button"},settingsButton:{"11.1.0":"data-testid Dashboard settings"},addRowButton:{"11.1.0":"data-testid Add row button"},addLibraryPanelButton:{"11.1.0":"data-testid Add a panel from the panel library button"},addVisualizationButton:{"11.1.0":"data-testid Add new visualization menu item"},pastePanelButton:{"11.1.0":"data-testid Paste panel button"},discardChangesButton:{"11.1.0":"data-testid Discard changes button"},discardLibraryPanelButton:{"11.1.0":"data-testid Discard library panel button"},unlinkLibraryPanelButton:{"11.1.0":"data-testid Unlink library panel button"},saveLibraryPanelButton:{"11.1.0":"data-testid Save library panel button"},backToDashboardButton:{"11.1.0":"data-testid Back to dashboard button"}}},PageToolbar:{container:{[mr]:()=>".page-toolbar"},item:{[mr]:e=>`${e}`},itemButton:{"9.5.0":e=>`data-testid ${e}`}},QueryEditorToolbarItem:{button:{[mr]:e=>`QueryEditor toolbar item button ${e}`}},BackButton:{backArrow:{"10.3.0":"data-testid Go Back",[mr]:"Go Back"}},OptionsGroup:{group:{"11.1.0":e=>e?`data-testid Options group ${e}`:"data-testid Options group",[mr]:e=>e?`Options group ${e}`:"Options group"},toggle:{"11.1.0":e=>e?`data-testid Options group ${e} toggle`:"data-testid Options group toggle",[mr]:e=>e?`Options group ${e} toggle`:"Options group toggle"}},PluginVisualization:{item:{[mr]:e=>`Plugin visualization item ${e}`},current:{[mr]:()=>'[class*="-currentVisualizationItem"]'}},Select:{menu:{"11.5.0":"data-testid Select menu",[mr]:"Select options menu"},option:{"11.1.0":"data-testid Select option",[mr]:"Select option"},toggleAllOptions:{"11.3.0":"data-testid toggle all options"},input:{[mr]:()=>'input[id*="time-options-input"]'},singleValue:{[mr]:()=>'div[class*="-singleValue"]'}},FieldConfigEditor:{content:{[mr]:"Field config editor content"}},OverridesConfigEditor:{content:{[mr]:"Field overrides editor content"}},FolderPicker:{containerV2:{[mr]:"data-testid Folder picker select container"},input:{"10.4.0":"data-testid folder-picker-input"}},ReadonlyFolderPicker:{container:{[mr]:"data-testid Readonly folder picker select container"}},DataSourcePicker:{container:{"10.0.0":"data-testid Data source picker select container","8.0.0":"Data source picker select container"},inputV2:{"10.1.0":"data-testid Select a data source",[mr]:"Select a data source"},dataSourceList:{"10.4.0":"data-testid Data source list dropdown"},advancedModal:{dataSourceList:{"10.4.0":"data-testid Data source list"},builtInDataSourceList:{"10.4.0":"data-testid Built in data source list"}}},TimeZonePicker:{containerV2:{[mr]:"data-testid Time zone picker select container"},changeTimeSettingsButton:{"11.0.0":"data-testid Time zone picker Change time settings button"}},WeekStartPicker:{containerV2:{[mr]:"data-testid Choose starting day of the week"},placeholder:{[mr]:"Choose starting day of the week"}},TraceViewer:{spanBar:{"9.0.0":"data-testid SpanBar--wrapper"}},QueryField:{container:{"10.3.0":"data-testid Query field",[mr]:"Query field"}},QueryBuilder:{queryPatterns:{"10.3.0":"data-testid Query patterns",[mr]:"Query patterns"},labelSelect:{"10.3.0":"data-testid Select label",[mr]:"Select label"},inputSelect:{"11.1.0":"data-testid Select label-input"},valueSelect:{"10.3.0":"data-testid Select value",[mr]:"Select value"},matchOperatorSelect:{"10.3.0":"data-testid Select match operator",[mr]:"Select match operator"}},ValuePicker:{button:{"10.3.0":e=>`data-testid Value picker button ${e}`},select:{"10.3.0":e=>`data-testid Value picker select ${e}`}},Search:{sectionV2:{[mr]:"data-testid Search section"},itemsV2:{[mr]:"data-testid Search items"},cards:{[mr]:"data-testid Search cards"},collapseFolder:{[mr]:e=>`data-testid Collapse folder ${e}`},expandFolder:{[mr]:e=>`data-testid Expand folder ${e}`},dashboardItem:{[mr]:e=>`data-testid Dashboard search item ${e}`},dashboardCard:{[mr]:e=>`data-testid Search card ${e}`},folderHeader:{"9.3.0":e=>`data-testid Folder header ${e}`},folderContent:{"9.3.0":e=>`data-testid Folder content ${e}`},dashboardItems:{[mr]:"data-testid Dashboard search item"}},DashboardLinks:{container:{[mr]:"data-testid Dashboard link container"},dropDown:{[mr]:"data-testid Dashboard link dropdown"},link:{[mr]:"data-testid Dashboard link"}},LoadingIndicator:{icon:{"10.4.0":"data-testid Loading indicator",[mr]:"Loading indicator"}},CallToActionCard:{buttonV2:{[mr]:e=>`data-testid Call to action button ${e}`}},DataLinksContextMenu:{singleLink:{"10.3.0":"data-testid Data link",[mr]:"Data link"}},DataLinksActionsTooltip:{tooltipWrapper:{"12.1.0":"data-testid Data links actions tooltip wrapper"}},CodeEditor:{container:{"10.2.3":"data-testid Code editor container",[mr]:"Code editor container"}},ReactMonacoEditor:{editorLazy:{"11.1.0":"data-testid ReactMonacoEditor editorLazy"}},DashboardImportPage:{textarea:{[mr]:"data-testid-import-dashboard-textarea"},submit:{[mr]:"data-testid-load-dashboard"}},ImportDashboardForm:{name:{[mr]:"data-testid-import-dashboard-title"},submit:{[mr]:"data-testid-import-dashboard-submit"}},PanelAlertTabContent:{content:{"10.2.3":"data-testid Unified alert editor tab content",[mr]:"Unified alert editor tab content"}},VisualizationPreview:{card:{[mr]:e=>`data-testid suggestion-${e}`}},ColorSwatch:{name:{[mr]:"data-testid-colorswatch"}},DashboardRow:{title:{[mr]:e=>`data-testid dashboard-row-title-${e}`},wrapper:{"12.1.0":e=>`data-testid dashboard-row-wrapper-for-${e}`}},UserProfile:{profileSaveButton:{[mr]:"data-testid-user-profile-save"},preferencesSaveButton:{[mr]:"data-testid-shared-prefs-save"},orgsTable:{[mr]:"data-testid-user-orgs-table"},sessionsTable:{[mr]:"data-testid-user-sessions-table"},extensionPointTabs:{"10.2.3":"data-testid-extension-point-tabs"},extensionPointTab:{"10.2.3":e=>`data-testid-extension-point-tab-${e}`}},FileUpload:{inputField:{"9.0.0":"data-testid-file-upload-input-field"},fileNameSpan:{"9.0.0":"data-testid-file-upload-file-name"}},DebugOverlay:{wrapper:{"9.2.0":"debug-overlay"}},OrgRolePicker:{input:{"9.5.0":"Role"}},AnalyticsToolbarButton:{button:{"9.5.0":"Dashboard insights"}},Variables:{variableOption:{"9.5.0":"data-testid variable-option"},variableLinkWrapper:{"11.1.1":"data-testid variable-link-wrapper"}},Annotations:{annotationsTypeInput:{"11.1.0":"data-testid annotations-type-input",[mr]:"annotations-type-input"},annotationsChoosePanelInput:{"11.1.0":"data-testid choose-panels-input",[mr]:"choose-panels-input"},editor:{testButton:{"11.0.0":"data-testid annotations-test-button"},resultContainer:{"11.0.0":"data-testid annotations-query-result-container"}}},Tooltip:{container:{"10.2.0":"data-testid tooltip"}},ReturnToPrevious:{buttonGroup:{"11.0.0":"data-testid dismissable button group"},backButton:{"11.0.0":"data-testid back"},dismissButton:{"11.0.0":"data-testid dismiss"}},SQLQueryEditor:{selectColumn:{"11.0.0":"data-testid select-column"},selectColumnInput:{"11.0.0":"data-testid select-column-input"},selectFunctionParameter:{"11.0.0":e=>`data-testid select-function-parameter-${e}`},selectAggregation:{"11.0.0":"data-testid select-aggregation"},selectAggregationInput:{"11.0.0":"data-testid select-aggregation-input"},selectAlias:{"11.0.0":"data-testid select-alias"},selectAliasInput:{"11.0.0":"data-testid select-alias-input"},selectInputParameter:{"11.0.0":"data-testid select-input-parameter"},filterConjunction:{"11.0.0":"data-testid filter-conjunction"},filterField:{"11.0.0":"data-testid filter-field"},filterOperator:{"11.0.0":"data-testid filter-operator"},headerTableSelector:{"11.0.0":"data-testid header-table-selector"},headerFilterSwitch:{"11.0.0":"data-testid header-filter-switch"},headerGroupSwitch:{"11.0.0":"data-testid header-group-switch"},headerOrderSwitch:{"11.0.0":"data-testid header-order-switch"},headerPreviewSwitch:{"11.0.0":"data-testid header-preview-switch"}},EntityNotFound:{container:{"11.2.0":"data-testid entity-not-found"}},Portal:{container:{"11.5.0":"data-testid portal-container"}},ExportImage:{formatOptions:{container:{"12.1.0":"data-testid export-image-format-options"},png:{"12.1.0":"data-testid export-image-format-png"},jpg:{"12.1.0":"data-testid export-image-format-jpg"}},rendererAlert:{container:{"12.1.0":"data-testid export-image-renderer-alert"},title:{"12.1.0":"data-testid export-image-renderer-alert-title"},description:{"12.1.0":"data-testid export-image-renderer-alert-description"}},buttons:{generate:{"12.1.0":"data-testid export-image-generate-button"},download:{"12.1.0":"data-testid export-image-download-button"},cancel:{"12.1.0":"data-testid export-image-cancel-button"}},preview:{container:{"12.1.0":"data-testid export-image-preview-container"},loading:{"12.1.0":"data-testid export-image-preview-loading"},image:{"12.1.0":"data-testid export-image-preview"},error:{container:{"12.1.0":"data-testid export-image-error"},title:{"12.1.0":"data-testid export-image-error-title"},message:{"12.1.0":"data-testid export-image-error-message"}}}}},hr={pages:lr({Alerting:{AddAlertRule:{url:{"10.1.0":"/alerting/new/alerting",[mr]:"/alerting/new"}},EditAlertRule:{url:{[mr]:e=>`alerting/${e}/edit`}}},Login:{url:{[mr]:"/login"},username:{"10.2.3":"data-testid Username input field",[mr]:"Username input field"},password:{"10.2.3":"data-testid Password input field",[mr]:"Password input field"},submit:{"10.2.3":"data-testid Login button",[mr]:"Login button"},skip:{"10.2.3":"data-testid Skip change password button"}},PasswordlessLogin:{url:{[mr]:"/login/passwordless/authenticate"},email:{"10.2.3":"data-testid Email input field",[mr]:"Email input field"},submit:{"10.2.3":"data-testid PasswordlessLogin button",[mr]:"PasswordlessLogin button"}},Home:{url:{[mr]:"/"}},DataSource:{name:{"10.3.0":"data-testid Data source settings page name input field",[mr]:"Data source settings page name input field"},delete:{[mr]:"Data source settings page Delete button"},readOnly:{"10.3.0":"data-testid Data source settings page read only message",[mr]:"Data source settings page read only message"},saveAndTest:{"10.0.0":"data-testid Data source settings page Save and Test button",[mr]:"Data source settings page Save and Test button"},alert:{"10.3.0":"data-testid Data source settings page Alert",[mr]:"Data source settings page Alert"}},DataSources:{url:{[mr]:"/datasources"},dataSources:{[mr]:e=>`Data source list item ${e}`}},EditDataSource:{url:{"9.5.0":e=>`/datasources/edit/${e}`},settings:{"9.5.0":"Datasource settings page basic settings"}},AddDataSource:{url:{[mr]:"/datasources/new"},dataSourcePluginsV2:{"9.3.1":e=>`Add new data source ${e}`,[mr]:e=>`Data source plugin item ${e}`}},ConfirmModal:{delete:{"10.0.0":"data-testid Confirm Modal Danger Button",[mr]:"Confirm Modal Danger Button"},input:{"12.2.0":"data-testid Confirm Modal Input"}},SecretsManagement:{SecretForm:{"12.2.0":"data-testid Secret Form"}},AddDashboard:{url:{[mr]:"/dashboard/new"},itemButton:{"9.5.0":e=>`data-testid ${e}`},addNewPanel:{"11.1.0":"data-testid Add new panel","8.0.0":"Add new panel",[mr]:"Add new panel"},itemButtonAddViz:{[mr]:"Add new visualization menu item"},addNewRow:{"11.1.0":"data-testid Add new row",[mr]:"Add new row"},addNewPanelLibrary:{"11.1.0":"data-testid Add new panel from panel library",[mr]:"Add new panel from panel library"},Settings:{Annotations:{List:{url:{[mr]:"/dashboard/new?orgId=1&editview=annotations"}},Edit:{url:{[mr]:e=>`/dashboard/new?editview=annotations&editIndex=${e}`}}},Variables:{List:{url:{"11.3.0":"/dashboard/new?orgId=1&editview=variables",[mr]:"/dashboard/new?orgId=1&editview=templating"}},Edit:{url:{"11.3.0":e=>`/dashboard/new?orgId=1&editview=variables&editIndex=${e}`,[mr]:e=>`/dashboard/new?orgId=1&editview=templating&editIndex=${e}`}}}}},ImportDashboard:{url:{[mr]:"/dashboard/import"}},Dashboard:{url:{[mr]:e=>`/d/${e}`},DashNav:{nav:{[mr]:"Dashboard navigation"},navV2:{[mr]:"data-testid Dashboard navigation"},publicDashboardTag:{"9.1.0":"data-testid public dashboard tag"},shareButton:{"10.4.0":"data-testid share-button"},scrollContainer:{"11.1.0":"data-testid Dashboard canvas scroll container"},newShareButton:{container:{"11.1.0":"data-testid new share button"},shareLink:{"11.1.0":"data-testid new share link-button"},arrowMenu:{"11.1.0":"data-testid new share button arrow menu"},menu:{container:{"11.1.0":"data-testid new share button menu"},shareInternally:{"11.1.0":"data-testid new share button share internally"},shareExternally:{"11.1.1":"data-testid new share button share externally"},shareSnapshot:{"11.2.0":"data-testid new share button share snapshot"}}},NewExportButton:{container:{"11.2.0":"data-testid new export button"},arrowMenu:{"11.2.0":"data-testid new export button arrow menu"},Menu:{container:{"11.2.0":"data-testid new export button menu"},exportAsJson:{"11.2.0":"data-testid new export button export as json"},exportAsImage:{"12.1.0":"data-testid new export button export as image"}}},playlistControls:{prev:{"11.0.0":"data-testid playlist previous dashboard button"},stop:{"11.0.0":"data-testid playlist stop dashboard button"},next:{"11.0.0":"data-testid playlist next dashboard button"}}},Controls:{"11.1.0":"data-testid dashboard controls"},SubMenu:{submenu:{[mr]:"Dashboard submenu"},submenuItem:{[mr]:"data-testid template variable"},submenuItemLabels:{[mr]:e=>`data-testid Dashboard template variables submenu Label ${e}`},submenuItemValueDropDownValueLinkTexts:{[mr]:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`},submenuItemValueDropDownDropDown:{[mr]:"Variable options"},submenuItemValueDropDownOptionTexts:{[mr]:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Annotations:{annotationsWrapper:{"10.0.0":"data-testid annotation-wrapper"},annotationLabel:{"10.0.0":e=>`data-testid Dashboard annotations submenu Label ${e}`},annotationToggle:{"10.0.0":e=>`data-testid Dashboard annotations submenu Toggle ${e}`}}},Settings:{Actions:{close:{"9.5.0":"data-testid dashboard-settings-close"}},General:{deleteDashBoard:{"11.1.0":"data-testid Dashboard settings page delete dashboard button"},sectionItems:{[mr]:e=>`Dashboard settings section item ${e}`},saveDashBoard:{[mr]:"Dashboard settings aside actions Save button"},saveAsDashBoard:{[mr]:"Dashboard settings aside actions Save As button"},title:{"11.2.0":"General"}},Annotations:{Edit:{urlParams:{[mr]:e=>`editview=annotations&editIndex=${e}`}},List:{url:{[mr]:e=>`/d/${e}?editview=annotations`},addAnnotationCTAV2:{[mr]:"data-testid Call to action button Add annotation query"},annotations:{"10.4.0":"data-testid list-annotations"}},Settings:{name:{"11.1.0":"data-testid Annotations settings name input",[mr]:"Annotations settings name input"}},NewAnnotation:{panelFilterSelect:{"10.0.0":"data-testid annotations-panel-filter"},showInLabel:{"11.1.0":"data-testid show-in-label"},previewInDashboard:{"10.0.0":"data-testid annotations-preview"},delete:{"10.4.0":"data-testid annotations-delete"},apply:{"10.4.0":"data-testid annotations-apply"},enable:{"10.4.0":"data-testid annotation-enable"},hide:{"10.4.0":"data-testid annotation-hide"}}},Variables:{List:{url:{"11.3.0":e=>`/d/${e}?editview=variables`,[mr]:e=>`/d/${e}?editview=templating`},addVariableCTAV2:{[mr]:"data-testid Call to action button Add variable"},newButton:{[mr]:"Variable editor New variable button"},table:{[mr]:"Variable editor Table"},tableRowNameFields:{[mr]:e=>`Variable editor Table Name field ${e}`},tableRowDefinitionFields:{"10.1.0":e=>`Variable editor Table Definition field ${e}`},tableRowArrowUpButtons:{[mr]:e=>`Variable editor Table ArrowUp button ${e}`},tableRowArrowDownButtons:{[mr]:e=>`Variable editor Table ArrowDown button ${e}`},tableRowDuplicateButtons:{[mr]:e=>`Variable editor Table Duplicate button ${e}`},tableRowRemoveButtons:{[mr]:e=>`Variable editor Table Remove button ${e}`}},Edit:{urlParams:{"11.3.0":e=>`editview=variables&editIndex=${e}`,[mr]:e=>`editview=templating&editIndex=${e}`},General:{headerLink:{[mr]:"Variable editor Header link"},modeLabelNew:{[mr]:"Variable editor Header mode New"},modeLabelEdit:{[mr]:"Variable editor Header mode Edit"},generalNameInput:{[mr]:"Variable editor Form Name field"},generalNameInputV2:{[mr]:"data-testid Variable editor Form Name field"},generalTypeSelect:{[mr]:"Variable editor Form Type select"},generalTypeSelectV2:{[mr]:"data-testid Variable editor Form Type select"},generalLabelInput:{[mr]:"Variable editor Form Label field"},generalLabelInputV2:{[mr]:"data-testid Variable editor Form Label field"},generalHideSelect:{[mr]:"Variable editor Form Hide select"},generalHideSelectV2:{[mr]:"data-testid Variable editor Form Hide select"},selectionOptionsAllowCustomValueSwitch:{[mr]:"data-testid Variable editor Form Allow Custom Value switch"},selectionOptionsMultiSwitch:{"10.4.0":"data-testid Variable editor Form Multi switch",[mr]:"Variable editor Form Multi switch"},selectionOptionsIncludeAllSwitch:{"10.4.0":"data-testid Variable editor Form IncludeAll switch",[mr]:"Variable editor Form IncludeAll switch"},selectionOptionsCustomAllInput:{"10.4.0":"data-testid Variable editor Form IncludeAll field",[mr]:"Variable editor Form IncludeAll field"},previewOfValuesOption:{"10.4.0":"data-testid Variable editor Preview of Values option",[mr]:"Variable editor Preview of Values option"},submitButton:{"10.4.0":"data-testid Variable editor Run Query button",[mr]:"Variable editor Submit button"},applyButton:{"9.3.0":"data-testid Variable editor Apply button"}},QueryVariable:{closeButton:{[mr]:"data-testid Query Variable editor close button"},editor:{[mr]:"data-testid Query Variable editor"},previewButton:{[mr]:"data-testid Query Variable editor preview button"},queryOptionsDataSourceSelect:{"10.4.0":"data-testid Select a data source","10.0.0":"data-testid Data source picker select container",[mr]:"Data source picker select container"},queryOptionsOpenButton:{[mr]:"data-testid Query Variable editor open button"},queryOptionsRefreshSelect:{[mr]:"Variable editor Form Query Refresh select"},queryOptionsRefreshSelectV2:{[mr]:"data-testid Variable editor Form Query Refresh select"},queryOptionsRegExInput:{[mr]:"Variable editor Form Query RegEx field"},queryOptionsRegExInputV2:{[mr]:"data-testid Variable editor Form Query RegEx field"},queryOptionsSortSelect:{[mr]:"Variable editor Form Query Sort select"},queryOptionsSortSelectV2:{[mr]:"data-testid Variable editor Form Query Sort select"},queryOptionsQueryInput:{"10.4.0":"data-testid Variable editor Form Default Variable Query Editor textarea"},queryOptionsStaticOptionsRow:{[mr]:"Variable editor Form Query Static Options row"},queryOptionsStaticOptionsToggle:{[mr]:"Variable editor Form Query Static Options toggle"},queryOptionsStaticOptionsLabelInput:{[mr]:"Variable editor Form Query Static Options Label input"},queryOptionsStaticOptionsValueInput:{[mr]:"Variable editor Form Query Static Options Value input"},queryOptionsStaticOptionsDeleteButton:{[mr]:"Variable editor Form Query Static Options Delete button"},queryOptionsStaticOptionsAddButton:{[mr]:"Variable editor Form Query Static Options Add button"},queryOptionsStaticOptionsOrderDropdown:{[mr]:"Variable editor Form Query Static Options Order dropdown"},valueGroupsTagsEnabledSwitch:{[mr]:"Variable editor Form Query UseTags switch"},valueGroupsTagsTagsQueryInput:{[mr]:"Variable editor Form Query TagsQuery field"},valueGroupsTagsTagsValuesQueryInput:{[mr]:"Variable editor Form Query TagsValuesQuery field"}},ConstantVariable:{constantOptionsQueryInput:{[mr]:"Variable editor Form Constant Query field"},constantOptionsQueryInputV2:{[mr]:"data-testid Variable editor Form Constant Query field"}},DatasourceVariable:{datasourceSelect:{[mr]:"data-testid datasource variable datasource type"},nameFilter:{[mr]:"data-testid datasource variable datasource name filter"}},TextBoxVariable:{textBoxOptionsQueryInput:{[mr]:"Variable editor Form TextBox Query field"},textBoxOptionsQueryInputV2:{[mr]:"data-testid Variable editor Form TextBox Query field"}},CustomVariable:{customValueInput:{[mr]:"data-testid custom-variable-input"}},IntervalVariable:{intervalsValueInput:{[mr]:"data-testid interval variable intervals input"},autoEnabledCheckbox:{"10.4.0":"data-testid interval variable auto value checkbox"},stepCountIntervalSelect:{"10.4.0":"data-testid interval variable step count input"},minIntervalInput:{"10.4.0":"data-testid interval variable mininum interval input"}},GroupByVariable:{dataSourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid group by variable info text"},modeToggle:{"10.4.0":"data-testid group by variable mode toggle"}},AdHocFiltersVariable:{datasourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid ad-hoc filters variable info text"},modeToggle:{"11.0.0":"data-testid ad-hoc filters variable mode toggle"}}}}},Annotations:{marker:{"10.0.0":"data-testid annotation-marker"}},Rows:{Repeated:{ConfigSection:{warningMessage:{"10.2.0":"data-testid Repeated rows warning message"}}}}},Dashboards:{url:{[mr]:"/dashboards"},dashboards:{"10.2.0":e=>`Dashboard search item ${e}`},toggleView:{[mr]:"data-testid radio-button"}},SaveDashboardAsModal:{newName:{"10.2.0":"Save dashboard title field"},save:{"10.2.0":"Save dashboard button"}},SaveDashboardModal:{save:{"10.2.0":"Dashboard settings Save Dashboard Modal Save button"},saveVariables:{"10.2.0":"Dashboard settings Save Dashboard Modal Save variables checkbox"},saveTimerange:{"10.2.0":"Dashboard settings Save Dashboard Modal Save timerange checkbox"},saveRefresh:{"11.1.0":"Dashboard settings Save Dashboard Modal Save refresh checkbox"},variablesWarningAlert:{"12.2.0":"Dashboard settings Save Dashboard Modal Save variables Variables With Errors Warning Alert"}},SharePanelModal:{linkToRenderedImage:{[mr]:"Link to rendered image"}},ShareDashboardModal:{PublicDashboard:{WillBePublicCheckbox:{"9.1.0":"data-testid public dashboard will be public checkbox"},LimitedDSCheckbox:{"9.1.0":"data-testid public dashboard limited datasources checkbox"},CostIncreaseCheckbox:{"9.1.0":"data-testid public dashboard cost may increase checkbox"},PauseSwitch:{"9.5.0":"data-testid public dashboard pause switch"},EnableAnnotationsSwitch:{"9.3.0":"data-testid public dashboard on off switch for annotations"},CreateButton:{"9.5.0":"data-testid public dashboard create button"},DeleteButton:{"9.3.0":"data-testid public dashboard delete button"},CopyUrlInput:{"9.1.0":"data-testid public dashboard copy url input"},CopyUrlButton:{"9.1.0":"data-testid public dashboard copy url button"},SettingsDropdown:{"10.1.0":"data-testid public dashboard settings dropdown"},TemplateVariablesWarningAlert:{"9.1.0":"data-testid public dashboard disabled template variables alert"},UnsupportedDataSourcesWarningAlert:{"9.5.0":"data-testid public dashboard unsupported data sources alert"},NoUpsertPermissionsWarningAlert:{"9.5.0":"data-testid public dashboard no upsert permissions alert"},EnableTimeRangeSwitch:{"9.4.0":"data-testid public dashboard on off switch for time range"},EmailSharingConfiguration:{Container:{"9.5.0":"data-testid email sharing config container"},ShareType:{"9.5.0":"data-testid public dashboard share type"},EmailSharingInput:{"9.5.0":"data-testid public dashboard email sharing input"},EmailSharingInviteButton:{"9.5.0":"data-testid public dashboard email sharing invite button"},EmailSharingList:{"9.5.0":"data-testid public dashboard email sharing list"},DeleteEmail:{"9.5.0":"data-testid public dashboard delete email button"},ReshareLink:{"9.5.0":"data-testid public dashboard reshare link button"}}},SnapshotScene:{url:{"11.1.0":e=>`/dashboard/snapshot/${e}`},PublishSnapshot:{"11.1.0":"data-testid publish snapshot button"},CopyUrlButton:{"11.1.0":"data-testid snapshot copy url button"},CopyUrlInput:{"11.1.0":"data-testid snapshot copy url input"}}},ShareDashboardDrawer:{ShareInternally:{container:{"11.3.0":"data-testid share internally drawer container"},lockTimeRangeSwitch:{"11.3.0":"data-testid share internally lock time range switch"},shortenUrlSwitch:{"11.3.0":"data-testid share internally shorten url switch"},copyUrlButton:{"11.3.0":"data-testid share internally copy url button"},SharePanel:{preview:{"11.5.0":"data-testid share panel internally image generation preview"},widthInput:{"11.5.0":"data-testid share panel internally width input"},heightInput:{"11.5.0":"data-testid share panel internally height input"},scaleFactorInput:{"11.5.0":"data-testid share panel internally scale factor input"},generateImageButton:{"11.5.0":"data-testid share panel internally generate image button"},downloadImageButton:{"11.5.0":"data-testid share panel internally download image button"}}},ShareExternally:{container:{"11.3.0":"data-testid share externally drawer container"},publicAlert:{"11.3.0":"data-testid public share alert"},emailSharingAlert:{"11.3.0":"data-testid email share alert"},shareTypeSelect:{"11.3.0":"data-testid share externally share type select"},Creation:{PublicShare:{createButton:{"11.3.0":"data-testid public share dashboard create button"},cancelButton:{"11.3.0":"data-testid public share dashboard cancel button"}},EmailShare:{createButton:{"11.3.0":"data-testid email share dashboard create button"},cancelButton:{"11.3.0":"data-testid email share dashboard cancel button"}},willBePublicCheckbox:{"11.3.0":"data-testid share dashboard will be public checkbox"}},Configuration:{enableTimeRangeSwitch:{"11.3.0":"data-testid share externally enable time range switch"},enableAnnotationsSwitch:{"11.3.0":"data-testid share externally enable annotations switch"},copyUrlButton:{"11.3.0":"data-testid share externally copy url button"},revokeAccessButton:{"11.3.0":"data-testid share externally revoke access button"},toggleAccessButton:{"11.3.0":"data-testid share externally pause or resume access button"}}},ShareSnapshot:{url:{"11.3.0":e=>`/dashboard/snapshot/${e}`},container:{"11.3.0":"data-testid share snapshot drawer container"},publishSnapshot:{"11.3.0":"data-testid share snapshot publish button"},copyUrlButton:{"11.3.0":"data-testid share snapshot copy url button"}}},ExportDashboardDrawer:{ExportAsJson:{container:{"11.3.0":"data-testid export as json drawer container"},codeEditor:{"11.3.0":"data-testid export as json code editor"},exportExternallyToggle:{"11.3.0":"data-testid export as json externally switch"},saveToFileButton:{"11.3.0":"data-testid export as json save to file button"},copyToClipboardButton:{"11.3.0":"data-testid export as json copy to clipboard button"},cancelButton:{"11.3.0":"data-testid export as json cancel button"}}},PublicDashboard:{page:{"9.5.0":"public-dashboard-page"},NotAvailable:{container:{"9.5.0":"public-dashboard-not-available"},title:{"9.5.0":"public-dashboard-title"},pausedDescription:{"9.5.0":"public-dashboard-paused-description"}},footer:{"11.0.0":"public-dashboard-footer"}},PublicDashboardScene:{loadingPage:{"11.0.0":"public-dashboard-scene-loading-page"},page:{"11.0.0":"public-dashboard-scene-page"},controls:{"11.0.0":"public-dashboard-controls"}},RequestViewAccess:{form:{"9.5.0":"request-view-access-form"},recipientInput:{"9.5.0":"request-view-access-recipient-input"},submitButton:{"9.5.0":"request-view-access-submit-button"}},PublicDashboardConfirmAccess:{submitButton:{"10.2.0":"data-testid confirm-access-submit-button"}},Explore:{url:{[mr]:"/explore"},General:{container:{[mr]:"data-testid Explore"},graph:{[mr]:"Explore Graph"},table:{[mr]:"Explore Table"},scrollView:{"9.0.0":"data-testid explorer scroll view"},addFromQueryLibrary:{"11.5.0":"data-testid explore add from query library button"}},QueryHistory:{container:{"11.1.0":"data-testid QueryHistory"}}},SoloPanel:{url:{[mr]:e=>`/d-solo/${e}`}},PluginsList:{page:{[mr]:"Plugins list page"},list:{[mr]:"Plugins list"},listItem:{[mr]:"Plugins list item"},signatureErrorNotice:{"10.3.0":"data-testid Unsigned plugins notice",[mr]:"Unsigned plugins notice"}},PluginPage:{page:{[mr]:"Plugin page"},signatureInfo:{"10.3.0":"data-testid Plugin signature info",[mr]:"Plugin signature info"},disabledInfo:{"10.3.0":"data-testid Plugin disabled info",[mr]:"Plugin disabled info"}},PlaylistForm:{name:{[mr]:"Playlist name"},interval:{[mr]:"Playlist interval"},itemDelete:{"10.2.0":"data-testid playlist-form-delete-item"}},BrowseDashboards:{table:{body:{"10.2.0":"data-testid browse-dashboards-table"},row:{"10.2.0":e=>`data-testid browse dashboards row ${e}`},checkbox:{"10.0.0":e=>`data-testid ${e} checkbox`}},NewFolderForm:{form:{"10.2.0":"data-testid new folder form"},nameInput:{"10.2.0":"data-testid new-folder-name-input"},createButton:{"10.2.0":"data-testid new-folder-create-button"}}},SearchDashboards:{table:{"10.2.0":"Search results table"}},Search:{url:{"9.3.0":"/?search=openn"},FolderView:{url:{"9.3.0":"/?search=open&layout=folders"}}},PublicDashboards:{ListItem:{linkButton:{"9.3.0":"public-dashboard-link-button"},configButton:{"9.3.0":"public-dashboard-configuration-button"},trashcanButton:{"9.3.0":"public-dashboard-remove-button"},pauseSwitch:{"10.1.0":"data-testid public dashboard pause switch"}}},UserListPage:{tabs:{allUsers:{"10.0.0":"data-testid all-users-tab"},orgUsers:{"10.0.0":"data-testid org-users-tab"},anonUserDevices:{"10.2.3":"data-testid anon-user-devices-tab"},publicDashboardsUsers:{"10.0.0":"data-testid public-dashboards-users-tab"},users:{"10.0.0":"data-testid users-tab"}},org:{url:{"10.2.0":"/admin/users","9.5.0":"/org/users"}},admin:{url:{"9.5.0":"/admin/users"}},publicDashboards:{container:{"11.1.0":"data-testid public-dashboards-users-list"}},UserListAdminPage:{container:{"10.0.0":"data-testid user-list-admin-page"}},UsersListPage:{container:{"10.0.0":"data-testid users-list-page"}},UserAnonListPage:{container:{"10.4.0":"data-testid user-anon-list-page"}},UsersListPublicDashboardsPage:{container:{"10.0.0":"data-testid users-list-public-dashboards-page"},DashboardsListModal:{listItem:{"10.0.0":e=>`data-testid dashboards-list-item-${e}`}}}},ProfilePage:{url:{"10.2.0":"/profile"}},Plugin:{url:{[mr]:e=>`/plugins/${e}`}},MigrateToCloud:{url:{"11.2.0":"/admin/migrate-to-cloud"}}}),components:lr(fr)};function gr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const br=e=>{var{status:t}=e,n=vr(e,["status"]);const a=function(e){e||(e=r.PluginSignatureStatus.invalid);switch(e){case r.PluginSignatureStatus.internal:return{text:"Core",icon:"cube",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case r.PluginSignatureStatus.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case r.PluginSignatureStatus.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case r.PluginSignatureStatus.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case r.PluginSignatureStatus.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"}}return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}(t);return Re().createElement($e.Badge,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){gr(e,t,r[t])}))}return e}({text:a.text,color:a.color,icon:a.icon,tooltip:a.tooltip},n))};function yr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}br.displayName="PluginSignatureBadge";class Er extends Te.PureComponent{componentDidMount(){const{current:e}=this.props;this.dataSourceSrv.getInstanceSettings(e)||this.setState({error:"Could not find data source "+e})}getCurrentValue(){const{current:e,hideTextValue:t,noDefault:r}=this.props;if(!e&&r)return null;const n=this.dataSourceSrv.getInstanceSettings(e);return n?{label:n.name.substr(0,37),value:n.name,imgUrl:n.meta.info.logos.small,hideText:t,meta:n.meta}:{label:(null!=e?e:"no name")+" - not found",value:e||void 0,imgUrl:"",hideText:t}}getDataSourceOptions(){const{tracing:e,metrics:t,mixed:r,dashboard:n,variables:a,annotations:i,pluginId:o}=this.props;return this.dataSourceSrv.getList({tracing:e,metrics:t,dashboard:n,mixed:r,variables:a,annotations:i,pluginId:o}).map((e=>({value:e.name,label:`${e.name}${e.isDefault?" (default)":""}`,imgUrl:e.meta.info.logos.small,meta:e.meta})))}render(){const{autoFocus:e,onBlur:t,openMenuOnFocus:n,placeholder:a}=this.props,{error:i}=this.state,o=this.getDataSourceOptions(),s=this.getCurrentValue();return Re().createElement("div",{"aria-label":hr.components.DataSourcePicker.container},Re().createElement($e.Select,{className:"ds-picker select-container",isMulti:!1,isClearable:!1,backspaceRemovesValue:!1,onChange:this.onChange,options:o,autoFocus:e,onBlur:t,openMenuOnFocus:n,maxMenuHeight:500,menuPlacement:"bottom",placeholder:a,noOptionsMessage:"No datasources found",value:s,invalid:!!i,getOptionLabel:e=>{return e.meta&&((t=e.meta.signature)&&t!==r.PluginSignatureStatus.valid&&t!==r.PluginSignatureStatus.internal)&&e!==s?Re().createElement($e.HorizontalGroup,{align:"center",justify:"space-between"},Re().createElement("span",null,e.label)," ",Re().createElement(br,{status:e.meta.signature})):e.label||"";var t}}))}constructor(e){super(e),yr(this,"dataSourceSrv",(0,ie.getDataSourceSrv)()),yr(this,"state",{}),yr(this,"onChange",(e=>{const t=this.dataSourceSrv.getInstanceSettings(e.value);t&&(this.props.onChange(t),this.setState({error:void 0}))}))}}function Or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Or(e,t,r[t])}))}return e}function wr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}yr(Er,"defaultProps",{autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select datasource"});const{FormField:Ir,Switch:Ar}=$e.LegacyForms,Pr=(0,$e.stylesFactory)((()=>({firstRow:Ne.css`
    display: flex;
  `,nameField:Ne.css`
    flex: 2;
  `,regexField:Ne.css`
    flex: 3;
  `,row:Ne.css`
    display: flex;
    align-items: baseline;
  `}))),Tr=e=>{const{value:t,onChange:r,onDelete:n,suggestions:a,className:i}=e,o=Pr(),[s,l]=function(e){const[t,r]=(0,Te.useState)(!!e),n=(a=e,i=(0,Te.useRef)(),(0,Te.useEffect)((function(){i.current=a})),i.current);var a,i;return(0,Te.useEffect)((()=>{n||!e||t||r(!0),n&&!e&&t&&r(!1)}),[n,e,t]),[t,r]}(t.datasourceUid),u=e=>n=>{r(wr(Sr({},t),{[e]:n.currentTarget.value}))};return Re().createElement("div",{className:i},Re().createElement("div",{className:o.firstRow+" gf-form"},Re().createElement(Ir,{className:o.nameField,labelWidth:6,inputWidth:null,label:"Field",type:"text",value:t.field,tooltip:"Can be exact field name or a regex pattern that will match on the field name.",onChange:u("field")}),Re().createElement($e.Button,{"data-testid":`remove-button-${t.field}`,variant:"destructive","aria-label":"Remove field",title:"Remove field",icon:"times",onClick:e=>{e.preventDefault(),n()}})),Re().createElement("div",{className:"gf-form"},Re().createElement(Ir,{label:"Title",labelWidth:6,inputWidth:null,value:t.title||"",onChange:u("title"),className:Ne.css`
            width: 100%;

            > input {
              margin-right: 0;
            }
          `})),Re().createElement("div",{className:"gf-form"},Re().createElement(Ir,{label:s?"Query":"URL",labelWidth:6,inputEl:Re().createElement($e.DataLinkInput,{placeholder:s?"${__value.raw}":"http://example.com/${__value.raw}",value:t.url||"",onChange:e=>r(wr(Sr({},t),{url:e})),suggestions:a}),className:Ne.css`
            width: 100%;
          `})),Re().createElement("div",{className:o.row},Re().createElement(Ar,{labelClass:"width-6",label:"Internal link",checked:s,onChange:()=>{s&&r(wr(Sr({},t),{datasourceUid:void 0})),l(!s)}}),s&&Re().createElement(Er,{tracing:!0,onChange:e=>{r(wr(Sr({},t),{datasourceUid:e.uid}))},current:t.datasourceUid})))};const Rr=e=>({infoText:Ne.css`
    padding-bottom: ${e.spacing.md};
    color: ${e.colors.textWeak};
  `,dataLink:Ne.css`
    margin-bottom: ${e.spacing.sm};
  `}),Nr=e=>{const{value:t,onChange:n}=e,a=(0,$e.useStyles)(Rr);return Re().createElement(Re().Fragment,null,Re().createElement("h3",{className:"page-heading"},"Data links"),Re().createElement("div",{className:a.infoText},"Add links to existing fields. Links will be shown in log row details next to the field value."),t&&t.length>0&&Re().createElement("div",{className:"gf-form-group"},t.map(((e,i)=>Re().createElement(Tr,{"data-testid":"data-link",className:a.dataLink,key:i,value:e,onChange:e=>{const r=[...t];r.splice(i,1,e),n(r)},onDelete:()=>{const e=[...t];e.splice(i,1),n(e)},suggestions:[{value:r.DataLinkBuiltInVars.valueRaw,label:"Raw value",documentation:"Raw value of the field",origin:r.VariableOrigin.Value}]})))),Re().createElement($e.Button,{"data-testid":"button-add",variant:"secondary",className:Ne.css`
          margin-right: 10px;
        `,icon:"plus",onClick:e=>{e.preventDefault();const r=[...t||[],{field:"",url:""}];n(r)}},"Add"))},$r=["af-south-1","ap-east-1","ap-east-2","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-south-2","ap-southeast-1","ap-southeast-2","ap-southeast-3","ap-southeast-4","ap-southeast-5","ap-southeast-7","ca-central-1","ca-west-1","cn-north-1","cn-northwest-1","eu-central-1","eu-central-2","eu-north-1","eu-south-1","eu-south-2","eu-west-1","eu-west-2","eu-west-3","il-central-1","me-central-1","me-south-1","mx-central-1","sa-east-1","us-east-1","us-east-2","us-gov-east-1","us-gov-west-1","us-iso-east-1","us-isob-east-1","us-west-1","us-west-2"];var xr=(e=>(e.Keys="keys",e.Credentials="credentials",e.Default="default",e.EC2IAMRole="ec2_iam_role",e.ARN="arn",e.GrafanaAssumeRole="grafana_assume_role",e))(xr||{});const Lr=[{label:"Workspace IAM Role",value:xr.EC2IAMRole},{label:"Grafana Assume Role",value:xr.GrafanaAssumeRole},{label:"AWS SDK Default",value:xr.Default},{label:"Access & secret key",value:xr.Keys},{label:"Credentials file",value:xr.Credentials}],_r=(0,Ne.css)({maxWidth:"715px"});var Cr=p(2540);const Dr=({children:e,title:t,description:r,isCollapsible:n=!1,isInitiallyOpen:a=!0,kind:i="section",className:o})=>{const{colors:s,typography:l,spacing:u}=(0,$e.useTheme2)(),[c,d]=(0,Te.useState)(!n||a),p=c?"angle-up":"angle-down",m="sub-section"===i,f=`${c?"Collapse":"Expand"} section ${t}`,h={header:(0,Ne.css)({display:"flex",justifyContent:"space-between",alignItems:"center"}),title:(0,Ne.css)({margin:0}),subtitle:(0,Ne.css)({margin:0,fontWeight:l.fontWeightRegular}),descriptionText:(0,Ne.css)({marginTop:u(m?.25:.5),marginBottom:0,...l.bodySmall,color:s.text.secondary}),content:(0,Ne.css)({marginTop:u(2)})};return(0,Cr.jsxs)("div",{className:o,children:[(0,Cr.jsxs)("div",{className:h.header,children:["section"===i?(0,Cr.jsx)("h3",{className:h.title,children:t}):(0,Cr.jsx)("h6",{className:h.subtitle,children:t}),n&&(0,Cr.jsx)($e.IconButton,{name:p,onClick:()=>d(!c),type:"button",size:"xl","aria-label":f})]}),r&&(0,Cr.jsx)("p",{className:h.descriptionText,children:r}),c&&(0,Cr.jsx)("div",{className:h.content,children:e})]})},jr=({children:e,...t})=>(0,Cr.jsx)(Dr,{...t,kind:"section",children:e}),Fr=({children:e,...t})=>(0,Cr.jsx)(Dr,{...t,kind:"sub-section",children:e}),kr=["cloudwatch","grafana-athena-datasource","grafana-amazonprometheus-datasource"],Mr=e=>({value:e,label:e}),Vr=e=>"string"==typeof e&&Lr.some((t=>t.value===e)),Ur=e=>{var t,n,a,i,o,s,l,u,c;const[d,p]=(0,Te.useState)(!1),[m,f]=(0,Te.useState)((e.standardRegions||$r).map(Mr)),{loadRegions:h,onOptionsChange:g,skipHeader:v=!1,skipEndpoint:b=!1,options:y,hideAssumeRoleArn:E=!1}=e;let O=y.jsonData.profile;void 0===O&&(O=y.database);const S=ie.config.featureToggles.awsDatasourcesTempCredentials&&kr.includes(y.type),w=null==(t=ie.config.awsAssumeRoleEnabled)||t,I=(0,Te.useMemo)((()=>ie.config.awsAllowedAuthProviders.filter((e=>e!==xr.GrafanaAssumeRole||S)).filter(Vr)),[S]);S&&y.jsonData.authType===xr.GrafanaAssumeRole&&ie.config.namespace.startsWith("stacks-")&&(e.externalId=ie.config.namespace.substring(ie.config.namespace.indexOf("-")+1));const A=Lr.find((e=>e.value===y.jsonData.authType));return(0,Te.useEffect)((()=>{!A&&I.length&&g({...y,jsonData:{...y.jsonData,authType:I[0]}})}),[A,y,g,I]),(0,Te.useEffect)((()=>{h&&h().then((e=>f(e.map(Mr))))}),[h]),Re().createElement("div",{"data-testid":"connection-config"},Re().createElement(jr,{title:v?"":"Connection Details","data-testid":"connection-config"},Re().createElement(Fr,{title:"Authentication"},Re().createElement($e.Field,{label:"Authentication Provider",description:"Specify which AWS credentials chain to use.",htmlFor:"authProvider"},Re().createElement($e.Select,{"aria-label":"Authentication Provider",inputId:"authProvider",value:A,options:Lr.filter((e=>I.includes(e.value))),defaultValue:y.jsonData.authType,onChange:t=>{(0,r.onUpdateDatasourceJsonDataOptionSelect)(e,"authType")(t)},menuShouldPortal:!0})),"credentials"===y.jsonData.authType&&Re().createElement($e.Field,{label:"Credentials Profile Name",description:"Credentials profile name, as specified in ~/.aws/credentials, leave blank for default.",htmlFor:"credentialsProfileName"},Re().createElement($e.Input,{id:"credentialsProfileName",placeholder:"default",value:y.jsonData.profile,onChange:(0,r.onUpdateDatasourceJsonDataOption)(e,"profile")})),"keys"===y.jsonData.authType&&Re().createElement(Re().Fragment,null,Re().createElement($e.Field,{label:"Access Key ID",htmlFor:"accessKeyId"},(null==(n=e.options.secureJsonFields)?void 0:n.accessKey)?Re().createElement($e.ButtonGroup,null,Re().createElement($e.Input,{disabled:!0,placeholder:"Configured",id:"accessKeyId"}),Re().createElement($e.ToolbarButton,{icon:"edit",tooltip:"Edit Access Key ID",type:"button",onClick:(0,r.onUpdateDatasourceResetOption)(e,"accessKey")})):Re().createElement($e.Input,{id:"accessKeyId",value:null!=(i=null==(a=y.secureJsonData)?void 0:a.accessKey)?i:"",onChange:(0,r.onUpdateDatasourceSecureJsonDataOption)(e,"accessKey")})),Re().createElement($e.Field,{label:"Secret Access Key",htmlFor:"secretKey"},(null==(o=e.options.secureJsonFields)?void 0:o.secretKey)?Re().createElement($e.ButtonGroup,null,Re().createElement($e.Input,{disabled:!0,placeholder:"Configured"}),Re().createElement($e.ToolbarButton,{id:"secretKey",icon:"edit",type:"button",tooltip:"Edit Secret Access Key",onClick:(0,r.onUpdateDatasourceResetOption)(e,"secretKey")})):Re().createElement($e.Input,{id:"secretKey",value:null!=(l=null==(s=y.secureJsonData)?void 0:s.secretKey)?l:"",onChange:(0,r.onUpdateDatasourceSecureJsonDataOption)(e,"secretKey")})))),!E&&Re().createElement(Fr,{title:"Assume Role"},y.jsonData.authType===xr.GrafanaAssumeRole&&Re().createElement("div",{className:_r},Re().createElement($e.Collapse,{label:"How to create an IAM role for grafana to assume:",collapsible:!0,isOpen:d,onToggle:()=>p(!d)},Re().createElement("ol",null,Re().createElement("li",null,Re().createElement("p",null,"1. Create a new IAM role in the AWS console, and select ",Re().createElement("code",null,"Another AWS account")," as the"," ",Re().createElement("code",null,"Trusted entity"),".")),Re().createElement("li",null,Re().createElement("p",null,"2. Enter the account ID of the Grafana account that has permission to assume this role:",Re().createElement("code",null," 008923505280 ")," and check the ",Re().createElement("code",null,"Require external ID")," box.")),Re().createElement("li",null,Re().createElement("p",null,"3. Enter the following external ID:"," ",Re().createElement("code",null,e.externalId||"External Id is currently unavailable")," and click"," ",Re().createElement("code",null,"Next"),".")),Re().createElement("li",null,Re().createElement("p",null,"4. Add any required permissions you would like Grafana to be able to access on your behalf. For more details on our permissions please"," ",Re().createElement("a",{href:"https://grafana.com/docs/grafana/latest/datasources/aws-cloudwatch/",target:"_blank",rel:"noreferrer"},"read through our documentation"),".")),Re().createElement("li",null,Re().createElement("p",null,"5. Give the role a name and description, and click ",Re().createElement("code",null,"Create role"),".")),Re().createElement("li",null,Re().createElement("p",null,"6. Copy the ARN of the role you just created and paste it into the ",Re().createElement("code",null,"Assume Role ARN")," ","field below."))))),w&&Re().createElement(Re().Fragment,null,Re().createElement($e.Field,{htmlFor:"assumeRoleArn",label:"Assume Role ARN",description:"Optional. Specifying the ARN of a role will ensure that the\n                     selected authentication provider is used to assume the role rather than the\n                     credentials directly."},Re().createElement($e.Input,{id:"assumeRoleArn",placeholder:"arn:aws:iam:*",value:y.jsonData.assumeRoleArn||"",onChange:(0,r.onUpdateDatasourceJsonDataOption)(e,"assumeRoleArn")})),y.jsonData.authType!==xr.GrafanaAssumeRole&&Re().createElement($e.Field,{htmlFor:"externalId",label:"External ID",description:"If you are assuming a role in another account, that has been created with an external ID, specify the external ID here."},Re().createElement($e.Input,{id:"externalId",placeholder:"External ID",value:y.jsonData.externalId||"",onChange:(0,r.onUpdateDatasourceJsonDataOption)(e,"externalId")})))),Re().createElement(Fr,{title:"Additional Settings"},!b&&y.jsonData.authType!==xr.GrafanaAssumeRole&&Re().createElement($e.Field,{label:"Endpoint",description:"Optionally, specify a custom endpoint for the service",htmlFor:"endpoint"},Re().createElement($e.Input,{id:"endpoint",placeholder:null!=(u=e.defaultEndpoint)?u:"https://{service}.{region}.amazonaws.com",value:y.jsonData.endpoint||"",onChange:(0,r.onUpdateDatasourceJsonDataOption)(e,"endpoint")})),Re().createElement($e.Field,{label:"Default Region",description:"Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region.",htmlFor:"defaultRegion"},Re().createElement($e.Select,{inputId:"defaultRegion",value:null!=(c=m.find((e=>e.value===y.jsonData.defaultRegion)))?c:y.jsonData.defaultRegion?{label:y.jsonData.defaultRegion,value:y.jsonData.defaultRegion}:void 0,options:m,defaultValue:y.jsonData.defaultRegion,allowCustomValue:!0,onChange:(0,r.onUpdateDatasourceJsonDataOptionSelect)(e,"defaultRegion"),formatCreateLabel:e=>`Use region: ${e}`,menuShouldPortal:!0}))),e.children))};const qr=e=>{var t,r,n,a;const{onOptionsChange:i,options:o}=e,s={onOptionsChange:e=>{var t,r,n,a;const s={...o,jsonData:{...o.jsonData,sigV4AuthType:e.jsonData.authType,sigV4Profile:e.jsonData.profile,sigV4AssumeRoleArn:e.jsonData.assumeRoleArn,sigV4ExternalId:e.jsonData.externalId,sigV4Region:e.jsonData.defaultRegion,sigV4Endpoint:e.jsonData.endpoint},secureJsonFields:{sigV4AccessKey:null==(t=e.secureJsonFields)?void 0:t.accessKey,sigV4SecretKey:null==(r=e.secureJsonFields)?void 0:r.secretKey},secureJsonData:{sigV4AccessKey:null==(n=e.secureJsonData)?void 0:n.accessKey,sigV4SecretKey:null==(a=e.secureJsonData)?void 0:a.secretKey}};i(s)},options:{...o,jsonData:{...o.jsonData,authType:o.jsonData.sigV4AuthType,profile:o.jsonData.sigV4Profile,assumeRoleArn:o.jsonData.sigV4AssumeRoleArn,externalId:o.jsonData.sigV4ExternalId,defaultRegion:o.jsonData.sigV4Region,endpoint:o.jsonData.sigV4Endpoint},secureJsonFields:{accessKey:null==(t=o.secureJsonFields)?void 0:t.sigV4AccessKey,secretKey:null==(r=o.secureJsonFields)?void 0:r.sigV4SecretKey},secureJsonData:{accessKey:null==(n=o.secureJsonData)?void 0:n.sigV4AccessKey,secretKey:null==(a=o.secureJsonData)?void 0:a.sigV4SecretKey}},inExperimentalAuthComponent:e.inExperimentalAuthComponent};return Re().createElement(Re().Fragment,null,Re().createElement("div",{className:"gf-form"},Re().createElement("h6",null,"SigV4 Auth Details")),Re().createElement(Ur,{...s,skipHeader:!0,skipEndpoint:!0}))};p(1269),p(4174);function Br(e){return"function"==typeof e}var Gr=function(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Hr(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Wr=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,n,a;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var o=u(i),s=o.next();!s.done;s=o.next()){s.value.remove(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else i.remove(this);var l=this.initialTeardown;if(Br(l))try{l()}catch(e){a=e instanceof Gr?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var m=u(p),f=m.next();!f.done;f=m.next()){var h=f.value;try{zr(h)}catch(e){a=null!=a?a:[],e instanceof Gr?a=d(d([],c(a)),c(e.errors)):a.push(e)}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}}if(a)throw new Gr(a)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)zr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Hr(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&Hr(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function Kr(e){return e instanceof Wr||e&&"closed"in e&&Br(e.remove)&&Br(e.add)&&Br(e.unsubscribe)}function zr(e){Br(e)?e():e.unsubscribe()}Wr.EMPTY;var Qr=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,d([e,t],c(r)))};function Xr(e){Qr((function(){throw e}))}function Yr(){}var Jr=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,Kr(t)&&t.add(r)):r.destination=rn,r}return l(t,e),t.create=function(e,t,r){return new en(e,t,r)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Wr),Zr=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){tn(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){tn(e)}else tn(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){tn(e)}},e}(),en=function(e){function t(t,r,n){var a,i=e.call(this)||this;return a=Br(t)||!t?{next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:t,i.destination=new Zr(a),i}return l(t,e),t}(Jr);function tn(e){Xr(e)}var rn={closed:!0,next:Yr,error:function(e){throw e},complete:Yr};!function(e){function t(t,r,n,a,i,o){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=o,s._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}l(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}(Jr);var nn="function"==typeof Symbol&&Symbol.observable||"@@observable";function an(e){return e}var on={Promise:void 0};!function(){function e(e){e&&(this._subscribe=e)}e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,a=this,i=(n=e)&&n instanceof Jr||function(e){return e&&Br(e.next)&&Br(e.error)&&Br(e.complete)}(n)&&Kr(n)?e:new en(e,t,r);return function(){var e=a,t=e.operator,r=e.source;i.add(t?t.call(i,r):r?a._subscribe(i):a._trySubscribe(i))}(),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=sn(t))((function(t,n){var a=new en({next:function(t){try{e(t)}catch(e){n(e),a.unsubscribe()}},error:n,complete:t});r.subscribe(a)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[nn]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(0===(e=t).length?an:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=sn(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)}}();function sn(e){var t;return null!==(t=null!=e?e:on.Promise)&&void 0!==t?t:Promise}"function"==typeof Symbol&&Symbol.iterator&&Symbol.iterator;ie.DataSourceWithBackend;function ln(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function un(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){un(e,t,r[t])}))}return e}function dn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const pn=(e,t,r)=>(0,Te.useCallback)((n=>{e(r(t,n))}),[e,t,r]),mn=(0,Te.createContext)(void 0),fn=()=>{const e=(0,Te.useContext)(mn);if(!e)throw new Error("Use DispatchContext first.");return e};function hn(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function gn(e){return!!e&&!!e[ia]}function vn(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===oa}(e)||Array.isArray(e)||!!e[aa]||!!(null===(t=e.constructor)||void 0===t?void 0:t[aa])||In(e)||An(e))}function bn(e,t,r){void 0===r&&(r=!1),0===yn(e)?(r?Object.keys:sa)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function yn(e){var t=e[ia];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:In(e)?2:An(e)?3:0}function En(e,t){return 2===yn(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function On(e,t){return 2===yn(e)?e.get(t):e[t]}function Sn(e,t,r){var n=yn(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function wn(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function In(e){return ea&&e instanceof Map}function An(e){return ta&&e instanceof Set}function Pn(e){return e.o||e.t}function Tn(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=la(e);delete t[ia];for(var r=sa(t),n=0;n<r.length;n++){var a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Rn(e,t){return void 0===t&&(t=!1),$n(e)||gn(e)||!vn(e)||(yn(e)>1&&(e.set=e.add=e.clear=e.delete=Nn),Object.freeze(e),t&&bn(e,(function(e,t){return Rn(t,!0)}),!0)),e}function Nn(){hn(2)}function $n(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function xn(e){var t=ua[e];return t||hn(18,e),t}function Ln(e,t){ua[e]||(ua[e]=t)}function _n(){return Jn}function Cn(e,t){t&&(xn("Patches"),e.u=[],e.s=[],e.v=t)}function Dn(e){jn(e),e.p.forEach(kn),e.p=null}function jn(e){e===Jn&&(Jn=e.l)}function Fn(e){return Jn={p:[],l:Jn,h:e,m:!0,_:0}}function kn(e){var t=e[ia];0===t.i||1===t.i?t.j():t.g=!0}function Mn(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||xn("ES5").S(t,e,n),n?(r[ia].P&&(Dn(t),hn(4)),vn(e)&&(e=Vn(t,e),t.l||qn(t,e)),t.u&&xn("Patches").M(r[ia].t,e,t.u,t.s)):e=Vn(t,r,[]),Dn(t),t.u&&t.v(t.u,t.s),e!==na?e:void 0}function Vn(e,t,r){if($n(t))return t;var n=t[ia];if(!n)return bn(t,(function(a,i){return Un(e,n,t,a,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return qn(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=Tn(n.k):n.o,i=a,o=!1;3===n.i&&(i=new Set(a),a.clear(),o=!0),bn(i,(function(t,i){return Un(e,n,a,t,i,r,o)})),qn(e,a,!1),r&&e.u&&xn("Patches").N(n,r,e.u,e.s)}return n.o}function Un(e,t,r,n,a,i,o){if(gn(a)){var s=Vn(e,a,i&&t&&3!==t.i&&!En(t.R,n)?i.concat(n):void 0);if(Sn(r,n,s),!gn(s))return;e.m=!1}else o&&r.add(a);if(vn(a)&&!$n(a)){if(!e.h.D&&e._<1)return;Vn(e,a),t&&t.A.l||qn(e,a)}}function qn(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&Rn(t,r)}function Bn(e,t){var r=e[ia];return(r?Pn(r):e)[t]}function Gn(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Hn(e){e.P||(e.P=!0,e.l&&Hn(e.l))}function Wn(e){e.o||(e.o=Tn(e.t))}function Kn(e,t,r){var n=In(t)?xn("MapSet").F(t,r):An(t)?xn("MapSet").T(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:_n(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=n,i=ca;r&&(a=[n],i=da);var o=Proxy.revocable(a,i),s=o.revoke,l=o.proxy;return n.k=l,n.j=s,l}(t,r):xn("ES5").J(t,r);return(r?r.A:_n()).p.push(n),n}function zn(e){return gn(e)||hn(22,e),function e(t){if(!vn(t))return t;var r,n=t[ia],a=yn(t);if(n){if(!n.P&&(n.i<4||!xn("ES5").K(n)))return n.t;n.I=!0,r=Qn(t,a),n.I=!1}else r=Qn(t,a);return bn(r,(function(t,a){n&&On(n.t,t)===a||Sn(r,t,e(a))})),3===a?new Set(r):r}(e)}function Qn(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Tn(e)}function Xn(){function e(e,t){var r=a[e];return r?r.enumerable=t:a[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[ia];return ca.get(t,e)},set:function(t){var r=this[ia];ca.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var a=e[t][ia];if(!a.P)switch(a.i){case 5:n(a)&&Hn(a);break;case 4:r(a)&&Hn(a)}}}function r(e){for(var t=e.t,r=e.k,n=sa(r),a=n.length-1;a>=0;a--){var i=n[a];if(i!==ia){var o=t[i];if(void 0===o&&!En(t,i))return!0;var s=r[i],l=s&&s[ia];if(l?l.t!==o:!wn(s,o))return!0}}var u=!!t[ia];return n.length!==sa(t).length+(u?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var a={};Ln("ES5",{J:function(t,r){var n=Array.isArray(t),a=function(t,r){if(t){for(var n=Array(r.length),a=0;a<r.length;a++)Object.defineProperty(n,""+a,e(a,!0));return n}var i=la(r);delete i[ia];for(var o=sa(i),s=0;s<o.length;s++){var l=o[s];i[l]=e(l,t||!!i[l].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={i:n?5:4,A:r?r.A:_n(),P:!1,I:!1,R:{},l:r,t,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,ia,{value:i,writable:!0}),a},S:function(e,r,a){a?gn(r)&&r[ia].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[ia];if(r){var a=r.t,i=r.k,o=r.R,s=r.i;if(4===s)bn(i,(function(t){t!==ia&&(void 0!==a[t]||En(a,t)?o[t]||e(i[t]):(o[t]=!0,Hn(r)))})),bn(a,(function(e){void 0!==i[e]||En(i,e)||(o[e]=!1,Hn(r))}));else if(5===s){if(n(r)&&(Hn(r),o.length=!0),i.length<a.length)for(var l=i.length;l<a.length;l++)o[l]=!1;else for(var u=a.length;u<i.length;u++)o[u]=!0;for(var c=Math.min(i.length,a.length),d=0;d<c;d++)i.hasOwnProperty(d)||(o[d]=!0),void 0===o[d]&&e(i[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}var Yn,Jn,Zn="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ea="undefined"!=typeof Map,ta="undefined"!=typeof Set,ra="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,na=Zn?Symbol.for("immer-nothing"):((Yn={})["immer-nothing"]=!0,Yn),aa=Zn?Symbol.for("immer-draftable"):"__$immer_draftable",ia=Zn?Symbol.for("immer-state"):"__$immer_state",oa=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),sa="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,la=Object.getOwnPropertyDescriptors||function(e){var t={};return sa(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},ua={},ca={get:function(e,t){if(t===ia)return e;var r=Pn(e);if(!En(r,t))return function(e,t,r){var n,a=Gn(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!vn(n)?n:n===Bn(e.t,t)?(Wn(e),e.o[t]=Kn(e.A.h,n,e)):n},has:function(e,t){return t in Pn(e)},ownKeys:function(e){return Reflect.ownKeys(Pn(e))},set:function(e,t,r){var n=Gn(Pn(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=Bn(Pn(e),t),i=null==a?void 0:a[ia];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(wn(r,a)&&(void 0!==r||En(e.t,t)))return!0;Wn(e),Hn(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Bn(e.t,t)||t in e.t?(e.R[t]=!1,Wn(e),Hn(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Pn(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){hn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){hn(12)}},da={};bn(ca,(function(e,t){da[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),da.deleteProperty=function(e,t){return da.set.call(this,e,t,void 0)},da.set=function(e,t,r){return ca.set.call(this,e[0],t,r,e[0])};var pa=function(){function e(e){var t=this;this.O=ra,this.D=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var a=r;r=e;var i=t;return function(e){var t=this;void 0===e&&(e=a);for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return i.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(o))}))}}var o;if("function"!=typeof r&&hn(6),void 0!==n&&"function"!=typeof n&&hn(7),vn(e)){var s=Fn(t),l=Kn(t,e,void 0),u=!0;try{o=r(l),u=!1}finally{u?Dn(s):jn(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Cn(s,n),Mn(e,s)}),(function(e){throw Dn(s),e})):(Cn(s,n),Mn(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=r(e))&&(o=e),o===na&&(o=void 0),t.D&&Rn(o,!0),n){var c=[],d=[];xn("Patches").M(e,o,c,d),n(c,d)}return o}hn(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(a))}))};var n,a,i=t.produce(e,r,(function(e,t){n=e,a=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,n,a]})):[i,n,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){vn(e)||hn(8),gn(e)&&(e=zn(e));var t=Fn(this),r=Kn(this,e,void 0);return r[ia].C=!0,jn(t),r},t.finishDraft=function(e,t){var r=(e&&e[ia]).A;return Cn(r,t),Mn(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!ra&&hn(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var a=xn("Patches").$;return gn(e)?a(e,t):this.produce(e,(function(e){return a(e,t)}))},e}(),ma=new pa;ma.produce,ma.produceWithPatches.bind(ma),ma.setAutoFreeze.bind(ma),ma.setUseProxies.bind(ma),ma.applyPatches.bind(ma),ma.createDraft.bind(ma),ma.finishDraft.bind(ma);var fa=p(7694),ha=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ga=function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},va=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},ba=Object.defineProperty,ya=Object.defineProperties,Ea=Object.getOwnPropertyDescriptors,Oa=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,wa=Object.prototype.propertyIsEnumerable,Ia=function(e,t,r){return t in e?ba(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Aa=function(e,t){for(var r in t||(t={}))Sa.call(t,r)&&Ia(e,r,t[r]);if(Oa)for(var n=0,a=Oa(t);n<a.length;n++){r=a[n];wa.call(t,r)&&Ia(e,r,t[r])}return e},Pa=function(e,t){return ya(e,Ea(t))},Ta=function(e,t,r){return new Promise((function(n,a){var i=function(e){try{s(r.next(e))}catch(e){a(e)}},o=function(e){try{s(r.throw(e))}catch(e){a(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,o)};s((r=r.apply(e,t)).next())}))};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Ra(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var a=t.apply(void 0,r);if(!a)throw new Error("prepareAction did not return an object");return Aa(Aa({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}(function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}ha(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,va([void 0],e[0].concat(this)))):new(t.bind.apply(t,va([void 0],e.concat(this))))}})(Array),function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}ha(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,va([void 0],e[0].concat(this)))):new(t.bind.apply(t,va([void 0],e.concat(this))))}}(Array);var Na=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},$a=["name","message","stack","code"],xa=function(e,t){this.payload=e,this.meta=t},La=function(e,t){this.payload=e,this.meta=t},_a=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=$a;r<n.length;r++){var a=n[r];"string"==typeof e[a]&&(t[a]=e[a])}return t}return{message:String(e)}};!function(){function e(e,t,r){var n=Ra(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:Pa(Aa({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),a=Ra(e+"/pending",(function(e,t,r){return{payload:void 0,meta:Pa(Aa({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),i=Ra(e+"/rejected",(function(e,t,n,a,i){return{payload:a,error:(r&&r.serializeError||_a)(e||"Rejected"),meta:Pa(Aa({},i||{}),{arg:n,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,l,u){var c,d=(null==r?void 0:r.idGenerator)?r.idGenerator(e):Na(),p=new o;function m(e){c=e,p.abort()}var f=function(){return Ta(this,null,(function(){var o,f,h,g,v,b;return ga(this,(function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),g=null==(o=null==r?void 0:r.condition)?void 0:o.call(r,e,{getState:l,extra:u}),null===(E=g)||"object"!=typeof E||"function"!=typeof E.then?[3,2]:[4,g];case 1:g=y.sent(),y.label=2;case 2:if(!1===g||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=new Promise((function(e,t){return p.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),s(a(d,e,null==(f=null==r?void 0:r.getPendingMeta)?void 0:f.call(r,{requestId:d,arg:e},{getState:l,extra:u}))),[4,Promise.race([v,Promise.resolve(t(e,{dispatch:s,getState:l,extra:u,requestId:d,signal:p.signal,abort:m,rejectWithValue:function(e,t){return new xa(e,t)},fulfillWithValue:function(e,t){return new La(e,t)}})).then((function(t){if(t instanceof xa)throw t;return t instanceof La?n(t.payload,d,e,t.meta):n(t,d,e)}))])];case 3:return h=y.sent(),[3,5];case 4:return b=y.sent(),h=b instanceof xa?i(null,d,e,b.payload,b.meta):i(b,d,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&i.match(h)&&h.meta.condition||s(h),[2,h]}var E}))}))}();return Object.assign(f,{abort:m,requestId:d,arg:e,unwrap:function(){return f.then(Ca)}})}}),{pending:a,rejected:i,fulfilled:n,typePrefix:e})}e.withTypes=function(){return e}}();function Ca(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Da="listenerMiddleware";Ra(Da+"/add"),Ra(Da+"/removeAll"),Ra(Da+"/remove");"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:void 0!==p.g?p.g:globalThis);var ja,Fa=function(e){return function(t){setTimeout(t,e)}};"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Fa(10);Xn();const ka=Ra("init"),Ma=Ra("change_query"),Va=Ra("change_alias_pattern"),Ua=(e,t)=>Ma.match(t)?t.payload:ka.match(t)?e||"":e,qa=(e,t)=>Va.match(t)?t.payload:ka.match(t)?e||"":e,Ba=Ra("@metrics/add"),Ga=Ra("@metrics/remove"),Ha=Ra("@metrics/change_type"),Wa=Ra("@metrics/change_field"),Ka=Ra("@metrics/toggle_visibility"),za=Ra("@metrics/change_attr"),Qa=Ra("@metrics/change_setting"),Xa=Ra("@metrics/change_meta"),Ya=Ra("update_lucene_type_and_metrics"),Ja=(e,t)=>Ya.match(t)?t.payload.luceneQueryType:ka.match(t)?e||W.Metric:e;function Za(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Za(e,t,r[t])}))}return e}function ti(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const ri=(e,t)=>{if(Ba.match(t))return[...e||[],re(t.payload)];if(Ga.match(t)){const r=null==e?void 0:e.find((e=>e.id===t.payload)),n=[r,...z(r,e||[])],a=null==e?void 0:e.filter((e=>!n.some((t=>t.id===e.id))));return 0===(null==a?void 0:a.length)?[re("1")]:a}return Ha.match(t)||Ya.match(t)?ni(e||[],t.payload.id,t.payload.type):Wa.match(t)?null==e?void 0:e.map((e=>e.id!==t.payload.id?e:ti(ei({},e),{field:t.payload.field}))):Ka.match(t)?null==e?void 0:e.map((e=>e.id!==t.payload?e:ti(ei({},e),{hide:!e.hide}))):za.match(t)?null==e?void 0:e.map((e=>e.id!==t.payload.metric.id?e:ti(ei({},e),{[t.payload.attribute]:t.payload.newValue}))):Qa.match(t)?e.map((e=>{if(e.id!==t.payload.metric.id)return e;if(Z(e)){const r=de(ti(ei({},e.settings),{[t.payload.settingName]:t.payload.newValue}));return ti(ei({},e),{settings:ei({},r)})}return e})):Xa.match(t)?null==e?void 0:e.map((e=>e.id!==t.payload.metric.id?e:(e=>K[e.type].hasMeta)(e)?ti(ei({},e),{meta:ti(ei({},e.meta),{[t.payload.meta]:t.payload.newValue})}):e)):ka.match(t)?(null==e?void 0:e.length)?e:[re("1")]:e},ni=(e,t,r)=>null==e?void 0:e.filter((e=>!K[r].isSingleMetric||e.id===t)).map((e=>e.id!==t?e:ei({id:e.id,type:r},K[r].defaults))),ai=Ra("@bucketAggs/add"),ii=Ra("@bucketAggs/remove"),oi=Ra("@bucketAggs/change_type"),si=Ra("@bucketAggs/change_field"),li=Ra("@bucketAggs/change_setting");function ui(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ci(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ui(e,t,r[t])}))}return e}function di(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const pi=Ra("change_query_type"),mi=(e,t)=>pi.match(t)?t.payload:ka.match(t)?G.Lucene:e,fi=Ra("change_format"),hi=(e,t)=>fi.match(t)?t.payload:ka.match(t)?"table":e;function gi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const bi=(0,Te.createContext)(void 0),yi=(0,Te.createContext)(void 0),Ei=({children:e,onChange:t,query:r,datasource:n})=>{const a=(i={query:Ua,queryType:mi,luceneQueryType:Ja,alias:qa,metrics:ri,bucketAggs:(o=n.timeField,(e,t)=>{if(ai.match(t)){const r={id:t.payload,type:"terms",settings:Ee.terms.defaultSettings},n=null==e?void 0:e[e.length-1];return"date_histogram"===(null==n?void 0:n.type)?[...(e||[]).slice(0,-1),r,n]:[...e||[],r]}return ii.match(t)?null==e?void 0:e.filter((e=>e.id!==t.payload)):oi.match(t)?null==e?void 0:e.map((e=>e.id!==t.payload.id?e:{id:e.id,type:t.payload.newType,settings:Ee[t.payload.newType].defaultSettings})):si.match(t)?null==e?void 0:e.map((e=>e.id!==t.payload.id?e:di(ci({},e),{field:t.payload.newField}))):Ha.match(t)?K[t.payload.type].isSingleMetric?[]:0===(null==e?void 0:e.length)?[ne()]:e:li.match(t)?e.map((e=>{if(e.id!==t.payload.bucketAgg.id)return e;const r=de(di(ci({},e.settings),{[t.payload.settingName]:t.payload.newValue}));return di(ci({},e),{settings:ci({},r)})})):ka.match(t)?(null==e?void 0:e.length)?e:[di(ci({},ne("2")),{field:o})]:e}),format:hi},(e,t)=>{const r={};for(const n in i)r[n]=i[n](e[n],t);return r});var i,o;const s=pn((e=>t(vi(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){gi(e,t,r[t])}))}return e}({},r,e),{timeField:n.timeField}))),r,a);return r.metrics&&r.bucketAggs&&void 0!==r.query?Re().createElement(bi.Provider,{value:n},Re().createElement(yi.Provider,{value:r},Re().createElement(mn.Provider,{value:s},e))):(s(ka()),null)},Oi=()=>{const e=(0,Te.useContext)(yi);if(!e)throw new Error("use OpenSearchProvider first.");return e},Si=()=>{const e=(0,Te.useContext)(bi);if(!e)throw new Error("use OpenSearchProvider first.");return e},wi=e=>e.id,Ii=e=>parseInt(e,10),Ai=Ne.css`
  min-width: 150px;
`,Pi=(0,$e.stylesFactory)(((e,t)=>({wrapper:Ne.css`
      display: flex;
      flex-direction: column;
    `,settingsWrapper:Ne.css`
      padding-top: ${e.spacing.xs};
    `,icon:Ne.css`
      margin-right: ${e.spacing.xs};
    `,button:Ne.css`
      justify-content: start;
      ${t&&Ne.css`
        color: ${e.colors.textFaint};
      `}
    `}))),Ti=({label:e,children:t,hidden:r=!1})=>{const[n,a]=(0,Te.useState)(!1),i=Pi((0,$e.useTheme)(),r);return Re().createElement($e.InlineSegmentGroup,null,Re().createElement("div",{className:(0,Ne.cx)(i.wrapper)},Re().createElement("button",{"data-testid":"settings-button",className:(0,Ne.cx)("gf-form-label query-part",i.button,Ai),onClick:()=>a(!n),"aria-expanded":n},Re().createElement($e.Icon,{name:n?"angle-down":"angle-right","aria-hidden":"true",className:i.icon}),e),n&&Re().createElement("div",{className:i.settingsWrapper},t)))};function Ri(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ni(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const $i=Ne.css`
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
`,xi=e=>{var{iconName:t,onClick:r,className:n,label:a}=e,i=Ni(e,["iconName","onClick","className","label"]);return Re().createElement("button",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ri(e,t,r[t])}))}return e}({className:(0,Ne.cx)("gf-form-label gf-form-label--btn query-part",n),onClick:r},i),Re().createElement("span",{className:$i},a),Re().createElement($e.Icon,{name:t,"aria-hidden":"true"}))},Li=({index:e,onAdd:t,onRemove:r,elements:n})=>Re().createElement("div",{className:Ne.css`
        display: flex;
      `},0===e&&Re().createElement(xi,{iconName:"plus",onClick:t,label:"add"}),n.length>=2&&Re().createElement(xi,{iconName:"minus",onClick:r,label:"remove"})),_i=Ra("@bucketAggregations/filter/add"),Ci=Ra("@bucketAggregations/filter/remove"),Di=Ra("@bucketAggregations/filter/change"),ji=(e=[],t)=>_i.match(t)?[...e,{label:"",query:"*"}]:Ci.match(t)?e.slice(0,t.payload).concat(e.slice(t.payload+1)):Di.match(t)?e.map(((e,r)=>r!==t.payload.index?e:t.payload.filter)):e;function Fi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ki(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Fi(e,t,r[t])}))}return e}function Mi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Vi=({value:e})=>{var t,r,n,a;const i=fn(),o=pn((t=>i(li({bucketAgg:e,settingName:"filters",newValue:t}))),null===(t=e.settings)||void 0===t?void 0:t.filters,ji);return(0,Te.useEffect)((()=>{var t,r;(null===(r=e.settings)||void 0===r||null===(t=r.filters)||void 0===t?void 0:t.length)||o(_i())}),[null===(n=e.settings)||void 0===n||null===(r=n.filters)||void 0===r?void 0:r.length,o]),Re().createElement(Re().Fragment,null,Re().createElement("div",{className:Ne.css`
          display: flex;
          flex-direction: column;
        `},null===(a=e.settings)||void 0===a?void 0:a.filters.map(((t,r)=>{var n;return Re().createElement("div",{key:r,className:Ne.css`
              display: flex;
            `},Re().createElement("div",{className:Ne.css`
                width: 250px;
              `},Re().createElement($e.InlineField,{label:"Query",labelWidth:10},Re().createElement($e.QueryField,{placeholder:"Lucene Query",portalOrigin:"opensearch",onBlur:()=>{},onChange:e=>o(Di({index:r,filter:Mi(ki({},t),{query:e})})),query:t.query}))),Re().createElement($e.InlineField,{label:"Label",labelWidth:10},Re().createElement($e.Input,{placeholder:"Label",onBlur:e=>o(Di({index:r,filter:Mi(ki({},t),{label:e.target.value})})),defaultValue:t.label})),Re().createElement(Li,{index:r,elements:(null===(n=e.settings)||void 0===n?void 0:n.filters)||[],onAdd:()=>o(_i()),onRemove:()=>o(Ci(r))}))}))))},Ui=e=>t=>t.value===e;function qi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){qi(e,t,r[t])}))}return e}function Gi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Hi={labelWidth:16},Wi=[{label:"Map",value:"map"},{label:"Global Ordinals",value:"global_ordinals"}],Ki=({bucketAgg:e})=>{var t,r,n,a,i,o,s,l,u,c,d,p,m,f,h,g,v,b,y,E,O,S,w,I,A;const P=fn(),{metrics:T}=Oi(),R=(e=>{const{metrics:t}=Oi();switch(e.type){case"terms":{var r,n,a,i;const s=(null===(r=e.settings)||void 0===r?void 0:r.order)||"desc",l=(null===(n=e.settings)||void 0===n?void 0:n.size)||"10",u=parseInt((null===(a=e.settings)||void 0===a?void 0:a.min_doc_count)||"0",10),c=(null===(i=e.settings)||void 0===i?void 0:i.orderBy)||"_term";let d="";var o;if("0"!==l)d=`${null===(o=Oe.find(Ui(s)))||void 0===o?void 0:o.label} ${l}, `;u>0&&(d+=`Min Doc Count: ${u}, `),d+="Order by: ";const p=we.find(Ui(c));if(p)d+=p.label;else{const e=null==t?void 0:t.find((e=>e.id===he(c)));d+=e?ce(e):"metric not found"}return"0"===l&&(d+=` (${s})`),d}case"histogram":{var s,l;const t=(null===(s=e.settings)||void 0===s?void 0:s.interval)||1e3,r=parseInt((null===(l=e.settings)||void 0===l?void 0:l.min_doc_count)||"1",10);return`Interval: ${t}${r>0?`, Min Doc Count: ${r}`:""}`}case"filters":var u,c;return`Filter Queries (${((null===(u=e.settings)||void 0===u?void 0:u.filters)||(null===(c=Ee.filters.defaultSettings)||void 0===c?void 0:c.filters)).length})`;case"geohash_grid":var d;return`Precision: ${Math.max(Math.min(parseInt((null===(d=e.settings)||void 0===d?void 0:d.precision)||"5",10),12),1)}`;case"date_histogram":{var p,m,f;const t=(null===(p=e.settings)||void 0===p?void 0:p.interval)||"auto",r=parseInt((null===(m=e.settings)||void 0===m?void 0:m.min_doc_count)||"0",10),n=parseInt((null===(f=e.settings)||void 0===f?void 0:f.trimEdges)||"0",10);let a=`Interval: ${t}`;return r>0&&(a+=`, Min Doc Count: ${r}`),n>0&&(a+=`, Trim edges: ${n}`),a}default:return"Settings"}})(e),N=Ae(T);return Re().createElement(Ti,{label:R},"terms"===e.type&&Re().createElement(Re().Fragment,null,Re().createElement($e.InlineField,Bi({label:"Order"},Hi),Re().createElement($e.Select,{onChange:t=>P(li({bucketAgg:e,settingName:"order",newValue:t.value})),options:Oe,value:(null===(t=e.settings)||void 0===t?void 0:t.order)||(null===(r=Ee[e.type].defaultSettings)||void 0===r?void 0:r.order)})),Re().createElement($e.InlineField,Bi({label:"Size"},Hi),Re().createElement($e.Select,{onChange:t=>P(li({bucketAgg:e,settingName:"size",newValue:t.value})),options:Se,value:(null===(n=e.settings)||void 0===n?void 0:n.size)||(null===(a=Ee[e.type].defaultSettings)||void 0===a?void 0:a.size),allowCustomValue:!0})),Re().createElement($e.InlineField,Gi(Bi({label:"Execution Hint"},Hi),{tooltip:"Determines how the aggregation should be executed. OpenSearch automatically chooses the optimal hint based on field type (global_ordinals for keyword fields, map for scripts) if not specified."}),Re().createElement($e.Select,{"data-testid":"execution-hint-select",onChange:t=>P(li({bucketAgg:e,settingName:"execution_hint",newValue:t.value})),options:Wi,value:null===(i=e.settings)||void 0===i?void 0:i.execution_hint,placeholder:"Select execution hint"})),Re().createElement($e.InlineField,Bi({label:"Min Doc Count"},Hi),Re().createElement($e.Input,{onBlur:t=>P(li({bucketAgg:e,settingName:"min_doc_count",newValue:t.target.value})),defaultValue:(null===(o=e.settings)||void 0===o?void 0:o.min_doc_count)||(null===(s=Ee[e.type].defaultSettings)||void 0===s?void 0:s.min_doc_count)})),Re().createElement($e.InlineField,Bi({label:"Order By"},Hi),Re().createElement($e.Select,{onChange:t=>P(li({bucketAgg:e,settingName:"orderBy",newValue:t.value})),options:N,value:(null===(l=e.settings)||void 0===l?void 0:l.orderBy)||(null===(u=Ee[e.type].defaultSettings)||void 0===u?void 0:u.orderBy)})),Re().createElement($e.InlineField,Bi({label:"Missing"},Hi),Re().createElement($e.Input,{onBlur:t=>P(li({bucketAgg:e,settingName:"missing",newValue:t.target.value})),defaultValue:(null===(c=e.settings)||void 0===c?void 0:c.missing)||(null===(d=Ee[e.type].defaultSettings)||void 0===d?void 0:d.missing)}))),"geohash_grid"===e.type&&Re().createElement($e.InlineField,Bi({label:"Precision"},Hi),Re().createElement($e.Input,{onBlur:t=>P(li({bucketAgg:e,settingName:"precision",newValue:t.target.value})),defaultValue:(null===(p=e.settings)||void 0===p?void 0:p.precision)||(null===(m=Ee[e.type].defaultSettings)||void 0===m?void 0:m.precision)})),"date_histogram"===e.type&&Re().createElement(Re().Fragment,null,Re().createElement($e.InlineField,Bi({label:"Interval"},Hi),Re().createElement($e.Select,{onChange:t=>P(li({bucketAgg:e,settingName:"interval",newValue:t.value})),options:Ie,value:(null===(f=e.settings)||void 0===f?void 0:f.interval)||(null===(h=Ee[e.type].defaultSettings)||void 0===h?void 0:h.interval),allowCustomValue:!0})),Re().createElement($e.InlineField,Bi({label:"Min Doc Count"},Hi),Re().createElement($e.Input,{onBlur:t=>P(li({bucketAgg:e,settingName:"min_doc_count",newValue:t.target.value})),defaultValue:(null===(g=e.settings)||void 0===g?void 0:g.min_doc_count)||(null===(v=Ee[e.type].defaultSettings)||void 0===v?void 0:v.min_doc_count)})),Re().createElement($e.InlineField,Gi(Bi({label:"Trim Edges"},Hi),{tooltip:"Trim the edges on the timeseries datapoints"}),Re().createElement($e.Input,{onBlur:t=>P(li({bucketAgg:e,settingName:"trimEdges",newValue:t.target.value})),defaultValue:(null===(b=e.settings)||void 0===b?void 0:b.trimEdges)||(null===(y=Ee[e.type].defaultSettings)||void 0===y?void 0:y.trimEdges)})),Re().createElement($e.InlineField,Gi(Bi({label:"Offset"},Hi),{tooltip:"Change the start value of each bucket by the specified positive (+) or negative offset (-) duration, such as 1h for an hour, or 1d for a day"}),Re().createElement($e.Input,{onBlur:t=>P(li({bucketAgg:e,settingName:"offset",newValue:t.target.value})),defaultValue:(null===(E=e.settings)||void 0===E?void 0:E.offset)||(null===(O=Ee[e.type].defaultSettings)||void 0===O?void 0:O.offset)}))),"histogram"===e.type&&Re().createElement(Re().Fragment,null,Re().createElement($e.InlineField,Bi({label:"Interval"},Hi),Re().createElement($e.Input,{onBlur:t=>P(li({bucketAgg:e,settingName:"interval",newValue:t.target.value})),defaultValue:(null===(S=e.settings)||void 0===S?void 0:S.interval)||(null===(w=Ee[e.type].defaultSettings)||void 0===w?void 0:w.interval)})),Re().createElement($e.InlineField,Bi({label:"Min Doc Count"},Hi),Re().createElement($e.Input,{onBlur:t=>P(li({bucketAgg:e,settingName:"min_doc_count",newValue:t.target.value})),defaultValue:(null===(I=e.settings)||void 0===I?void 0:I.min_doc_count)||(null===(A=Ee[e.type].defaultSettings)||void 0===A?void 0:A.min_doc_count)}))),"filters"===e.type&&Re().createElement(Vi,{value:e}))};function zi(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}const Qi=Object.entries(Ee).map((([e,{label:t}])=>({label:t,value:e}))),Xi=({value:e,text:t})=>({label:t,value:`${e||t}`}),Yi=({value:e})=>{const t=Si(),r=fn();return Re().createElement(Re().Fragment,null,Re().createElement($e.InlineSegmentGroup,null,Re().createElement($e.Segment,{className:Ai,options:Qi,onChange:t=>r(oi({id:e.id,newType:t.value})),value:(n=e,{label:Ee[n.type].label,value:n.type})}),Pe(e)&&Re().createElement($e.SegmentAsync,{className:Ai,loadOptions:()=>function(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){zi(i,n,a,o,s,"next",e)}function s(e){zi(i,n,a,o,s,"throw",e)}o(void 0)}))}}((function*(){return(yield(()=>{switch(e.type){case"date_histogram":return t.getFields("date");case"geohash_grid":return t.getFields("geo_point");default:return t.getFields()}})()).map(Xi)}))(),onChange:t=>r(si({id:e.id,newField:t.value})),placeholder:"Select Field",value:e.field}),Re().createElement(Ki,{bucketAgg:e})));var n},Ji=({children:e,label:t,onRemoveClick:r,onHideClick:a,hidden:i=!1,disableRemove:o=!1})=>{const s=(0,$e.useTheme)(),l=Zi(s);return Re().createElement($e.InlineFieldRow,null,Re().createElement($e.InlineSegmentGroup,null,Re().createElement($e.InlineLabel,{width:17,as:"div"},Re().createElement("span",null,t),Re().createElement("span",{className:l.iconWrapper},a&&Re().createElement($e.IconButton,{name:i?"eye-slash":"eye",onClick:a,size:"sm","aria-pressed":i,"aria-label":"hide metric",className:l.icon}),r&&Re().createElement($e.IconButton,{name:"trash-alt",size:"sm",className:l.icon,onClick:r||n.noop,disabled:o,"aria-label":"remove metric"})))),e)},Zi=(0,$e.stylesFactory)((e=>({iconWrapper:Ne.css`
      display: flex;
    `,icon:Ne.css`
      color: ${e.colors.textWeak};
      margin-left: ${e.spacing.xxs};
    `}))),eo=({nextId:e})=>{const t=fn(),{bucketAggs:r}=Oi(),n=(null==r?void 0:r.length)||0;return Re().createElement(Re().Fragment,null,r.map(((r,a)=>Re().createElement(Ji,{key:r.id,label:0===a?"Group By":"Then By",onRemoveClick:()=>t(ii(r.id)),disableRemove:!(n>1)},Re().createElement(Yi,{value:r}),0===a&&Re().createElement(xi,{iconName:"plus",onClick:()=>t(ai(e)),label:"add"})))))},to=(0,$e.stylesFactory)(((e,t)=>({color:t&&Ne.css`
      &,
      &:hover,
      label,
      a {
        color: ${t?e.colors.textFaint:e.colors.text};
      }
    `}))),ro=Ne.css`
  white-space: nowrap;
`,no=e=>({label:ce(e),value:e}),ao=({options:e,onChange:t,className:r,value:n})=>{return Re().createElement($e.Segment,{className:(0,Ne.cx)(r,ro),options:(a=e,a.map(no)),onChange:t,placeholder:"Select Metric",value:n?no(e.find((e=>e.id===n))):void 0});var a},io=Ra("@pipelineVariables/add"),oo=Ra("@pipelineVariables/remove"),so=Ra("@pipelineVariables/rename"),lo=Ra("@pipelineVariables/change_metric");function uo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){uo(e,t,r[t])}))}return e}function po(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const mo=(e=[],t)=>io.match(t)?[...e,{name:"var1",pipelineAgg:""}]:oo.match(t)?e.slice(0,t.payload).concat(e.slice(t.payload+1)):so.match(t)?e.map(((e,r)=>r!==t.payload.index?e:po(co({},e),{name:t.payload.newName}))):lo.match(t)?e.map(((e,r)=>r!==t.payload.index?e:po(co({},e),{pipelineAgg:t.payload.newMetric}))):e;function fo({label:e,settingName:t,metric:r,placeholder:a,tooltip:i}){const o=fn(),[s]=(0,Te.useState)((0,n.uniqueId)("es-field-id-")),l=r.settings;return Re().createElement($e.InlineField,{label:e,labelWidth:16,tooltip:i},Re().createElement($e.Input,{id:s,placeholder:a,onBlur:e=>o(Qa({metric:r,settingName:t,newValue:e.target.value})),defaultValue:null==l?void 0:l[t]}))}const ho=({value:e,previousMetrics:t})=>{var r;const n=fn(),a=pn((t=>n(za({metric:e,attribute:"pipelineVariables",newValue:t}))),e.pipelineVariables,mo);return(0,Te.useEffect)((()=>{var t;(null===(t=e.pipelineVariables)||void 0===t?void 0:t.length)||a(io())}),[null===(r=e.pipelineVariables)||void 0===r?void 0:r.length,a]),Re().createElement(Re().Fragment,null,Re().createElement("div",{className:Ne.css`
          display: flex;
        `},Re().createElement($e.InlineLabel,{width:16},"Variables"),Re().createElement("div",{className:Ne.css`
            display: grid;
            grid-template-columns: 1fr auto;
            row-gap: 4px;
            margin-bottom: 4px;
          `},e.pipelineVariables.map(((r,n)=>Re().createElement(Te.Fragment,{key:r.name},Re().createElement("div",{className:Ne.css`
                  display: grid;
                  column-gap: 4px;
                  grid-template-columns: auto auto;
                `},Re().createElement($e.Input,{defaultValue:r.name,placeholder:"Variable Name",onBlur:e=>a(so({newName:e.target.value,index:n}))}),Re().createElement(ao,{onChange:e=>a(lo({newMetric:e.value.id,index:n})),options:t,value:r.pipelineAgg})),Re().createElement(Li,{index:n,elements:e.pipelineVariables||[],onAdd:()=>a(io()),onRemove:()=>a(oo(n))})))))),Re().createElement(fo,{label:"Script",metric:e,settingName:"script",tooltip:"Scripting language is Painless. Use params.<var> to reference a variable.",placeholder:"params.var1 / params.var2"}))};function go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){go(e,t,r[t])}))}return e}function bo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const yo=({metric:e})=>{var t,r,n,a,i,o,s,l,u,c,d,p,m,f,h,g,v,b,y,E,O,S;const w=fn();return Re().createElement(Re().Fragment,null,Re().createElement($e.InlineField,{label:"Model"},Re().createElement($e.Select,{onChange:t=>w(Qa({metric:e,settingName:"model",newValue:t.value})),options:te,value:null===(t=e.settings)||void 0===t?void 0:t.model})),Re().createElement($e.InlineField,{label:"Window"},Re().createElement($e.Input,{onBlur:t=>w(Qa({metric:e,settingName:"window",newValue:parseInt(t.target.value,10)})),defaultValue:null===(r=e.settings)||void 0===r?void 0:r.window})),Re().createElement($e.InlineField,{label:"Predict"},Re().createElement($e.Input,{onBlur:t=>w(Qa({metric:e,settingName:"predict",newValue:parseInt(t.target.value,10)})),defaultValue:null===(n=e.settings)||void 0===n?void 0:n.predict})),(e=>{var t;return"ewma"===(null===(t=e.settings)||void 0===t?void 0:t.model)})(e)&&Re().createElement(Re().Fragment,null,Re().createElement($e.InlineField,{label:"Alpha"},Re().createElement($e.Input,{onBlur:t=>{var r;return w(Qa({metric:e,settingName:"settings",newValue:bo(vo({},null===(r=e.settings)||void 0===r?void 0:r.settings),{alpha:parseFloat(t.target.value)})}))},defaultValue:null===(i=e.settings)||void 0===i||null===(a=i.settings)||void 0===a?void 0:a.alpha})),Re().createElement($e.InlineField,{label:"Minimize"},Re().createElement($e.Switch,{onChange:t=>w(Qa({metric:e,settingName:"minimize",newValue:t.target.checked})),checked:!!(null===(o=e.settings)||void 0===o?void 0:o.minimize)}))),(e=>{var t;return"holt"===(null===(t=e.settings)||void 0===t?void 0:t.model)})(e)&&Re().createElement(Re().Fragment,null,Re().createElement($e.InlineField,{label:"Alpha"},Re().createElement($e.Input,{onBlur:t=>{var r;return w(Qa({metric:e,settingName:"settings",newValue:bo(vo({},null===(r=e.settings)||void 0===r?void 0:r.settings),{alpha:parseFloat(t.target.value)})}))},defaultValue:null===(l=e.settings)||void 0===l||null===(s=l.settings)||void 0===s?void 0:s.alpha})),Re().createElement($e.InlineField,{label:"Beta"},Re().createElement($e.Input,{onBlur:t=>{var r;return w(Qa({metric:e,settingName:"settings",newValue:bo(vo({},null===(r=e.settings)||void 0===r?void 0:r.settings),{beta:parseFloat(t.target.value)})}))},defaultValue:null===(c=e.settings)||void 0===c||null===(u=c.settings)||void 0===u?void 0:u.beta})),Re().createElement($e.InlineField,{label:"Minimize"},Re().createElement($e.Switch,{onChange:t=>w(Qa({metric:e,settingName:"minimize",newValue:t.target.checked})),checked:!!(null===(d=e.settings)||void 0===d?void 0:d.minimize)}))),(e=>{var t;return"holt_winters"===(null===(t=e.settings)||void 0===t?void 0:t.model)})(e)&&Re().createElement(Re().Fragment,null,Re().createElement($e.InlineField,{label:"Alpha"},Re().createElement($e.Input,{onBlur:t=>{var r;return w(Qa({metric:e,settingName:"settings",newValue:bo(vo({},null===(r=e.settings)||void 0===r?void 0:r.settings),{alpha:parseFloat(t.target.value)})}))},defaultValue:null===(m=e.settings)||void 0===m||null===(p=m.settings)||void 0===p?void 0:p.alpha})),Re().createElement($e.InlineField,{label:"Beta"},Re().createElement($e.Input,{onBlur:t=>{var r;return w(Qa({metric:e,settingName:"settings",newValue:bo(vo({},null===(r=e.settings)||void 0===r?void 0:r.settings),{beta:parseFloat(t.target.value)})}))},defaultValue:null===(h=e.settings)||void 0===h||null===(f=h.settings)||void 0===f?void 0:f.beta})),Re().createElement($e.InlineField,{label:"Gamma"},Re().createElement($e.Input,{onBlur:t=>{var r;return w(Qa({metric:e,settingName:"settings",newValue:bo(vo({},null===(r=e.settings)||void 0===r?void 0:r.settings),{gamma:parseFloat(t.target.value)})}))},defaultValue:null===(v=e.settings)||void 0===v||null===(g=v.settings)||void 0===g?void 0:g.gamma})),Re().createElement($e.InlineField,{label:"Period"},Re().createElement($e.Input,{onBlur:t=>{var r;return w(Qa({metric:e,settingName:"settings",newValue:bo(vo({},null===(r=e.settings)||void 0===r?void 0:r.settings),{period:parseInt(t.target.value,10)})}))},defaultValue:null===(y=e.settings)||void 0===y||null===(b=y.settings)||void 0===b?void 0:b.period})),Re().createElement($e.InlineField,{label:"Pad"},Re().createElement($e.Switch,{onChange:t=>{var r;return w(Qa({metric:e,settingName:"settings",newValue:bo(vo({},null===(r=e.settings)||void 0===r?void 0:r.settings),{pad:t.target.checked})}))},checked:!!(null===(O=e.settings)||void 0===O||null===(E=O.settings)||void 0===E?void 0:E.pad)})),Re().createElement($e.InlineField,{label:"Minimize"},Re().createElement($e.Switch,{onChange:t=>w(Qa({metric:e,settingName:"minimize",newValue:t.target.checked})),checked:!!(null===(S=e.settings)||void 0===S?void 0:S.minimize)}))))};function Eo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Eo(e,t,r[t])}))}return e}function So(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const wo={labelWidth:16},Io=({metric:e,previousMetrics:t})=>{var r,n,a,i,o,s,l;const u=fn(),c=(e=>{switch(e.type){case"cardinality":var t;return`Precision threshold: ${(null===(t=e.settings)||void 0===t?void 0:t.precision_threshold)||""}`;case"percentiles":var r,n,a,i;return(null===(r=e.settings)||void 0===r?void 0:r.percents)&&(null===(a=e.settings)||void 0===a||null===(n=a.percents)||void 0===n?void 0:n.length)>=1?`Values: ${null===(i=e.settings)||void 0===i?void 0:i.percents}`:"Percents: Default";case"extended_stats":{const t=Object.entries(e.meta||{}).map((([e,t])=>{var r;return t&&(null===(r=ee.find((e=>t=>t.value===e)(e)))||void 0===r?void 0:r.label)})).filter(Boolean);return`Stats: ${t.length>0?t.join(", "):"None selected"}`}case"raw_document":case"raw_data":{var o,s;let t=`Size: ${(null===(o=e.settings)||void 0===o?void 0:o.size)||500}`;return t+=`, Order: ${(null===(s=e.settings)||void 0===s?void 0:s.order)||"desc"}`,t}default:return"Options"}})(e),d=Oi();var p;return Re().createElement(Ti,{label:c,hidden:e.hide},"derivative"===e.type&&Re().createElement(fo,{label:"Unit",metric:e,settingName:"unit"}),"cumulative_sum"===e.type&&Re().createElement(fo,{label:"Format",metric:e,settingName:"format"}),"moving_avg"===e.type&&Re().createElement(yo,{metric:e}),"moving_fn"===e.type&&Re().createElement(Re().Fragment,null,Re().createElement(fo,{label:"Window",metric:e,settingName:"window"}),Re().createElement(fo,{label:"Script",metric:e,settingName:"script"}),Re().createElement(fo,{label:"Shift",metric:e,settingName:"shift"})),"bucket_script"===e.type&&Re().createElement(ho,{value:e,previousMetrics:t}),"cardinality"===e.type&&Re().createElement(fo,{label:"Precision Threshold",metric:e,settingName:"precision_threshold"}),"extended_stats"===e.type&&Re().createElement(Re().Fragment,null,ee.map((t=>{var r,n,a;return Re().createElement(Ao,{key:t.value,stat:t,onChange:r=>u(Xa({metric:e,meta:t.value,newValue:r})),value:void 0!==(null===(r=e.meta)||void 0===r?void 0:r[t.value])?!!(null===(n=e.meta)||void 0===n?void 0:n[t.value]):!!(null===(a=K.extended_stats.defaults.meta)||void 0===a?void 0:a[t.value])})})),Re().createElement(fo,{label:"Sigma",metric:e,settingName:"sigma",placeholder:"3"})),"percentiles"===e.type&&Re().createElement($e.InlineField,Oo({label:"Percentiles"},wo),Re().createElement($e.Input,{onBlur:t=>u(Qa({metric:e,settingName:"percents",newValue:t.target.value.split(",").filter(Boolean)})),defaultValue:(null===(r=e.settings)||void 0===r?void 0:r.percents)||(null===(n=K.percentiles.defaults.settings)||void 0===n?void 0:n.percents),placeholder:"1,5,25,50,75,95,99"})),("raw_data"===e.type||"raw_document"===e.type||"logs"===e.type)&&Re().createElement($e.InlineField,Oo({label:"Size"},wo),Re().createElement($e.Input,{id:`OS-query-${d.refId}_metric-${e.id}-size`,onBlur:t=>u(Qa({metric:e,settingName:"size",newValue:t.target.value})),defaultValue:null!==(p=null===(a=e.settings)||void 0===a?void 0:a.size)&&void 0!==p?p:null===(i=K.raw_data.defaults.settings)||void 0===i?void 0:i.size})),("raw_data"===e.type||"raw_document"===e.type)&&Re().createElement(Re().Fragment,null,Re().createElement($e.InlineField,Oo({label:"Use time range"},wo),Re().createElement($e.InlineSwitch,{id:`OS-query-${d.refId}_metric-${e.id}-use-time-range`,onChange:t=>u(Qa({metric:e,settingName:"useTimeRange",newValue:t.target.checked})),value:null===(o=e.settings)||void 0===o?void 0:o.useTimeRange})),(null===(s=e.settings)||void 0===s?void 0:s.useTimeRange)&&Re().createElement($e.InlineField,{label:"Order",htmlFor:`OS-query-${d.refId}_metric-${e.id}-order`},Re().createElement($e.Select,{inputId:`OS-query-${d.refId}_metric-${e.id}-order`,options:Q,onChange:t=>u(Qa({metric:e,settingName:"order",newValue:t.value})),value:(null===(l=e.settings)||void 0===l?void 0:l.order)||"desc"}))),(e=>K[e.type].supportsInlineScript)(e)&&Re().createElement(fo,{label:"Script",metric:e,settingName:"script",placeholder:"_value * 1"}),(e=>K[e.type].supportsMissing)(e)&&Re().createElement(fo,{label:"Missing",metric:e,settingName:"missing",tooltip:"The missing parameter defines how documents that are missing a value should be treated. By default they will be ignored but it is also possible to treat them as if they had a value"}))},Ao=({stat:e,onChange:t,value:r})=>{const[a]=(0,Te.useState)((0,n.uniqueId)("es-field-id-"));return Re().createElement($e.InlineField,So(Oo({label:e.label},wo),{key:e.value}),Re().createElement($e.Switch,{id:a,onChange:e=>t(e.target.checked),value:r}))};function Po(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}const To=({value:e,text:t})=>({label:t,value:`${e||t}`}),Ro=e=>!K[e.type].isPipelineAgg,No=(e,t,r)=>{const n=e.some(Ro);return Object.entries(K).filter((([e,t])=>!t.isSingleMetric)).filter((([e,{versionRange:n}])=>(0,B.satisfies)(r,(null==n?void 0:n[t])||"*"))).filter((([e,t])=>n||!t.isPipelineAgg)).map((([e,{label:t}])=>({label:t,value:e})))},$o=({value:e})=>{const t=to((0,$e.useTheme)(),!!e.hide),r=Si(),n=Oi(),a=fn(),i=n.metrics.slice(0,n.metrics.findIndex((t=>t.id===e.id)));return Re().createElement(Re().Fragment,null,Re().createElement($e.InlineSegmentGroup,null,Re().createElement($e.Segment,{className:(0,Ne.cx)(t.color,Ai),options:No(i,r.flavor,r.version),onChange:t=>a(Ha({id:e.id,type:t.value})),value:(o=e,{label:K[o.type].label,value:o.type})}),X(e)&&!Y(e)&&Re().createElement($e.SegmentAsync,{className:(0,Ne.cx)(t.color,Ai),loadOptions:()=>function(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Po(i,n,a,o,s,"next",e)}function s(e){Po(i,n,a,o,s,"throw",e)}o(void 0)}))}}((function*(){return(yield"cardinality"===e.type?r.getFields():r.getFields("number")).map(To)}))(),onChange:t=>a(Wa({id:e.id,field:t.value})),placeholder:"Select Field",value:e.field}),Y(e)&&!J(e)&&Re().createElement(ao,{className:(0,Ne.cx)(t.color,Ai),onChange:t=>{var r;return a(Wa({id:e.id,field:null===(r=t.value)||void 0===r?void 0:r.id}))},options:i,value:e.field})),Z(e)&&Re().createElement(Io,{metric:e,previousMetrics:i}));var o},xo=({name:e,metric:t,info:r})=>Re().createElement($e.InlineFieldRow,null,Re().createElement($e.InlineSegmentGroup,null,Re().createElement($e.InlineLabel,{width:17,as:"div"},Re().createElement("span",null,e))),Re().createElement(Io,{metric:t,previousMetrics:[]}),null!=r&&Re().createElement($e.InlineSegmentGroup,null,Re().createElement($e.InlineLabel,null,r))),Lo=({nextId:e})=>{const t=fn(),{metrics:r}=Oi(),n=(null==r?void 0:r.length)||0;return Re().createElement(Re().Fragment,null,null==r?void 0:r.map(((r,a)=>{switch(r.type){case"logs":return Re().createElement(xo,{key:`${r.type}-${r.id}`,name:"Logs",metric:r});case"raw_data":return Re().createElement(xo,{key:`${r.type}-${r.id}`,name:"Raw Data",metric:r});case"raw_document":return Re().createElement(xo,{key:`${r.type}-${r.id}`,name:"Raw Document",metric:r});default:return Re().createElement(Ji,{key:r.id,label:`Metric (${r.id})`,hidden:r.hide,onHideClick:()=>t(Ka(r.id)),onRemoveClick:()=>t(Ga(r.id)),disableRemove:!(n>1)},Re().createElement($o,{value:r}),!K[r.type].isSingleMetric&&0===a&&Re().createElement(xi,{iconName:"plus",onClick:()=>t(Ba(e)),label:"add"}))}})))};function _o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Co(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Do=[{value:W.Metric,label:"Metric"},{value:W.Logs,label:"Logs"},{value:W.RawData,label:"Raw Data"},{value:W.RawDocument,label:"Raw Document"},{value:W.Traces,label:"Traces"}];function jo(e){switch(e){case W.Logs:return"logs";case W.Metric:return"count";case W.RawData:return"raw_data";case W.RawDocument:return"raw_document";default:throw new Error(`Query type ${e} does not have a corresponding metric aggregation`)}}const Fo=e=>{var t;const r=Oi(),n=fn(),a=null===(t=r.metrics)||void 0===t?void 0:t[0];if(null==a)return null;const i=r.luceneQueryType===W.Traces?W.Traces:K[a.type].impliedLuceneQueryType;return Re().createElement($e.RadioButtonGroup,{fullWidth:!1,options:Do,value:i,onChange:t=>{t!==W.Traces?n(Ya({luceneQueryType:t,id:a.id,type:jo(t)})):e.onChange(Co(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_o(e,t,r[t])}))}return e}({},r),{luceneQueryType:t}))}})},ko=({children:e,wrap:t=!0,...r})=>{var n,a;return(0,Cr.jsx)($e.Stack,{wrap:t?"wrap":void 0,direction:null!=(n=r.direction)?n:"row",gap:null!=(a=r.gap)?a:2,...r,children:e})},Mo=({children:e})=>(0,Cr.jsx)(ko,{gap:.5,direction:"column",children:e}),Vo=({children:e})=>{const t=(0,$e.useStyles2)(Uo);return(0,Cr.jsx)("div",{className:t.root,children:(0,Cr.jsx)(ko,{gap:2,children:e})})},Uo=e=>({root:(0,Ne.css)({padding:e.spacing(1),backgroundColor:e.colors.background.secondary,borderRadius:e.shape.radius.default})}),qo=e=>{var t;const{label:r,optional:n,tooltip:a,tooltipInteractive:i,children:o,width:s,...l}=e,u=(0,$e.useStyles2)(Bo,s),c=(null==l?void 0:l.htmlFor)||(null==(t=$e.ReactUtils)?void 0:t.getChildId(o)),d=(0,Cr.jsxs)(Cr.Fragment,{children:[(0,Cr.jsxs)("label",{className:u.label,htmlFor:c,children:[r,n&&(0,Cr.jsx)("span",{className:u.optional,children:" - optional"}),a&&(0,Cr.jsx)($e.Tooltip,{placement:"top",content:a,theme:"info",interactive:i,children:(0,Cr.jsx)($e.Icon,{tabIndex:0,name:"info-circle",size:"sm",className:u.icon})})]}),(0,Cr.jsx)($e.Space,{v:.5})]});return(0,Cr.jsx)("div",{className:u.root,children:(0,Cr.jsx)($e.Field,{className:u.field,label:d,...l,children:o})})},Bo=(e,t)=>({root:(0,Ne.css)({minWidth:e.spacing(null!=t?t:0)}),label:(0,Ne.css)({fontSize:12,fontWeight:e.typography.fontWeightMedium}),optional:(0,Ne.css)({fontStyle:"italic",color:e.colors.text.secondary}),field:(0,Ne.css)({marginBottom:0}),icon:(0,Ne.css)({color:e.colors.text.secondary,marginLeft:e.spacing(1),":hover":{color:e.colors.text.primary}})});function Go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ho(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Go(e,t,r[t])}))}return e}function Wo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ko=({query:e,onChange:t,onRunQuery:r})=>{const n=e.luceneQueryType||W.Metric,a=e.serviceMap||!1,i=(()=>{const{metrics:e,bucketAggs:t}=Oi();return(0,Te.useMemo)((()=>(Math.max(...[...(null==e?void 0:e.map(wi))||["0"],...(null==t?void 0:t.map(wi))||["0"]].map(Ii))+1).toString()),[e,t])})(),o=fn();return Re().createElement(Mo,null,Re().createElement(Vo,null,Re().createElement(qo,{label:"Lucene query",width:"100%"},Re().createElement($e.QueryField,{"data-testid":"lucene-query-editor-row",key:e.queryType,query:e.query,onBlur:()=>{},onRunQuery:r,onChange:e=>o(Ma(e)),placeholder:"Lucene Query",portalOrigin:"opensearch"}))),Re().createElement(Vo,null,Re().createElement(Fo,{onChange:t})),e.luceneQueryType===W.Traces&&Re().createElement($e.InlineFieldRow,null,Re().createElement($e.InlineSegmentGroup,null,Re().createElement($e.InlineField,{label:"Service Map",tooltip:"Request and display service map data for trace(s)"},Re().createElement($e.InlineSwitch,{value:e.serviceMap||!1,onChange:r=>{const n=r.currentTarget.checked;t(Wo(Ho({},e),{serviceMap:n}))}})),!a&&Re().createElement($e.InlineField,{label:"Size",tooltip:"Maximum returned traces. Defaults to 1000, maximum value of 10000"},Re().createElement($e.Input,{"data-testid":"span-limit-input",placeholder:"1000",defaultValue:e.tracesSize,onBlur:r=>{const n=r.target.value;t(Wo(Ho({},e),{tracesSize:n}))}})))),Qo(n)&&Re().createElement(Lo,{nextId:i}),zo(n)&&Re().createElement(eo,{nextId:i}))},zo=e=>e===W.Metric,Qo=e=>e!==W.Traces;function Xo(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Yo(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Xo(i,n,a,o,s,"next",e)}function s(e){Xo(i,n,a,o,s,"throw",e)}o(void 0)}))}}const Jo={id:_t.OPENSEARCH_PPL_LANGUAGE_DEFINITION_ID,extensions:[],aliases:[],mimetypes:[],loader:()=>Promise.resolve().then(p.bind(p,5968))};const Zo=function(e){(0,Te.useEffect)(e,[])};function es(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function ts(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){es(i,n,a,o,s,"next",e)}function s(e){es(i,n,a,o,s,"throw",e)}o(void 0)}))}}function rs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ns(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){rs(e,t,r[t])}))}return e}function as(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const is={height:"150px",width:"100%",showMiniMap:!1,monacoOptions:{scrollBeyondLastLine:!1,fontSize:14,renderLineHighlight:"none",scrollbar:{vertical:"hidden",horizontal:"hidden"},suggestFontSize:12,wordWrap:"on",padding:{top:6}}},os=e=>{const{query:t,onChange:r}=e,n=Si(),a=(0,Te.useRef)(),i=(0,Te.useRef)();Zo((()=>{t.query||r(as(ns({},t),{query:"source = your_index LIMIT 10"}))}));const o=(0,Te.useCallback)((()=>ts((function*(){i.current=yield((e,t,r,n)=>Yo((function*(){const{id:a,loader:i}=t;return null==n||n.dispose(),i().then((n=>e.languages.registerCompletionItemProvider(a,r.getCompletionProvider(e,t))))}))())(a.current,Jo,n.pplCompletionItemProvider,i.current)}))()),[n]),s=(0,Te.useCallback)(((e,n)=>{e.onDidFocusEditorText((()=>e.trigger(kt.id,kt.id,{}))),e.onDidChangeModelContent((()=>{const t=e.getModel();""===(null==t?void 0:t.getValue().trim())&&e.trigger(kt.id,kt.id,{})})),e.addCommand(n.KeyMod.Shift|n.KeyCode.Enter,(()=>{const n=e.getValue();r(as(ns({},t),{query:n}))}))}),[r,t]),l=(0,Te.useCallback)((e=>{const n=as(ns({},t),{query:e});r(n)}),[r,t]);var u;return Re().createElement($e.CodeEditor,as(ns({"data-testid":"ppl-query-field",containerStyles:(0,Ne.css)({width:"100%"})},is),{language:Jo.id,value:null!==(u=t.query)&&void 0!==u?u:"",onBlur:e=>{var r;e!==t.query&&l(e),null===(r=i.current)||void 0===r||r.dispose()},onFocus:o,onBeforeEditorMount:e=>ts((function*(){a.current=e,i.current=yield((e,t,r)=>Yo((function*(){const{id:n,loader:a}=t;if(!e.languages.getLanguages().find((e=>e.id===n)))return e.languages.register({id:n}),a().then((a=>(e.languages.setMonarchTokensProvider(n,a.language),e.languages.setLanguageConfiguration(n,a.conf),e.languages.registerCompletionItemProvider(n,r.getCompletionProvider(e,t)))))}))())(e,Jo,n.pplCompletionItemProvider)}))(),onEditorDidMount:s,onEditorWillUnmount:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.dispose()}}))},ss=()=>{const e=(0,$e.useStyles2)(ls);return Re().createElement("div",{"data-testid":"help-message",className:e},Re().createElement("div",null,Re().createElement("li",null," Table and Logs return any set of columns"),Re().createElement("li",null,"Time series returns",Re().createElement("ul",null,Re().createElement("li",null,"date, datetime, or timestamp datatype as time column"),Re().createElement("li",null,"numeric datatype as values"))),Re().createElement("br",null),"Example PPL query for time series:",Re().createElement("br",null),Re().createElement("code",null,"source=<index>",Re().createElement("br",null),"| eval dateValue=timestamp(timestamp)",Re().createElement("br",null),"| stats count(response) by dateValue")))},ls=e=>(0,Ne.css)({ul:{paddingLeft:e.spacing(1.5)},code:{fontFamily:e.typography.fontFamilyMonospace,fontSize:e.typography.bodySmall.fontSize}}),us=[{label:"Table",value:"table"},{label:"Logs",value:"logs"},{label:"Time series",value:"time_series"}],cs=({format:e})=>{const t=fn();return Re().createElement(qo,{htmlFor:"format-select",label:"Format",tooltip:Re().createElement(ss,null),tooltipInteractive:!0},Re().createElement($e.Select,{"data-testid":"format-select",options:us,onChange:e=>t(fi(e.value)),value:e}))},ds=({onChange:e})=>{const t=Oi();var r;return Re().createElement(Re().Fragment,null,Re().createElement(Vo,null,Re().createElement(cs,{format:null!==(r=t.format)&&void 0!==r?r:"table"})),Re().createElement(Vo,null,Re().createElement(os,{query:t,onChange:e})))},ps={[G.Lucene]:{label:"Lucene"},[G.PPL]:{label:"PPL"}},ms=({value:e})=>{const t=Si(),r=fn();return Re().createElement(qo,{label:"Query type",htmlFor:"query-type"},Re().createElement($e.Select,{id:"query-type","data-testid":"query-type-select",options:(n=t.getSupportedQueryTypes(),Object.entries(ps).filter((([e,t])=>n.includes(e))).map((([e,{label:t}])=>({label:t,value:e})))),value:e||G.Lucene,onChange:e=>{(e=>Object.values(G).includes(e))(e.value)&&r(pi(e.value))}}));var n},fs=({children:e})=>{const t=(0,$e.useStyles2)(hs);return(0,Cr.jsx)("div",{className:t.root,children:e})},hs=e=>({root:(0,Ne.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:e.spacing(3),minHeight:e.spacing(4)})});var gs=p(8146),vs=p.n(gs);function bs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ys(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){bs(e,t,r[t])}))}return e}function Es(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Os(e){return"string"==typeof e?[{content:e,types:[],aliases:[]}]:Array.isArray(e)?e.flatMap((e=>Os(e))):e instanceof vs().Token?Os(e.content).flatMap((t=>{let r=[];var n;"string"==typeof e.alias?r=[e.alias]:r=null!==(n=e.alias)&&void 0!==n?n:[];return{content:t.content,types:[e.type,...t.types],aliases:[...r,...t.aliases]}})):[]}function Ss(e){const t=Os(e);if(!t.length)return[];const r=t[0];r.prev=null,r.next=t.length>=2?t[1]:null,r.offsets={start:0,end:r.content.length};for(let e=1;e<t.length-1;e++)t[e].prev=t[e-1],t[e].next=t[e+1],t[e].offsets={start:t[e-1].offsets.end,end:t[e-1].offsets.end+t[e].content.length};const n=t[t.length-1];return n.prev=t.length>=2?t[t.length-2]:null,n.next=null,n.offsets={start:t.length>=2?t[t.length-2].offsets.end:0,end:t.length>=2?t[t.length-2].offsets.end+n.content.length:n.content.length},t}const ws=ys({},Es(ys({comment:{pattern:/^#.*/,greedy:!0},backticks:{pattern:/`.*?`/,alias:"string",greedy:!0},quote:{pattern:/[\"'].*?[\"']/,alias:"string",greedy:!0},regex:{pattern:/\/.*?\/(?=\||\s*$|,)/,greedy:!0}},{"query-command":{pattern:new RegExp(`\\b(?:${_t.PPL_COMMANDS.join("|")})\\b`,"i"),alias:"function"},function:{pattern:new RegExp(`\\b(?:${_t.ALL_FUNCTIONS.join("|")})\\b`,"i")},keyword:{pattern:new RegExp(`(\\s+)(${_t.ALL_KEYWORDS.join("|")})(?=\\s+)`,"i"),lookbehind:!0},operator:{pattern:new RegExp(`\\b(?:${_t.PPL_OPERATORS.map((e=>`\\${e}`)).join("|")})\\b`,"i")}}),{"field-name":{pattern:/(@?[_a-zA-Z]+[_.0-9a-zA-Z]*)|(`((\\`)|([^`]))*?`)/,greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,"command-separator":{pattern:/\|/,alias:"punctuation"},"comparison-operator":{pattern:/([<>]=?)|(!?=)/},punctuation:/[{}()`,.]/,whitespace:/\s+/}));const Is=[{title:"The title field contains the word `wind`",queryString:"SOURCE = your_index | WHERE LIKE(title, '%wind%') LIMIT 10"},{title:"The title field contains the word `wind` or the word `windy`",queryString:"SOURCE = your_index | WHERE LIKE(title, '%wind%') OR LIKE(title, '%windy%') LIMIT 10"},{title:"The title field contains the phrase `wind rises`",queryString:"SOURCE = your_index | WHERE LIKE(title, '%wind rises%') LIMIT 10"},{title:"The title.keyword field exactly matches `The wind rises`",queryString:"SOURCE = your_index | WHERE title = 'The wind rises' LIMIT 10"}],As=e=>{const t=(0,$e.useStyles2)(Ps),r=t=>{e.onSelectSampleQuery(t),(e=>{try{(0,ie.reportInteraction)("grafana_opensearch_sample_query_clicked",{query_type:e})}catch(e){console.error("error while reporting opensearch sample query clicked",e)}})(e.queryLanguage),e.onClose()};return Re().createElement($e.Modal,{isOpen:e.isOpen,title:"Sample queries",onDismiss:e.onClose},Re().createElement($e.Text,null,"Get started by selecting a sample query. You can then edit it in the query field."),Is.map(((e,n)=>Re().createElement("div",{key:n},Re().createElement($e.Text,{variant:"h6",weight:"bold"},e.title),Re().createElement("button",{type:"button",className:t.cheatSheetExample,key:e.queryString,onClick:()=>r(e.queryString)},Re().createElement("pre",{"data-testid":`sample-query-${n}`,className:t.cheatSheetExampleCode},function(e,t){const r=ws,n=Ss(vs().tokenize(e,r)).filter((e=>"string"!=typeof e)).map(((e,r)=>Re().createElement("span",{className:`prism-token token ${e.types.join(" ")} ${e.aliases.join(" ")}`,key:`${t}-token-${r}`},e.content)));return Re().createElement("div",{className:"slate-query-field"},n)}(e.queryString,`item-${n}`)))))))};const Ps=e=>({cheatSheetExample:(0,Ne.css)({margin:e.spacing(.5,0,2),textAlign:"left",border:"none",background:"transparent",display:"block"}),cheatSheetExampleCode:(0,Ne.css)({margin:e.spacing(0)})});function Ts(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rs(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ns=({query:e,onChange:t})=>{const[r,n]=(0,Te.useState)(!1),a=(0,Te.useCallback)((()=>{(e=>{try{(0,ie.reportInteraction)("grafana_opensearch_sample_queries_modal_click",{query_type:e})}catch(e){console.error("error while reporting opensearch sample modal",e)}})(e.queryType||G.PPL),n(!0)}),[e]);return Re().createElement(fs,null,Re().createElement($e.Button,{"data-testid":"sample-query-button",variant:"secondary",size:"sm",onClick:a},"Kickstart your query"),Re().createElement(As,{queryLanguage:e.queryType||G.PPL,onSelectSampleQuery:r=>{t(Rs(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ts(e,t,r[t])}))}return e}({},e),{query:r}))},isOpen:r,onClose:()=>n(!1)}))},$s=({value:e,onChange:t,onRunQuery:r})=>{const n=fn();return Re().createElement(Re().Fragment,null,Re().createElement(Vo,null,Re().createElement(ms,{value:e.queryType||G.Lucene}),(!(a=e).luceneQueryType||a.luceneQueryType===W.Metric)&&"date_histogram"===(null==a||null===(o=a.bucketAggs)||void 0===o||null===(i=o.slice(-1)[0])||void 0===i?void 0:i.type)&&Re().createElement(qo,{label:"Alias",tooltip:"Aliasing only works for timeseries queries (when the last group is 'Date Histogram'). For all other query types this field is ignored.",htmlFor:"alias-input"},Re().createElement($e.Input,{id:"alias-input",placeholder:"Alias Pattern",onBlur:e=>n(Va(e.currentTarget.value)),defaultValue:e.alias}))),e.queryType&&e.queryType!==G.Lucene?Re().createElement(ds,{onChange:t}):Re().createElement(Ko,{query:e,onChange:t,onRunQuery:r}));var a,i,o},xs=new r.DataSourcePlugin(rr).setQueryEditor((({query:e,onChange:t,onRunQuery:r,datasource:n})=>Re().createElement(Ei,{datasource:n,onChange:t,query:e},e.queryType===G.PPL&&Re().createElement(Ns,{query:e,onChange:t}),Re().createElement($s,{value:e,onChange:t,onRunQuery:r})))).setConfigEditor((e=>{const{options:t,onOptionsChange:r}=e,n=rt(t);(0,Te.useEffect)((()=>{(e=>!(!(0,B.valid)(e.jsonData.version)||e.jsonData.flavor!==H.OpenSearch&&e.jsonData.flavor!==H.Elasticsearch||!e.jsonData.timeField||!e.jsonData.maxConcurrentShardRequests||void 0===e.jsonData.logMessageField||void 0===e.jsonData.logLevelField||void 0===e.jsonData.pplEnabled))(t)||r(rt(t))}),[]);const[a,i]=(0,Te.useState)(!!n.version&&n.version>1),o=function(e){const[t,r]=(0,Te.useState)();return(0,Te.useEffect)((()=>{e.options.version&&(0,ie.getDataSourceSrv)().get(e.options.uid).then((e=>{e instanceof rr&&r(e)}))}),[e.options.version,e.options.uid]),t}(e);(0,Te.useEffect)((()=>{i(!1)}),[n.url,n.access,n.basicAuth,n.basicAuthUser,n.withCredentials,n.secureJsonData,n.jsonData]);return Re().createElement(Re().Fragment,null,Re().createElement($e.DataSourceHttpSettings,{defaultUrl:"http://localhost:9200",dataSourceConfig:n,showAccessOptions:!0,onChange:r,sigV4AuthToggleEnabled:ie.config.sigV4AuthEnabled,renderSigV4Editor:Re().createElement(qr,e)}),ie.config.secureSocksDSProxyEnabled&&Re().createElement($e.SecureSocksProxySettings,{options:n,onOptionsChange:r}),Re().createElement(Ke,{value:n,onChange:r,saveOptions:(e=n)=>function(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){ln(i,n,a,o,s,"next",e)}function s(e){ln(i,n,a,o,s,"throw",e)}o(void 0)}))}}((function*(){if(a)return;const{datasource:t}=yield(0,ie.getBackendSrv)().put(`/api/datasources/${n.id}`,e);e.version=t.version,r(e),i(!0)}))(),datasource:o}),Re().createElement(or,{value:n.jsonData,onChange:e=>r(dn(cn({},n),{jsonData:e}))}),Re().createElement(Nr,{value:n.jsonData.dataLinks,onChange:e=>{r(dn(cn({},n),{jsonData:dn(cn({},n.jsonData),{dataLinks:e})}))}}))}))})(),m})()));
//# sourceMappingURL=module.js.map